/* Generated by Nim Compiler v1.4.2 */
/*   (c) 2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

/* section: NIM_merge_HEADERS */

#include "nimbase.h"
#include <signal.h>
#include <string.h>
#include <netdb.h>
#include <sys/socket.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix

/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x, y)
#define nimln_(x, y)

/* section: NIM_merge_FORWARD_TYPES */
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ;
typedef struct tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw;
typedef struct tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w;
typedef struct tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA;
typedef struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA tySequence__uB9b75OUPRENsBAu4AnoePA;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA_Content tySequence__uB9b75OUPRENsBAu4AnoePA_Content;
typedef struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A;
typedef struct tySequence__8Np6tlClE5az1CyqZdN19bQ tySequence__8Np6tlClE5az1CyqZdN19bQ;
typedef struct tySequence__8Np6tlClE5az1CyqZdN19bQ_Content tySequence__8Np6tlClE5az1CyqZdN19bQ_Content;
typedef struct tyObject_HashSet__bGAilYs5sUICRbD13gZaFg tyObject_HashSet__bGAilYs5sUICRbD13gZaFg;
typedef struct tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ;
typedef struct tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ;
typedef struct tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw;
typedef struct tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA;
typedef struct tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw;
typedef struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA;
typedef struct tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw;
typedef struct tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og;
typedef struct tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w;
typedef struct tySequence__9apztJSmgERYU8fZOjI4pOg tySequence__9apztJSmgERYU8fZOjI4pOg;
typedef struct tySequence__9apztJSmgERYU8fZOjI4pOg_Content tySequence__9apztJSmgERYU8fZOjI4pOg_Content;
typedef struct tyTuple__UV3llMMYFckfui8YMBuUZA tyTuple__UV3llMMYFckfui8YMBuUZA;
typedef struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA;
typedef struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ;

/* section: NIM_merge_TYPES */
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
typedef N_CDECL_PTR(void, tyProc__ln4kdL5W9bbX4a1xl8nnVXQ) (void);
typedef NU8 tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg;
typedef NIM_CHAR tyArray__QQGLPNVVwLhYjkngqAxXQQ[4001];
typedef NU8 tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg;
typedef NU8 tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw;
typedef NU8 tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg;
struct tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ {
int fd;
NIM_BOOL isBuffered;
tyArray__QQGLPNVVwLhYjkngqAxXQQ buffer;
NI currPos;
NI bufLen;
NIM_BOOL isSsl;
tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* sslHandle;
tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* sslContext;
NIM_BOOL sslNoHandshake;
NIM_BOOL sslHasPeekChar;
NIM_CHAR sslPeekChar;
NIM_BOOL sslNoShutdown;
NI32 lastError;
tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg domain;
tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw sockType;
tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol;
};
typedef unsigned long tyArray__2VPt2Ygo2bc8d9cj8iiKnSg[16];
typedef N_CDECL_PTR(int, tyProc__Vff1ipOwDPDGknaRJAdXjA) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ssl);
typedef N_CDECL_PTR(int, tyProc__kxUw9cdxJbPtv0iPyoSbDBQ) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* s, int ret_code);
typedef NU8 tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg;
struct TNimTypeV2 {
void* destructor;
NI size;
NI align;
NCSTRING name;
void* traceImpl;
void* disposeImpl;
void* typeInfoV1;
};
struct RootObj {
TNimTypeV2* m_type;
};
struct tySequence__uB9b75OUPRENsBAu4AnoePA {
  NI len; tySequence__uB9b75OUPRENsBAu4AnoePA_Content* p;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringV2 message;
tySequence__uB9b75OUPRENsBAu4AnoePA trace;
Exception* up;
};
struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA {
  Exception Sup;
};
struct tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A {
NI rc;
};
typedef N_CDECL_PTR(unsigned long, tyProc__wCuLyuC5VitcgJKGCqJQRw) (void);
typedef N_CDECL_PTR(NCSTRING, tyProc__5zMKCPIiPHTYY9cjyzsHlmQ) (unsigned long e, NCSTRING buf);
typedef N_CDECL_PTR(void, tyProc__e47RoMUolEGMiUlfiZt9abQ) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ssl);
struct tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw {
char dummy;
};
struct tySequence__8Np6tlClE5az1CyqZdN19bQ {
  NI len; tySequence__8Np6tlClE5az1CyqZdN19bQ_Content* p;
};
struct tyObject_HashSet__bGAilYs5sUICRbD13gZaFg {
tySequence__8Np6tlClE5az1CyqZdN19bQ data;
NI counter;
};
struct tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w {
tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* context;
tyObject_HashSet__bGAilYs5sUICRbD13gZaFg referencedData;
tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ* extraInternal;
};
typedef int tyArray__JC6Xlef5rNPKoqzdesSPoQ[24];
struct tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ {
tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg val;
NIM_BOOL has;
};
struct tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
typedef NU8 tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg;
typedef N_CDECL_PTR(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*, tyProc__Rqjya8uauy9aPcyfGamaSrg) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* context);
typedef NU8 tyEnum_IpAddressFamily__iqqacz9cr9bcNjYY74E10wPA;
typedef NU8 tyArray__qtqsWM5aXmcpMIVmvq3kAA[16];
typedef NU8 tyArray__H8qf9bpC2ziYA2earmO8m7w[4];
struct tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA {
tyEnum_IpAddressFamily__iqqacz9cr9bcNjYY74E10wPA family;
union{
struct {tyArray__qtqsWM5aXmcpMIVmvq3kAA address_v6;
} _family_1;
struct {tyArray__H8qf9bpC2ziYA2earmO8m7w address_v4;
} _family_2;
};
};
struct tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA {
NI a;
NI b;
};
typedef N_CDECL_PTR(int, tyProc__sG7rgqmtlgBaumPwwN3BfQ) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ssl, NCSTRING buf, NI num);
struct tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw {
NI64 seconds;
NI nanosecond;
};
struct tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
struct tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w {
NI64 ticks;
};
struct tySequence__9apztJSmgERYU8fZOjI4pOg {
  NI len; tySequence__9apztJSmgERYU8fZOjI4pOg_Content* p;
};
typedef N_CDECL_PTR(int, tyProc__09aW01hZ1tSPafLaWVpBcXA) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ssl, void* buf, NI num);
typedef NU8 tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw;
typedef NU8 tyEnum_SslCVerifyMode__t9a9cuHiKUd7w4o8XPQAbfJg;
typedef N_CDECL_PTR(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*, tyProc__HXibadfWHwHwyhCwpIRD2A) (void);
typedef N_CDECL_PTR(int, tyProc__2PA7CxitARKs0jpUW1gQ0g) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* s, NCSTRING ciphers);
typedef N_CDECL_PTR(long, tyProc__JfY9aCDiBh9bgOEieo8Vltxg) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, int cmd, long larg, void* parg);
typedef N_CDECL_PTR(NI, tyProc__aF4y9aPKIi8D4VGrVvX011Q) (NI a, void* b);
typedef N_CDECL_PTR(void, tyProc__H5wL7jexPlRA7WCw9cqLm0A) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* s, NI mode, tyProc__aF4y9aPKIi8D4VGrVvX011Q cb);
typedef N_STDCALL_PTR(int, tyProc__tYatIIo0oRSB9bjHLep7yhQ) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, NCSTRING filename);
typedef N_CDECL_PTR(int, tyProc__xjxKRHVZXDqdWXw9bunoZ3w) (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, NCSTRING filename, int typ);
typedef struct {
N_NIMCALL_PTR(NimStringV2, ClP_0) (NimStringV2 identity, void* ClE_0);
void* ClE_0;
} tyProc__oFHfEKFsiYTMAy9a42cSiKw;
struct tyTuple__UV3llMMYFckfui8YMBuUZA {
NimStringV2 Field0;
NimStringV2 Field1;
};
typedef struct {
N_NIMCALL_PTR(tyTuple__UV3llMMYFckfui8YMBuUZA, ClP_0) (NimStringV2 hint, void* ClE_0);
void* ClE_0;
} tyProc__lYMtBEH0vEMRzoDaCw5CJg;
struct tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ {
  RootObj Sup;
tyProc__oFHfEKFsiYTMAy9a42cSiKw serverGetPskFunc;
tyProc__lYMtBEH0vEMRzoDaCw5CJg clientGetPskFunc;
};
struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA {
NCSTRING procname;
NI line;
NCSTRING filename;
};


#ifndef tySequence__uB9b75OUPRENsBAu4AnoePA_Content_PP
#define tySequence__uB9b75OUPRENsBAu4AnoePA_Content_PP
struct tySequence__uB9b75OUPRENsBAu4AnoePA_Content { NI cap; tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA data[SEQ_DECL_SIZE];};
#endif

      struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ {
NI Field0;
NI Field1;
};


#ifndef tySequence__8Np6tlClE5az1CyqZdN19bQ_Content_PP
#define tySequence__8Np6tlClE5az1CyqZdN19bQ_Content_PP
struct tySequence__8Np6tlClE5az1CyqZdN19bQ_Content { NI cap; tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__8Np6tlClE5az1CyqZdN19bQ_Content_PP
#define tySequence__8Np6tlClE5az1CyqZdN19bQ_Content_PP
struct tySequence__8Np6tlClE5az1CyqZdN19bQ_Content { NI cap; tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ data[SEQ_DECL_SIZE];};
#endif

      typedef NIM_CHAR tyArray__NSMq3FMCIrS8gSbyinBZ8w[14];


#ifndef tySequence__9apztJSmgERYU8fZOjI4pOg_Content_PP
#define tySequence__9apztJSmgERYU8fZOjI4pOg_Content_PP
struct tySequence__9apztJSmgERYU8fZOjI4pOg_Content { NI cap; int data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__9apztJSmgERYU8fZOjI4pOg_Content_PP
#define tySequence__9apztJSmgERYU8fZOjI4pOg_Content_PP
struct tySequence__9apztJSmgERYU8fZOjI4pOg_Content { NI cap; int data[SEQ_DECL_SIZE];};
#endif

      
/* section: NIM_merge_PROC_HEADERS */
N_LIB_PRIVATE N_NIMCALL(void, CRYPTO_malloc_init__G2BDIxFj2W9ajANxAoi8oZA)(void);
N_LIB_PRIVATE N_NIMCALL(int, SSL_library_init__6SfBfS64wp6JZihQGGrnKg)(void);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A)(NimStringV2 msg);
N_LIB_PRIVATE N_NIMCALL(void, SSL_load_error_strings__G2BDIxFj2W9ajANxAoi8oZA_2)(void);
N_LIB_PRIVATE N_NIMCALL(void, OpenSSL_add_all_algorithms__G2BDIxFj2W9ajANxAoi8oZA_3)(void);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(int, SSL_in_init__loUCLHAKQg9cZwis5tAb2ig)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ssl);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size);
N_LIB_PRIVATE N_NOINLINE(void, raiseOSError__CWyPYlyH9a6rAuZckFyVxPA)(NI32 errorCode, NimStringV2 additionalInfo);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__9bUWNxbcGnToMWA9b79aTXLIw)(void);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ)(tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags, NI32 lastError);
N_LIB_PRIVATE N_NIMCALL(void, socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI err, NIM_BOOL async, NI32 lastError, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags);
N_LIB_PRIVATE N_NIMCALL(void, raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g)(NimStringV2 s);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size, NI alignment);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___Ae2FSx40er6tM5hCtHQNSg)(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA* dest);
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p);
static N_INLINE(NI, minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system)(NI x, NI y);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ)(NimStringV2* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___4fQQqvAqifkWGVa4g39cI5A)(tySequence__uB9b75OUPRENsBAu4AnoePA* dest);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e, NCSTRING ename, NCSTRING procname, NCSTRING filename, NI line);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, cstrToNimstr)(NCSTRING str);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___aBBXmHFBEivKqERloP6zmA)(NimStringV2* dest, NimStringV2 src);
static N_INLINE(void, appendString)(NimStringV2* dest, NimStringV2 src);
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size);
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s, NI addlen);
N_LIB_PRIVATE N_NIMCALL(NI32, getSocketError__YATB019buW9cFOjCCZLlKipQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket);
N_LIB_PRIVATE N_NIMCALL(void, close__8c1w8B7fpSuB4Dgr5LHVJA)(int socket);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___1TCKL9aWTg3J2fdjyrLXdQw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___WpGOXMMV39bro5UuSUSaR9ag)(tySequence__8Np6tlClE5az1CyqZdN19bQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p, NI alignment);
N_LIB_PRIVATE N_NIMCALL(tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw, toSockType__6alUTTXG6jHTyH82e9a1JDw)(tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol);
N_LIB_PRIVATE N_NIMCALL(struct addrinfo*, getAddrInfo__ANf7QnbfE8nyIlFuWroDcQ)(NimStringV2 address, NU16 port, tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg domain, tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw sockType, tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol);
N_LIB_PRIVATE N_NIMCALL(tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ, toKnownDomain__RQ9bFvLg4dpjf7aRPA8ID9bg)(int family);
static N_INLINE(NIM_BOOL, isNone__H87Mp4Y2b9aVoDHbyPXjVtAoptions)(tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ self);
static N_INLINE(tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg*, unsafeGet__CX9cpSVl0CsECjiCYrAMm9bAoptions)(tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ* self);
N_LIB_PRIVATE N_NIMCALL(int, createNativeSocket__F1LPwUDx07eMGH1vFNDzcw)(tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg domain, tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw sockType, tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol, NIM_BOOL inheritable);
N_LIB_PRIVATE N_NIMCALL(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*, newSocket__9b5QTa9b4dQ3h5Ri1wnR4ujw)(int fd, tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg domain, tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw sockType, tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol, NIM_BOOL buffered);
N_LIB_PRIVATE N_NIMCALL(void, wrapSocket__nSrKttw9bOstnCyvh66mpmQ)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* ctx, tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___Maxw2KUIYGcdUEJ9aO5a9bpw)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest, tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* src);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___VAv9c7AH4o2TPeFuJ74VN7A)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isIpAddress__lty7O9aUHIZT9cqYHeC2n5zA)(NimStringV2 addressStr);
N_LIB_PRIVATE N_NIMCALL(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA, parseIpAddress__1ivqWNphfe1wCfgNmXXOCA)(NimStringV2 addressStr);
static N_INLINE(NIM_BOOL, contains__Pa9a8m0kZYH6LC8N1EcZJdQsystem)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item);
static N_INLINE(NI, find__31wM5Ui9c8jnrQ5QD4oPxOQsystem)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item);
N_LIB_PRIVATE N_NIMCALL(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA, parseIPv6Address__1ivqWNphfe1wCfgNmXXOCA_2)(NimStringV2 addressStr);
static N_INLINE(NimStringV2, X5BX5D___FPvLvuwqfYMFkcbGfPM8QQsystem)(NimStringV2 s, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA x);
N_NIMCALL(NimStringV2, mnewString)(NI len);
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s);
N_LIB_PRIVATE N_NIMCALL(void, nimPrepareStrMutationImpl__C0YoABEefTaYbWLv9aVOzZA)(NimStringV2* s);
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___BokNSDrKN1xmV1nA01G9brAsystem)(NI a, NI b);
N_LIB_PRIVATE N_NIMCALL(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA, parseIPv4Address__1ivqWNphfe1wCfgNmXXOCA_3)(NimStringV2 addressStr);
static N_INLINE(NIM_BOOL, isObj)(TNimTypeV2* obj, NCSTRING subclass);
static N_INLINE(Exception*, nimBorrowCurrentException)(void);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___rR9boD7urcxl7uyUtE46AOA)(Exception** dest, Exception* src);
N_LIB_PRIVATE N_NIMCALL(NI, SSL_set_tlsext_host_name__jGR2GiKRQZ9cgDkYFu4P9aNg)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ssl, NCSTRING name);
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s);
static N_INLINE(void, nimIncRef)(void* p);
N_LIB_PRIVATE N_NIMCALL(NI, send__5L0SyQu9bf9aWLpivLtuRdDg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* data, NI size);
N_LIB_PRIVATE N_NIMCALL(void, readLine__0WLvm80r9c7KImcDRmm5IDg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NimStringV2* line, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags, NI maxLength);
N_LIB_PRIVATE N_NIMCALL(void, setLengthStrV2)(NimStringV2* s, NI newLen);
N_LIB_PRIVATE N_NIMCALL(NI, waitFor__mpNV4IG56MRYASsne34FNA)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw* waited, NI timeout, NI size, NimStringV2 funcName);
N_LIB_PRIVATE N_NIMCALL(NI64, inMilliseconds__df0d89cDnRIju9aB6p1W1qVA)(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw dur);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___Q2zLi69cYyb9b8xp2c9a9aFvUQ)(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og* dest);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasDataBuffered__L6V0D3apf5iJeZChqzkovw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* s);
N_LIB_PRIVATE N_NIMCALL(tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w, getMonoTime__QkEugs2Q2iFK9b83sl2B6wA)(void);
N_LIB_PRIVATE N_NIMCALL(NI, select__9c4QMA6DGRJbXBL6Jy4sbPw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* readfd, NI timeout);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___Ii7N0IPdL6PacyDWpD2POA)(tySequence__9apztJSmgERYU8fZOjI4pOg* dest);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap, NI elemSize, NI elemAlign);
N_LIB_PRIVATE N_NIMCALL(NI, selectRead__hYdMbc9crqOqsDFcxhERoLA)(tySequence__9apztJSmgERYU8fZOjI4pOg* readfds, NI timeout);
N_LIB_PRIVATE N_NIMCALL(void, pluseq___x4VoYzJQBbk9bAft9bFS7fyA)(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw* d1, tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw d2);
N_LIB_PRIVATE N_NIMCALL(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw, minus___p9cBm7joedh4BwcboQ3HMVQ)(tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w a, tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w b);
N_LIB_PRIVATE N_NIMCALL(NI, recv__5L0SyQu9bf9aWLpivLtuRdDg_2)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* data, NI size);
N_LIB_PRIVATE N_NIMCALL(NI, readIntoBuf__3VtccBbq17lyKCft9aSHtGA)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI32 flags);
N_LIB_PRIVATE N_NIMCALL(NI, uniRecv__YQlV9aRgVr9cJoVJlEPDJIqw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* buffer, int size, int flags);
N_LIB_PRIVATE N_NIMCALL(NI, peekChar__vy4VpuiQuyO2yjz3cp2FxQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NIM_CHAR* c);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s, NIM_CHAR c);
N_LIB_PRIVATE N_NIMCALL(NI, recv__s9bHVcCkcztbhZorVAO5UpA)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* data, NI size, NI timeout);
N_LIB_PRIVATE N_NIMCALL(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*, SSLv23_method__LTfNTmKR6aBlZTkY8nHSxg)(void);
N_LIB_PRIVATE N_NIMCALL(unsigned long, getOpenSSLVersion__dJsO04BYfgh1GDCx4NNEgA)(void);
N_LIB_PRIVATE N_NIMCALL(int, SSL_CTX_set_ciphersuites__WApCSzGH2uqCDm9bYkShtQw)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, NCSTRING str);
static N_INLINE(int, SSL_CTX_set_ecdh_auto__7FfmdDMi8b9aPt5ijVCCYfwopenssl)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, int onoff);
N_LIB_PRIVATE N_NIMCALL(NI, SSLCTXSetMode__u4DGuCXu9asDo9aQgd9cu5QNQ)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, NI mode);
N_LIB_PRIVATE N_NIMCALL(void, loadCertificates__geRWUgM7mn0muJSOQgdeJg)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, NimStringV2 certFile, NimStringV2 keyFile);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosfileExists)(NimStringV2 filename);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObjUninit)(NI size, NI alignment);
N_LIB_PRIVATE N_NIMCALL(tyObject_HashSet__bGAilYs5sUICRbD13gZaFg, initHashSet__rkx2SGa9c4bJGzaJP7jTaxg)(NI initialSize);
N_LIB_PRIVATE N_NIMCALL(tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ*, new__5koBfXFt4Ec5TaAoLmPrsw)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___SrpOpUfOUr8D5UIygvrDmw)(tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ* dest);

/* section: NIM_merge_DATA */
static const struct {
  NI cap; NIM_CHAR data[41+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_2 = { 41 | NIM_STRLIT_FLAG, "net.nim(487, 12) `SslLibraryInit() == 1` " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_3 = {41, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_2};
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_4 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_5 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_6 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const struct {
  NI cap; NIM_CHAR data[30+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_7 = { 30 | NIM_STRLIT_FLAG, "Couldn\'t add SIGPIPE to Sigset" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_8 = {30, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_7};
static const struct {
  NI cap; NIM_CHAR data[22+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_9 = { 22 | NIM_STRLIT_FLAG, "Couldn\'t block SIGPIPE" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_10 = {22, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_9};
static const struct {
  NI cap; NIM_CHAR data[23+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_11 = { 23 | NIM_STRLIT_FLAG, "Couldn\'t select SIGPIPE" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_12 = {23, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_11};
N_LIB_PRIVATE TNimTypeV2 NTIv2__GtD0IEVE1EOWxaU5x9amdzA_;
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_13 = { 18 | NIM_STRLIT_FLAG, "No error reported." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_14 = {18, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_13};
static const struct {
  NI cap; NIM_CHAR data[100+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_15 = { 100 | NIM_STRLIT_FLAG, "Please upgrade your OpenSSL library, it does not support the ne"
"cessary protocols. OpenSSL error is: " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_16 = {100, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_15};
static const struct {
  NI cap; NIM_CHAR data[65+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_17 = { 65 | NIM_STRLIT_FLAG, "TLS/SSL connection failed to initiate, socket closed prematurel"
"y." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_18 = {65, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_17};
static const struct {
  NI cap; NIM_CHAR data[26+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_19 = { 26 | NIM_STRLIT_FLAG, "Not enough data on socket." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_20 = {26, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_19};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_21 = {26, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_19};
static const struct {
  NI cap; NIM_CHAR data[41+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_22 = { 41 | NIM_STRLIT_FLAG, "Function for x509 lookup has been called." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_23 = {41, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_22};
static const struct {
  NI cap; NIM_CHAR data[22+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_24 = { 22 | NIM_STRLIT_FLAG, "IO error has occurred " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_25 = {22, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_24};
static const struct {
  NI cap; NIM_CHAR data[54+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_26 = { 54 | NIM_STRLIT_FLAG, "because an EOF was observed that violates the protocol" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_27 = {54, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_26};
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_28 = { 16 | NIM_STRLIT_FLAG, "in the BIO layer" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_29 = {16, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_28};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_30 = { 2 | NIM_STRLIT_FLAG, ": " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_31 = {2, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_30};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_32 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const struct {
  NI cap; NIM_CHAR data[13+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_33 = { 13 | NIM_STRLIT_FLAG, "Unknown Error" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_34 = {13, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_33};
static const struct {
  NI cap; NIM_CHAR data[36+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_35 = { 36 | NIM_STRLIT_FLAG, "No valid socket error code available" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_36 = {36, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_35};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_37 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_38 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_39 = { 24 | NIM_STRLIT_FLAG, "Couldn\'t unblock SIGPIPE" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_40 = {24, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_39};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_41 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_42 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
extern TNimTypeV2 NTIv2__iLZrPn9anoh9ad1MmO0RczFw_;
static const struct {
  NI cap; NIM_CHAR data[26+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_43 = { 26 | NIM_STRLIT_FLAG, "Couldn\'t resolve address: " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_44 = {26, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_43};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_45 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_46 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
extern TNimTypeV2 NTIv2__yoNlBGx0D2tRizIdhQuENw_;
static const struct {
  NI cap; NIM_CHAR data[26+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_47 = { 26 | NIM_STRLIT_FLAG, "IP Address string is empty" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_48 = {26, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_47};
static const struct {
  NI cap; NIM_CHAR data[18+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_49 = { 18 | NIM_STRLIT_FLAG, "Invalid IP Address" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_50 = {18, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_49};
static const struct {
  NI cap; NIM_CHAR data[57+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_51 = { 57 | NIM_STRLIT_FLAG, "Invalid IP Address. Address contains an invalid separator" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_52 = {57, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_51};
static const struct {
  NI cap; NIM_CHAR data[65+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_53 = { 65 | NIM_STRLIT_FLAG, "Invalid IP Address. Address contains more than one \"::\" separat"
"or" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_54 = {65, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_53};
static const struct {
  NI cap; NIM_CHAR data[59+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_55 = { 59 | NIM_STRLIT_FLAG, "Invalid IP Address. The address consists of too many groups" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_56 = {59, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_55};
static const struct {
  NI cap; NIM_CHAR data[50+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_57 = { 50 | NIM_STRLIT_FLAG, "Invalid IP Address. Address may not start with \":\"" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_58 = {50, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_57};
static const struct {
  NI cap; NIM_CHAR data[48+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_59 = { 48 | NIM_STRLIT_FLAG, "Invalid IP Address. Address may not end with \":\"" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_60 = {48, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_59};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_61 = {18, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_49};
static const struct {
  NI cap; NIM_CHAR data[41+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_62 = { 41 | NIM_STRLIT_FLAG, "Invalid IP Address. Value is out of range" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_63 = {41, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_62};
static const struct {
  NI cap; NIM_CHAR data[57+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_64 = { 57 | NIM_STRLIT_FLAG, "Invalid IP Address. Address contains an invalid character" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_65 = {57, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_64};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_66 = {59, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_55};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_67 = {41, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_62};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_68 = {18, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_49};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_69 = {57, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_64};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_70 = {18, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_49};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_71 = {59, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_55};
static const struct {
  NI cap; NIM_CHAR data[58+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_72 = { 58 | NIM_STRLIT_FLAG, "Invalid IP Address. The address consists of too few groups" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_73 = {58, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_72};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_74 = {59, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_55};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_75 = {41, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_62};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_76 = {59, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_55};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_77 = {57, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_64};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_78 = {18, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_49};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_79 = { 24 | NIM_STRLIT_FLAG, "Could not send all data." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_80 = {24, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_79};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_81 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
N_LIB_PRIVATE TNimTypeV2 NTIv2__VuFrIFILhVuaGaO5FCG0Og_;
static const struct {
  NI cap; NIM_CHAR data[9+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_82 = { 9 | NIM_STRLIT_FLAG, "Call to \'" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_83 = {9, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_82};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_84 = { 12 | NIM_STRLIT_FLAG, "\' timed out." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_85 = {12, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_84};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_86 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_87 = {9, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_82};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_88 = {12, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_84};
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_89 = { 8 | NIM_STRLIT_FLAG, "readLine" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_90 = {8, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_89};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_91 = {8, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_89};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_92 = { 2 | NIM_STRLIT_FLAG, "\015\012" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_93 = {2, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_92};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_94 = {2, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_92};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_95 = { 4 | NIM_STRLIT_FLAG, "recv" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_96 = {4, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_95};
static const struct {
  NI cap; NIM_CHAR data[65+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_97 = { 65 | NIM_STRLIT_FLAG, "SSLv2 is no longer secure and has been deprecated, use protSSLv"
"23" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_98 = {65, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_97};
static const struct {
  NI cap; NIM_CHAR data[65+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_99 = { 65 | NIM_STRLIT_FLAG, "SSLv3 is no longer secure and has been deprecated, use protSSLv"
"23" };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_100 = {65, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_99};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_101 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_102 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_103 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_104 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const struct {
  NI cap; NIM_CHAR data[37+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_105 = { 37 | NIM_STRLIT_FLAG, "Certificate file could not be found: " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_106 = {37, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_105};
static const struct {
  NI cap; NIM_CHAR data[29+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_107 = { 29 | NIM_STRLIT_FLAG, "Key file could not be found: " };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_108 = {29, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_107};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_109 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_110 = {0, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_4};
static const struct {
  NI cap; NIM_CHAR data[40+1];
} TM__XqsrSBxhOTPgLQ9cX4MmV4A_111 = { 40 | NIM_STRLIT_FLAG, "Verification of private key file failed." };
static const NimStringV2 TM__XqsrSBxhOTPgLQ9cX4MmV4A_112 = {40, (NimStrPayload*)&TM__XqsrSBxhOTPgLQ9cX4MmV4A_111};
N_LIB_PRIVATE TNimTypeV2 NTIv2__22zILeNTc8ClX7DrPZ3XOQ_;

/* section: NIM_merge_VARS */
extern tyProc__ln4kdL5W9bbX4a1xl8nnVXQ Dl_16800614_;
extern NIM_BOOL nimInErrorMode__759bT87luu8XGcbkw13FUjA;
extern tyProc__ln4kdL5W9bbX4a1xl8nnVXQ Dl_16845666_;
extern tyProc__Vff1ipOwDPDGknaRJAdXjA Dl_16800701_;
extern tyProc__kxUw9cdxJbPtv0iPyoSbDBQ Dl_16800724_;
extern tyProc__wCuLyuC5VitcgJKGCqJQRw Dl_16801026_;
extern tyProc__5zMKCPIiPHTYY9cjyzsHlmQ Dl_16801020_;
extern tyProc__e47RoMUolEGMiUlfiZt9abQ Dl_16800619_;
extern int osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w;
extern tyProc__Rqjya8uauy9aPcyfGamaSrg Dl_16800616_;
extern tyProc__kxUw9cdxJbPtv0iPyoSbDBQ Dl_16800697_;
extern Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;
extern Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;
extern Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;
extern tyProc__Vff1ipOwDPDGknaRJAdXjA Dl_16800711_;
extern tyProc__Vff1ipOwDPDGknaRJAdXjA Dl_16800728_;
extern tyProc__sG7rgqmtlgBaumPwwN3BfQ Dl_16800719_;
extern tyProc__Vff1ipOwDPDGknaRJAdXjA Dl_16800731_;
extern tyProc__09aW01hZ1tSPafLaWVpBcXA Dl_16800714_;
extern tyProc__Rqjya8uauy9aPcyfGamaSrg Dl_16800637_;
extern tyProc__HXibadfWHwHwyhCwpIRD2A Dl_16786248_;
extern tyProc__2PA7CxitARKs0jpUW1gQ0g Dl_16800660_;
extern tyProc__JfY9aCDiBh9bgOEieo8Vltxg Dl_16845459_;
extern tyProc__H5wL7jexPlRA7WCw9cqLm0A Dl_16800648_;
extern tyProc__tYatIIo0oRSB9bjHLep7yhQ Dl_16800669_;
extern tyProc__xjxKRHVZXDqdWXw9bunoZ3w Dl_16800673_;
extern tyProc__Vff1ipOwDPDGknaRJAdXjA Dl_16800678_;

/* section: NIM_merge_PROCS */
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__759bT87luu8XGcbkw13FUjA);
	return result;
}
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory(p, ((int) 0), size);
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ)(tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags, NI32 lastError) {
	NIM_BOOL result;
	NIM_BOOL T1_;
	NIM_BOOL T3_;
	NIM_BOOL T4_;
	result = (NIM_BOOL)0;
	T1_ = (NIM_BOOL)0;
	T1_ = ((flags &((NU8)1<<((NU)(((tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg) 1))&7U)))!=0);
	if (!(T1_)) goto LA2_;
	T3_ = (NIM_BOOL)0;
	T4_ = (NIM_BOOL)0;
	T4_ = (lastError == ((int) 104));
	if (T4_) goto LA5_;
	T4_ = (lastError == ((int) 32));
	LA5_: ;
	T3_ = T4_;
	if (T3_) goto LA6_;
	T3_ = (lastError == ((int) 102));
	LA6_: ;
	T1_ = T3_;
	LA2_: ;
	result = T1_;
	return result;
}
static N_INLINE(NI, minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system)(NI x, NI y) {
	NI result;
	result = (NI)0;
	result = ((NI) ((NU)((NU64)(((NU) (x))) - (NU64)(((NU) (y))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	{
		tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A* cell;
		NI T5_;
		if (!!((p == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system(((NI) (ptrdiff_t) (p)), ((NI) 8));
		cell = ((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T5_));
		{
			if (!((NI)((*cell).rc & ((NI) -8)) == ((NI) 0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
		LA8_: ;
		{
			(*cell).rc -= ((NI) 8);
		}
		LA6_: ;
	}
	LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___Ae2FSx40er6tM5hCtHQNSg)(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).Sup.Sup.parent);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).Sup.Sup.parent);
	}
	LA4_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).Sup.Sup.message));
	eqdestroy___4fQQqvAqifkWGVa4g39cI5A((&(*dest).Sup.Sup.trace));
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).Sup.Sup.up);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest).Sup.Sup.up);
	}
	LA9_: ;
}
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
}
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size) {
	nimCopyMem(dest, source, size);
}
static N_INLINE(void, appendString)(NimStringV2* dest, NimStringV2 src) {
	{
		void* T5_;
		void* T6_;
		if (!(((NI) 0) < src.len)) goto LA3_;
		T5_ = (void*)0;
		T5_ = ((void*) ((&(*(*dest).p).data[(*dest).len])));
		T6_ = (void*)0;
		T6_ = ((void*) ((&(*src.p).data[((NI) 0)])));
		copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(T5_, T6_, ((NI) ((NI)(src.len + ((NI) 1)))));
		(*dest).len += src.len;
	}
	LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g)(NimStringV2 s) {
	NimStringV2 errStr;
	unsigned long err;
	NCSTRING T12_;
	tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA* T16_;
	NimStringV2 blitTmp_2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	errStr.len = 0; errStr.p = NIM_NIL;
	{
		tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA* T6_;
		NimStringV2 blitTmp;
		if (!!((s.len == 0))) goto LA4_;
		T6_ = (tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA*)0;
		T6_ = (tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA*) nimNewObj(sizeof(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA), NIM_ALIGNOF(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA));
		(*T6_).Sup.Sup.Sup.m_type = (&NTIv2__GtD0IEVE1EOWxaU5x9amdzA_);
		(*T6_).Sup.Sup.name = "SslError";
		blitTmp = s;
		s.len = 0; s.p = NIM_NIL;
		(*T6_).Sup.Sup.message = blitTmp;
		(*T6_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T6_, "SslError", "raiseSSLError", "net.nim", 495);
		goto LA1_;
	}
	LA4_: ;
	err = Dl_16801026_();
	{
		tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA* T11_;
		if (!(err == ((NU) 0))) goto LA9_;
		T11_ = (tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA*)0;
		T11_ = (tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA*) nimNewObj(sizeof(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA), NIM_ALIGNOF(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA));
		(*T11_).Sup.Sup.Sup.m_type = (&NTIv2__GtD0IEVE1EOWxaU5x9amdzA_);
		(*T11_).Sup.Sup.name = "SslError";
		(*T11_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_14;
		(*T11_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T11_, "SslError", "raiseSSLError", "net.nim", 498);
		goto LA1_;
	}
	LA9_: ;
	T12_ = (NCSTRING)0;
	T12_ = Dl_16801020_(err, ((NCSTRING) NIM_NIL));
	errStr = cstrToNimstr(T12_);
	switch (err) {
	case ((NI) 336032814):
	case ((NI) 336032784):
	{
		NimStringV2 T14_;
		T14_.len = 0; T14_.p = NIM_NIL;
		T14_ = rawNewString(errStr.len + 100);
appendString((&T14_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_16);
appendString((&T14_), errStr);
		eqsink___aBBXmHFBEivKqERloP6zmA((&errStr), T14_);
	}
	break;
	default:
	{
	}
	break;
	}
	T16_ = (tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA*)0;
	T16_ = (tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA*) nimNewObj(sizeof(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA), NIM_ALIGNOF(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA));
	(*T16_).Sup.Sup.Sup.m_type = (&NTIv2__GtD0IEVE1EOWxaU5x9amdzA_);
	(*T16_).Sup.Sup.name = "SslError";
	blitTmp_2 = errStr;
	errStr.len = 0; errStr.p = NIM_NIL;
	(*T16_).Sup.Sup.message = blitTmp_2;
	(*T16_).Sup.Sup.parent = ((Exception*) NIM_NIL);
	raiseExceptionEx((Exception*)T16_, "SslError", "raiseSSLError", "net.nim", 506);
	goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&s));
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&errStr));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI32, getSocketError__YATB019buW9cFOjCCZLlKipQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket) {
	NI32 result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI32)0;
	result = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
	{
		if (!(result == ((NI32) 0))) goto LA3_;
		result = (*socket).lastError;
	}
	LA3_: ;
	{
		if (!(result == ((NI32) 0))) goto LA7_;
		raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(result, TM__XqsrSBxhOTPgLQ9cX4MmV4A_36);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA7_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI err, NIM_BOOL async, NI32 lastError, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		if (!(*socket).isSsl) goto LA3_;
		{
			int ret;
			if (!(err <= ((NI) 0))) goto LA7_;
			ret = Dl_16800724_((*socket).sslHandle, ((int) (err)));
			switch (ret) {
			case ((NI) 6):
			{
				raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_18);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			case ((NI) 7):
			case ((NI) 8):
			{
				{
					if (!async) goto LA13_;
					goto BeforeRet_;
				}
				goto LA11_;
				LA13_: ;
				{
					raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_20);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA11_: ;
			}
			break;
			case ((NI) 3):
			case ((NI) 2):
			{
				{
					if (!async) goto LA19_;
					goto BeforeRet_;
				}
				goto LA17_;
				LA19_: ;
				{
					raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_21);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA17_: ;
			}
			break;
			case ((NI) 4):
			{
				raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_23);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			case ((NI) 5):
			{
				NI32 osErr;
				(*socket).sslNoShutdown = NIM_TRUE;
				osErr = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				{
					NIM_BOOL T26_;
					NimStringV2 errStr;
					unsigned long sslErr;
					T26_ = (NIM_BOOL)0;
					T26_ = isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ(flags, osErr);
					if (!!(T26_)) goto LA27_;
					errStr.len = 0; errStr.p = NIM_NIL;
					errStr = TM__XqsrSBxhOTPgLQ9cX4MmV4A_25;
					sslErr = Dl_16801026_();
					{
						NIM_BOOL T32_;
						T32_ = (NIM_BOOL)0;
						T32_ = (sslErr == ((NU) 0));
						if (!(T32_)) goto LA33_;
						T32_ = (err == ((NI) 0));
						LA33_: ;
						if (!T32_) goto LA34_;
						prepareAdd((&errStr), 54);
appendString((&errStr), TM__XqsrSBxhOTPgLQ9cX4MmV4A_27);
					}
					goto LA30_;
					LA34_: ;
					{
						NIM_BOOL T37_;
						T37_ = (NIM_BOOL)0;
						T37_ = (sslErr == ((NU) 0));
						if (!(T37_)) goto LA38_;
						T37_ = (err == ((NI) -1));
						LA38_: ;
						if (!T37_) goto LA39_;
						prepareAdd((&errStr), 16);
appendString((&errStr), TM__XqsrSBxhOTPgLQ9cX4MmV4A_29);
					}
					goto LA30_;
					LA39_: ;
					{
						NimStringV2 errStr_2;
						NCSTRING T43_;
						NimStringV2 T44_;
						errStr_2.len = 0; errStr_2.p = NIM_NIL;
						T43_ = (NCSTRING)0;
						T43_ = Dl_16801020_(sslErr, ((NCSTRING) NIM_NIL));
						errStr_2 = cstrToNimstr(T43_);
						T44_.len = 0; T44_.p = NIM_NIL;
						T44_ = rawNewString(errStr_2.len + errStr_2.len + 2);
appendString((&T44_), errStr_2);
appendString((&T44_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_31);
appendString((&T44_), errStr_2);
						raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(T44_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA42_;
						{
							LA42_:;
						}
						{
							eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&errStr_2));
						}
						if (NIM_UNLIKELY(*nimErr_)) goto LA29_;
					}
					LA30_: ;
					raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(osErr, errStr);
					if (NIM_UNLIKELY(*nimErr_)) goto LA29_;
					{
						LA29_:;
					}
					{
						eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&errStr));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA27_: ;
			}
			break;
			case ((NI) 1):
			{
				(*socket).sslNoShutdown = NIM_TRUE;
				raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_32);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			default:
			{
				raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_34);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			break;
			}
		}
		LA7_: ;
	}
	LA3_: ;
	{
		NIM_BOOL T53_;
		NI32 colontmpD_;
		NI32 colontmpD__2;
		NI32 lastE;
		T53_ = (NIM_BOOL)0;
		T53_ = (err == ((NI) -1));
		if (!(T53_)) goto LA54_;
		T53_ = !((*socket).isSsl);
		LA54_: ;
		if (!T53_) goto LA55_;
		colontmpD_ = (NI32)0;
		colontmpD__2 = (NI32)0;
		{
			if (!(((NI) (lastError)) == ((NI) -1))) goto LA59_;
			colontmpD_ = getSocketError__YATB019buW9cFOjCCZLlKipQ(socket);
			if (NIM_UNLIKELY(*nimErr_)) goto LA61_;
			lastE = colontmpD_;
			{
				LA61_:;
			}
			{
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		goto LA57_;
		LA59_: ;
		{
			colontmpD__2 = lastError;
			lastE = colontmpD__2;
		}
		LA57_: ;
		{
			NIM_BOOL T67_;
			T67_ = (NIM_BOOL)0;
			T67_ = isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ(flags, lastE);
			if (!!(T67_)) goto LA68_;
			{
				if (!async) goto LA72_;
				{
					NIM_BOOL T76_;
					T76_ = (NIM_BOOL)0;
					T76_ = (lastE == ((int) 11));
					if (T76_) goto LA77_;
					T76_ = (lastE == ((int) 11));
					LA77_: ;
					if (!T76_) goto LA78_;
					goto BeforeRet_;
				}
				goto LA74_;
				LA78_: ;
				{
					raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(lastE, TM__XqsrSBxhOTPgLQ9cX4MmV4A_37);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA74_: ;
			}
			goto LA70_;
			LA72_: ;
			{
				raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(lastE, TM__XqsrSBxhOTPgLQ9cX4MmV4A_38);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA70_: ;
		}
		LA68_: ;
	}
	LA55_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, close__dPXIsN1nx9bPvap47WTEMow)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags) {
NIM_BOOL oldNimErrFin40_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T4_;
		T4_ = (NIM_BOOL)0;
		T4_ = (*socket).isSsl;
		if (!(T4_)) goto LA5_;
		T4_ = !(((*socket).sslHandle == ((tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*) NIM_NIL)));
		LA5_: ;
		if (!T4_) goto LA6_;
		{
			NIM_BOOL T10_;
			int T12_;
			sigset_t oldSetX60gensym102_;
			sigset_t watchSetX60gensym102_;
			NIM_BOOL alreadyBlockedX60gensym102_;
			int T39_;
			int res;
			T10_ = (NIM_BOOL)0;
			T10_ = !((*socket).sslNoShutdown);
			if (!(T10_)) goto LA11_;
			T12_ = (int)0;
			T12_ = SSL_in_init__loUCLHAKQg9cZwis5tAb2ig((*socket).sslHandle);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			T10_ = (T12_ == ((NI32) 0));
			LA11_: ;
			if (!T10_) goto LA13_;
			nimZeroMem((void*)(&oldSetX60gensym102_), sizeof(sigset_t));
			nimZeroMem((void*)(&watchSetX60gensym102_), sizeof(sigset_t));
			{
				int T17_;
				NI32 T20_;
				T17_ = (int)0;
				T17_ = sigemptyset((&oldSetX60gensym102_));
				if (!(T17_ == ((NI32) -1))) goto LA18_;
				T20_ = (NI32)0;
				T20_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T20_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_5);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
			LA18_: ;
			{
				int T23_;
				NI32 T26_;
				T23_ = (int)0;
				T23_ = sigemptyset((&watchSetX60gensym102_));
				if (!(T23_ == ((NI32) -1))) goto LA24_;
				T26_ = (NI32)0;
				T26_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T26_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_6);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
			LA24_: ;
			{
				int T29_;
				NI32 T32_;
				T29_ = (int)0;
				T29_ = sigaddset((&watchSetX60gensym102_), ((int) 13));
				if (!(T29_ == ((NI32) -1))) goto LA30_;
				T32_ = (NI32)0;
				T32_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T32_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_8);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
			LA30_: ;
			{
				int T35_;
				NI32 T38_;
				T35_ = (int)0;
				T35_ = sigprocmask(((int) 0), (&watchSetX60gensym102_), (&oldSetX60gensym102_));
				if (!(T35_ == ((NI32) -1))) goto LA36_;
				T38_ = (NI32)0;
				T38_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T38_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_10);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
			LA36_: ;
			T39_ = (int)0;
			T39_ = sigismember((&oldSetX60gensym102_), ((int) 13));
			alreadyBlockedX60gensym102_ = (T39_ == ((NI32) 1));
			Dl_16845666_();
			res = Dl_16800701_((*socket).sslHandle);
			{
				if (!(res == ((NI32) 0))) goto LA43_;
			}
			goto LA41_;
			LA43_: ;
			{
				NI32 err;
				int sslError;
				if (!!((res == ((NI32) 1)))) goto LA46_;
				err = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				sslError = Dl_16800724_((*socket).sslHandle, res);
				{
					NIM_BOOL T50_;
					T50_ = (NIM_BOOL)0;
					T50_ = (sslError == ((NI32) 6));
					if (T50_) goto LA51_;
					T50_ = (sslError == ((NI32) 5));
					LA51_: ;
					if (!T50_) goto LA52_;
					{
						if (!(err == ((NI32) 32))) goto LA56_;
						{
							int signalX60gensym102X60gensym105_;
							int errX60gensym102X60gensym105_;
							if (!!(alreadyBlockedX60gensym102_)) goto LA60_;
							signalX60gensym102X60gensym105_ = (int)0;
							errX60gensym102X60gensym105_ = sigwait((&watchSetX60gensym102_), (&signalX60gensym102X60gensym105_));
							{
								if (!!((errX60gensym102X60gensym105_ == ((NI32) 0)))) goto LA64_;
								raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(errX60gensym102X60gensym105_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_12);
								if (NIM_UNLIKELY(*nimErr_)) goto LA40_;
							}
							LA64_: ;
						}
						LA60_: ;
					}
					LA56_: ;
					{
						NIM_BOOL T68_;
						T68_ = (NIM_BOOL)0;
						T68_ = isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ(flags, err);
						if (!!(T68_)) goto LA69_;
						socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, ((NI) (res)), NIM_FALSE, err, flags);
						if (NIM_UNLIKELY(*nimErr_)) goto LA40_;
					}
					LA69_: ;
				}
				goto LA48_;
				LA52_: ;
				{
					socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, ((NI) (res)), NIM_FALSE, err, flags);
					if (NIM_UNLIKELY(*nimErr_)) goto LA40_;
				}
				LA48_: ;
			}
			goto LA41_;
			LA46_: ;
			LA41_: ;
			{
				LA40_:;
			}
			{
				oldNimErrFin40_ = *nimErr_; *nimErr_ = NIM_FALSE;
				{
					if (!!(alreadyBlockedX60gensym102_)) goto LA76_;
					{
						int T80_;
						NI32 T83_;
						T80_ = (int)0;
						T80_ = sigprocmask(((int) 1), (&watchSetX60gensym102_), (&oldSetX60gensym102_));
						if (!(T80_ == ((NI32) -1))) goto LA81_;
						T83_ = (NI32)0;
						T83_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
						raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T83_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_40);
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					}
					LA81_: ;
				}
				LA76_: ;
				*nimErr_ = oldNimErrFin40_;
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		}
		LA13_: ;
	}
	LA6_: ;
	{
		LA1_:;
	}
	{
		{
			NIM_BOOL T88_;
			T88_ = (NIM_BOOL)0;
			T88_ = (*socket).isSsl;
			if (!(T88_)) goto LA89_;
			T88_ = !(((*socket).sslHandle == ((tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*) NIM_NIL)));
			LA89_: ;
			if (!T88_) goto LA90_;
			Dl_16800619_((*socket).sslHandle);
			(*socket).sslHandle = ((tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*) NIM_NIL);
		}
		LA90_: ;
		close__8c1w8B7fpSuB4Dgr5LHVJA((*socket).fd);
		(*socket).fd = osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* dest) {
	eqdestroy___WpGOXMMV39bro5UuSUSaR9ag((&(*dest).referencedData.data));
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).extraInternal);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).extraInternal);
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___1TCKL9aWTg3J2fdjyrLXdQw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).sslContext);
		if (!T3_) goto LA4_;
		eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg((*dest).sslContext);
		nimRawDispose((*dest).sslContext, ((NI) 8));
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___uz5bm6GTj6lhUqoWSCWdvg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ** dest, tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* src) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___1TCKL9aWTg3J2fdjyrLXdQw((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
	(*dest) = src;
}
static N_INLINE(NIM_BOOL, isNone__H87Mp4Y2b9aVoDHbyPXjVtAoptions)(tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ self) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	result = !(self.has);
	return result;
}
static N_INLINE(tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg*, unsafeGet__CX9cpSVl0CsECjiCYrAMm9bAoptions)(tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ* self) {
	tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg* result;
	result = (tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg*)0;
	result = (&(*self).val);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*, newSocket__9b5QTa9b4dQ3h5Ri1wnR4ujw)(int fd, tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg domain, tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw sockType, tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol, NIM_BOOL buffered) {
	tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* result;
	int colontmpD_;
	NIM_BOOL colontmpD__2;
	tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg colontmpD__3;
	tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw colontmpD__4;
	tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg colontmpD__5;
	tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* T1_;
	result = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*)0;
	colontmpD_ = (int)0;
	colontmpD__2 = (NIM_BOOL)0;
	colontmpD__3 = (tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg)0;
	colontmpD__4 = (tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw)0;
	colontmpD__5 = (tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg)0;
	T1_ = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*)0;
	T1_ = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*) nimNewObj(sizeof(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ), NIM_ALIGNOF(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ));
	colontmpD_ = fd;
	(*T1_).fd = colontmpD_;
	colontmpD__2 = buffered;
	(*T1_).isBuffered = colontmpD__2;
	colontmpD__3 = domain;
	(*T1_).domain = colontmpD__3;
	colontmpD__4 = sockType;
	(*T1_).sockType = colontmpD__4;
	colontmpD__5 = protocol;
	(*T1_).protocol = colontmpD__5;
	result = T1_;
	{
		if (!buffered) goto LA4_;
		(*result).currPos = ((NI) 0);
	}
	LA4_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*, dial__oD5cdlP49a1aM6tVxzT4h1Q)(NimStringV2 address, NU16 port, tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol, NIM_BOOL buffered) {
	tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* result;
	tyEnum_SockType__NQT1bItGG2X9byGdrWX7ujw sockType;
	struct addrinfo* aiList;
	tyArray__JC6Xlef5rNPKoqzdesSPoQ fdPerDomain;
	NIM_BOOL success;
	NI32 lastError;
	struct addrinfo* it;
	tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg domain;
	int lastFd;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*)0;
	sockType = toSockType__6alUTTXG6jHTyH82e9a1JDw(protocol);
	aiList = getAddrInfo__ANf7QnbfE8nyIlFuWroDcQ(address, port, ((tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg) 0), sockType, protocol);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)fdPerDomain, sizeof(tyArray__JC6Xlef5rNPKoqzdesSPoQ));
	{
		NI i;
		NI res;
		i = (NI)0;
		res = ((NI) 0);
		{
			while (1) {
				if (!(res <= ((NI) 23))) goto LA3;
				i = ((NI) (res));
				fdPerDomain[(i)- 0] = osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w;
				res += ((NI) 1);
			} LA3: ;
		}
	}
	success = NIM_FALSE;
	lastError = (NI32)0;
	it = aiList;
	domain = (tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg)0;
	lastFd = (int)0;
	{
		while (1) {
			if (!!((it == ((struct addrinfo*) NIM_NIL)))) goto LA5;
			{
				tyObject_Option__FqSKP9b8yM9aV7mJ0VU4DFWQ domainOpt;
				tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg* T12_;
				domainOpt = toKnownDomain__RQ9bFvLg4dpjf7aRPA8ID9bg((*it).ai_family);
				{
					NIM_BOOL T9_;
					T9_ = (NIM_BOOL)0;
					T9_ = isNone__H87Mp4Y2b9aVoDHbyPXjVtAoptions(domainOpt);
					if (!T9_) goto LA10_;
					it = (*it).ai_next;
					goto LA6;
				}
				LA10_: ;
				T12_ = (tyEnum_Domain__Q79bEtFARvq0ekDNtvj3Vqg*)0;
				T12_ = unsafeGet__CX9cpSVl0CsECjiCYrAMm9bAoptions((&domainOpt));
				domain = (*T12_);
				lastFd = fdPerDomain[(domain)- 0];
				{
					if (!(lastFd == osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w)) goto LA15_;
					lastFd = createNativeSocket__F1LPwUDx07eMGH1vFNDzcw(domain, sockType, protocol, NIM_FALSE);
					{
						NI32 err;
						if (!(lastFd == osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w)) goto LA19_;
						err = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
						freeaddrinfo(aiList);
						{
							NI i_2;
							int fd;
							NI i_3;
							i_2 = (NI)0;
							fd = (int)0;
							i_3 = ((NI) 0);
							{
								if (!(((NI) (i_3)) <= ((NI) 23))) goto LA24_;
								{
									while (1) {
										i_2 = i_3;
										fd = fdPerDomain[(i_3)- 0];
										{
											NIM_BOOL T30_;
											T30_ = (NIM_BOOL)0;
											T30_ = !((fd == osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w));
											if (!(T30_)) goto LA31_;
											T30_ = !((((NI) (i_2)) == ((NI) -1)));
											LA31_: ;
											if (!T30_) goto LA32_;
											close__8c1w8B7fpSuB4Dgr5LHVJA(fd);
										}
										LA32_: ;
										{
											if (!(((NI) 23) <= ((NI) (i_3)))) goto LA36_;
											goto LA26;
										}
										LA36_: ;
										i_3 += ((NI) 1);
									}
								} LA26: ;
							}
							LA24_: ;
						}
						raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(err, TM__XqsrSBxhOTPgLQ9cX4MmV4A_41);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
					LA19_: ;
					fdPerDomain[(domain)- 0] = lastFd;
				}
				LA15_: ;
				{
					int T40_;
					T40_ = (int)0;
					T40_ = connect(lastFd, (*it).ai_addr, (*it).ai_addrlen);
					if (!(T40_ == ((NI32) 0))) goto LA41_;
					success = NIM_TRUE;
					goto LA4;
				}
				LA41_: ;
				lastError = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				it = (*it).ai_next;
			} LA6: ;
		} LA5: ;
	} LA4: ;
	freeaddrinfo(aiList);
	{
		NI i_4;
		int fd_2;
		NI i_5;
		i_4 = (NI)0;
		fd_2 = (int)0;
		i_5 = ((NI) 0);
		{
			if (!(((NI) (i_5)) <= ((NI) 23))) goto LA46_;
			{
				while (1) {
					i_4 = i_5;
					fd_2 = fdPerDomain[(i_5)- 0];
					{
						NIM_BOOL T52_;
						T52_ = (NIM_BOOL)0;
						T52_ = !((fd_2 == osInvalidSocket__voz9aUXu8jtRbvGZZJHNE8w));
						if (!(T52_)) goto LA53_;
						T52_ = !((((NI) (i_4)) == domain));
						LA53_: ;
						if (!T52_) goto LA54_;
						close__8c1w8B7fpSuB4Dgr5LHVJA(fd_2);
					}
					LA54_: ;
					{
						if (!(((NI) 23) <= ((NI) (i_5)))) goto LA58_;
						goto LA48;
					}
					LA58_: ;
					i_5 += ((NI) 1);
				}
			} LA48: ;
		}
		LA46_: ;
	}
	{
		if (!success) goto LA62_;
		result = newSocket__9b5QTa9b4dQ3h5Ri1wnR4ujw(lastFd, domain, sockType, protocol, NIM_TRUE);
	}
	goto LA60_;
	LA62_: ;
	{
		if (!!((lastError == ((NI32) 0)))) goto LA65_;
		raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(lastError, TM__XqsrSBxhOTPgLQ9cX4MmV4A_42);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA60_;
	LA65_: ;
	{
		tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw* T68_;
		NimStringV2 T69_;
		T68_ = (tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw*)0;
		T68_ = (tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw*) nimNewObj(sizeof(tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw), NIM_ALIGNOF(tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw));
		(*T68_).Sup.Sup.Sup.m_type = (&NTIv2__iLZrPn9anoh9ad1MmO0RczFw_);
		(*T68_).Sup.Sup.name = "IOError";
		T69_.len = 0; T69_.p = NIM_NIL;
		T69_ = rawNewString(address.len + 26);
appendString((&T69_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_44);
appendString((&T69_), address);
		(*T68_).Sup.Sup.message = T69_;
		(*T68_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T68_, "IOError", "dial", "net.nim", 1892);
		goto BeforeRet_;
	}
	LA60_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___Maxw2KUIYGcdUEJ9aO5a9bpw)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest, tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* src) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
	(*dest) = src;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___VAv9c7AH4o2TPeFuJ74VN7A)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, wrapSocket__nSrKttw9bOstnCyvh66mpmQ)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* ctx, tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	(*socket).isSsl = NIM_TRUE;
	eqsink___Maxw2KUIYGcdUEJ9aO5a9bpw(&(*socket).sslContext, ctx);
	ctx = 0;
	(*socket).sslHandle = Dl_16800616_((*(*socket).sslContext).context);
	(*socket).sslNoHandshake = NIM_FALSE;
	(*socket).sslHasPeekChar = NIM_FALSE;
	(*socket).sslNoShutdown = NIM_FALSE;
	{
		if (!((*socket).sslHandle == ((tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*) NIM_NIL))) goto LA4_;
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_45);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA4_: ;
	{
		int T8_;
		T8_ = (int)0;
		T8_ = Dl_16800697_((*socket).sslHandle, (*socket).fd);
		if (!!((T8_ == ((NI32) 1)))) goto LA9_;
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_46);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA9_: ;
	{
		LA1_:;
	}
	{
		eqdestroy___VAv9c7AH4o2TPeFuJ74VN7A(&ctx);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NI, find__31wM5Ui9c8jnrQ5QD4oPxOQsystem)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item) {
	NI result;
{	result = (NI)0;
	result = ((NI) 0);
	{
		NIM_CHAR i;
		NI i_2;
		i = (NIM_CHAR)0;
		i_2 = ((NI) 0);
		{
			while (1) {
				if (!(i_2 < aLen_0)) goto LA3;
				i = a[i_2];
				{
					if (!((NU8)(i) == (NU8)(item))) goto LA6_;
					goto BeforeRet_;
				}
				LA6_: ;
				result += ((NI) 1);
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	result = ((NI) -1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL, contains__Pa9a8m0kZYH6LC8N1EcZJdQsystem)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item) {
	NIM_BOOL result;
	NI T1_;
{	result = (NIM_BOOL)0;
	T1_ = (NI)0;
	T1_ = find__31wM5Ui9c8jnrQ5QD4oPxOQsystem(a, aLen_0, item);
	result = (((NI) 0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*s).p == ((NimStrPayload*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = ((NI)((*(*s).p).cap & ((NI) IL64(4611686018427387904))) == ((NI) IL64(4611686018427387904)));
		LA4_: ;
		if (!T3_) goto LA5_;
		nimPrepareStrMutationImpl__C0YoABEefTaYbWLv9aVOzZA(s);
	}
	LA5_: ;
}
static N_INLINE(NimStringV2, X5BX5D___FPvLvuwqfYMFkcbGfPM8QQsystem)(NimStringV2 s, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA x) {
	NimStringV2 result;
	NI a;
	NI L;
	result.len = 0; result.p = NIM_NIL;
	a = x.a;
	L = (NI)((NI)(x.b - a) + ((NI) 1));
	result = mnewString(((NI) (L)));
	{
		NI i;
		NI i_2;
		i = (NI)0;
		i_2 = ((NI) 0);
		{
			while (1) {
				if (!(i_2 < L)) goto LA3;
				i = i_2;
				nimPrepareStrMutationV2((&result));
				result.p->data[i] = s.p->data[(NI)(i + a)];
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	return result;
}
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___BokNSDrKN1xmV1nA01G9brAsystem)(NI a, NI b) {
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	result.a = a;
	result.b = b;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA, parseIPv6Address__1ivqWNphfe1wCfgNmXXOCA_2)(NimStringV2 addressStr) {
	tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA result;
	NI groupCount;
	NI currentGroupStart;
	NU32 currentShort;
	NIM_BOOL separatorValid;
	NI dualColonGroup;
	NIM_BOOL lastWasColon;
	NI v4StartPos;
	NI byteCount;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA));
	nimZeroMem((void*)(&result), sizeof(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA));
	result.family = ((tyEnum_IpAddressFamily__iqqacz9cr9bcNjYY74E10wPA) 0);
	{
		tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T5_;
		if (!(addressStr.len < ((NI) 2))) goto LA3_;
		T5_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
		T5_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
		(*T5_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
		(*T5_).Sup.Sup.name = "ValueError";
		(*T5_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_50;
		(*T5_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T5_, "ValueError", "parseIPv6Address", "net.nim", 306);
		goto BeforeRet_;
	}
	LA3_: ;
	groupCount = ((NI) 0);
	currentGroupStart = ((NI) 0);
	currentShort = ((NU32) 0);
	separatorValid = NIM_TRUE;
	dualColonGroup = ((NI) -1);
	lastWasColon = NIM_FALSE;
	v4StartPos = ((NI) -1);
	byteCount = ((NI) 0);
	{
		NI i;
		NIM_CHAR c;
		NI i_2;
		NI L;
		i = (NI)0;
		c = (NIM_CHAR)0;
		i_2 = ((NI) 0);
		L = addressStr.len;
		{
			while (1) {
				if (!(i_2 < L)) goto LA8;
				i = i_2;
				c = addressStr.p->data[i_2];
				{
					if (!((NU8)(c) == (NU8)(58))) goto LA11_;
					{
						tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T17_;
						if (!!(separatorValid)) goto LA15_;
						T17_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
						T17_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
						(*T17_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
						(*T17_).Sup.Sup.name = "ValueError";
						(*T17_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_52;
						(*T17_).Sup.Sup.parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T17_, "ValueError", "parseIPv6Address", "net.nim", 321);
						goto BeforeRet_;
					}
					LA15_: ;
					{
						if (!lastWasColon) goto LA20_;
						{
							tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T26_;
							if (!!((dualColonGroup == ((NI) -1)))) goto LA24_;
							T26_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
							T26_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
							(*T26_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
							(*T26_).Sup.Sup.name = "ValueError";
							(*T26_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_54;
							(*T26_).Sup.Sup.parent = ((Exception*) NIM_NIL);
							raiseExceptionEx((Exception*)T26_, "ValueError", "parseIPv6Address", "net.nim", 325);
							goto BeforeRet_;
						}
						LA24_: ;
						dualColonGroup = groupCount;
						separatorValid = NIM_FALSE;
					}
					goto LA18_;
					LA20_: ;
					{
						NIM_BOOL T28_;
						T28_ = (NIM_BOOL)0;
						T28_ = !((i == ((NI) 0)));
						if (!(T28_)) goto LA29_;
						T28_ = !((i == (addressStr.len-1)));
						LA29_: ;
						if (!T28_) goto LA30_;
						{
							tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T36_;
							if (!(((NI) 8) <= groupCount)) goto LA34_;
							T36_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
							T36_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
							(*T36_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
							(*T36_).Sup.Sup.name = "ValueError";
							(*T36_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_56;
							(*T36_).Sup.Sup.parent = ((Exception*) NIM_NIL);
							raiseExceptionEx((Exception*)T36_, "ValueError", "parseIPv6Address", "net.nim", 331);
							goto BeforeRet_;
						}
						LA34_: ;
						result._family_1.address_v6[((NI)(groupCount * ((NI) 2)))- 0] = ((NU8) ((NU32)((NU32)(currentShort) >> (NU64)(((NI) 8)))));
						result._family_1.address_v6[((NI)((NI)(groupCount * ((NI) 2)) + ((NI) 1)))- 0] = ((NU8) ((NU32)(currentShort & ((NU32) 255))));
						currentShort = ((NU32) 0);
						groupCount += ((NI) 1);
						{
							if (!!((dualColonGroup == ((NI) -1)))) goto LA39_;
							separatorValid = NIM_FALSE;
						}
						LA39_: ;
					}
					goto LA18_;
					LA30_: ;
					{
						if (!(i == ((NI) 0))) goto LA42_;
						{
							tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T48_;
							if (!!(((NU8)(addressStr.p->data[((NI) 1)]) == (NU8)(58)))) goto LA46_;
							T48_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
							T48_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
							(*T48_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
							(*T48_).Sup.Sup.name = "ValueError";
							(*T48_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_58;
							(*T48_).Sup.Sup.parent = ((Exception*) NIM_NIL);
							raiseExceptionEx((Exception*)T48_, "ValueError", "parseIPv6Address", "net.nim", 340);
							goto BeforeRet_;
						}
						LA46_: ;
					}
					goto LA18_;
					LA42_: ;
					{
						{
							tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T54_;
							if (!!(((NU8)(addressStr.p->data[(NI)((addressStr.len-1) - ((NI) 1))]) == (NU8)(58)))) goto LA52_;
							T54_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
							T54_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
							(*T54_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
							(*T54_).Sup.Sup.name = "ValueError";
							(*T54_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_60;
							(*T54_).Sup.Sup.parent = ((Exception*) NIM_NIL);
							raiseExceptionEx((Exception*)T54_, "ValueError", "parseIPv6Address", "net.nim", 344);
							goto BeforeRet_;
						}
						LA52_: ;
					}
					LA18_: ;
					lastWasColon = NIM_TRUE;
					currentGroupStart = (NI)(i + ((NI) 1));
				}
				goto LA9_;
				LA11_: ;
				{
					if (!((NU8)(c) == (NU8)(46))) goto LA56_;
					{
						NIM_BOOL T60_;
						NIM_BOOL T61_;
						tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T66_;
						T60_ = (NIM_BOOL)0;
						T61_ = (NIM_BOOL)0;
						T61_ = (i < ((NI) 3));
						if (T61_) goto LA62_;
						T61_ = !(separatorValid);
						LA62_: ;
						T60_ = T61_;
						if (T60_) goto LA63_;
						T60_ = (((NI) 7) <= groupCount);
						LA63_: ;
						if (!T60_) goto LA64_;
						T66_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
						T66_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
						(*T66_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
						(*T66_).Sup.Sup.name = "ValueError";
						(*T66_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_61;
						(*T66_).Sup.Sup.parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T66_, "ValueError", "parseIPv6Address", "net.nim", 350);
						goto BeforeRet_;
					}
					LA64_: ;
					v4StartPos = currentGroupStart;
					currentShort = ((NU32) 0);
					separatorValid = NIM_FALSE;
					goto LA6;
				}
				goto LA9_;
				LA56_: ;
				{
					if (!(((NU8)(c)) >= ((NU8)(48)) && ((NU8)(c)) <= ((NU8)(57)) || ((NU8)(c)) >= ((NU8)(65)) && ((NU8)(c)) <= ((NU8)(70)) || ((NU8)(c)) >= ((NU8)(97)) && ((NU8)(c)) <= ((NU8)(102)))) goto LA68_;
					{
						if (!(((NU8)(c)) >= ((NU8)(48)) && ((NU8)(c)) <= ((NU8)(57)))) goto LA72_;
						currentShort = (NU32)((NU32)((NU32)((NU64)(currentShort) << (NU64)(((NI) 4)))) + (NU32)(((NU32) ((NI)(((NU8)(c)) - ((NI) 48))))));
					}
					goto LA70_;
					LA72_: ;
					{
						NIM_BOOL T75_;
						T75_ = (NIM_BOOL)0;
						T75_ = ((NU8)(97) <= (NU8)(c));
						if (!(T75_)) goto LA76_;
						T75_ = ((NU8)(c) <= (NU8)(102));
						LA76_: ;
						if (!T75_) goto LA77_;
						currentShort = (NU32)((NU32)((NU32)((NU32)((NU32)((NU64)(currentShort) << (NU64)(((NI) 4)))) + (NU32)(((NU32) ((NI)(((NU8)(c)) - ((NI) 97))))))) + (NU32)(((NU32) 10)));
					}
					goto LA70_;
					LA77_: ;
					{
						currentShort = (NU32)((NU32)((NU32)((NU32)((NU32)((NU64)(currentShort) << (NU64)(((NI) 4)))) + (NU32)(((NU32) ((NI)(((NU8)(c)) - ((NI) 65))))))) + (NU32)(((NU32) 10)));
					}
					LA70_: ;
					{
						tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T84_;
						if (!((NU32)(((NU32) 65535)) < (NU32)(currentShort))) goto LA82_;
						T84_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
						T84_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
						(*T84_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
						(*T84_).Sup.Sup.name = "ValueError";
						(*T84_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_63;
						(*T84_).Sup.Sup.parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T84_, "ValueError", "parseIPv6Address", "net.nim", 363);
						goto BeforeRet_;
					}
					LA82_: ;
					lastWasColon = NIM_FALSE;
					separatorValid = NIM_TRUE;
				}
				goto LA9_;
				LA68_: ;
				{
					tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T86_;
					T86_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
					T86_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
					(*T86_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
					(*T86_).Sup.Sup.name = "ValueError";
					(*T86_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_65;
					(*T86_).Sup.Sup.parent = ((Exception*) NIM_NIL);
					raiseExceptionEx((Exception*)T86_, "ValueError", "parseIPv6Address", "net.nim", 368);
					goto BeforeRet_;
				}
				LA9_: ;
				i_2 += ((NI) 1);
			} LA8: ;
		}
	} LA6: ;
	{
		if (!(v4StartPos == ((NI) -1))) goto LA89_;
		{
			if (!separatorValid) goto LA93_;
			{
				tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T99_;
				if (!(((NI) 8) <= groupCount)) goto LA97_;
				T99_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
				T99_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
				(*T99_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
				(*T99_).Sup.Sup.name = "ValueError";
				(*T99_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_66;
				(*T99_).Sup.Sup.parent = ((Exception*) NIM_NIL);
				raiseExceptionEx((Exception*)T99_, "ValueError", "parseIPv6Address", "net.nim", 375);
				goto BeforeRet_;
			}
			LA97_: ;
			result._family_1.address_v6[((NI)(groupCount * ((NI) 2)))- 0] = ((NU8) ((NU32)((NU32)(currentShort) >> (NU64)(((NI) 8)))));
			result._family_1.address_v6[((NI)((NI)(groupCount * ((NI) 2)) + ((NI) 1)))- 0] = ((NU8) ((NU32)(currentShort & ((NU32) 255))));
			groupCount += ((NI) 1);
		}
		LA93_: ;
	}
	goto LA87_;
	LA89_: ;
	{
		{
			NimStringV2 colontmp_;
			NI i_3;
			NIM_CHAR c_2;
			NimStringV2 T103_;
			tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T104_;
			NI i_4;
			NI L_2;
			colontmp_.len = 0; colontmp_.p = NIM_NIL;
			i_3 = (NI)0;
			c_2 = (NIM_CHAR)0;
			T103_.len = 0; T103_.p = NIM_NIL;
			T103_ = addressStr;
			T104_ = dotdot___BokNSDrKN1xmV1nA01G9brAsystem(v4StartPos, (addressStr.len-1));
			colontmp_ = X5BX5D___FPvLvuwqfYMFkcbGfPM8QQsystem(T103_, T104_);
			i_4 = ((NI) 0);
			L_2 = colontmp_.len;
			{
				while (1) {
					if (!(i_4 < L_2)) goto LA106;
					i_3 = i_4;
					c_2 = colontmp_.p->data[i_4];
					{
						if (!(((NU8)(c_2)) >= ((NU8)(48)) && ((NU8)(c_2)) <= ((NU8)(57)))) goto LA109_;
						currentShort = (NU32)((NU32)((NU32)((NU32)(currentShort) * (NU32)(((NU32) 10)))) + (NU32)(((NU32) ((NI)(((NU8)(c_2)) - ((NI) 48))))));
						{
							tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T115_;
							if (!((NU32)(((NU32) 255)) < (NU32)(currentShort))) goto LA113_;
							T115_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
							T115_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
							(*T115_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
							(*T115_).Sup.Sup.name = "ValueError";
							(*T115_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_67;
							(*T115_).Sup.Sup.parent = ((Exception*) NIM_NIL);
							raiseExceptionEx((Exception*)T115_, "ValueError", "parseIPv6Address", "net.nim", 385);
							goto LA102_;
						}
						LA113_: ;
						separatorValid = NIM_TRUE;
					}
					goto LA107_;
					LA109_: ;
					{
						if (!((NU8)(c_2) == (NU8)(46))) goto LA117_;
						{
							NIM_BOOL T121_;
							tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T125_;
							T121_ = (NIM_BOOL)0;
							T121_ = !(separatorValid);
							if (T121_) goto LA122_;
							T121_ = (((NI) 3) <= byteCount);
							LA122_: ;
							if (!T121_) goto LA123_;
							T125_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
							T125_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
							(*T125_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
							(*T125_).Sup.Sup.name = "ValueError";
							(*T125_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_68;
							(*T125_).Sup.Sup.parent = ((Exception*) NIM_NIL);
							raiseExceptionEx((Exception*)T125_, "ValueError", "parseIPv6Address", "net.nim", 390);
							goto LA102_;
						}
						LA123_: ;
						result._family_1.address_v6[((NI)((NI)(groupCount * ((NI) 2)) + byteCount))- 0] = ((NU8) (currentShort));
						currentShort = ((NU32) 0);
						byteCount += ((NI) 1);
						separatorValid = NIM_FALSE;
					}
					goto LA107_;
					LA117_: ;
					{
						tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T127_;
						T127_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
						T127_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
						(*T127_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
						(*T127_).Sup.Sup.name = "ValueError";
						(*T127_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_69;
						(*T127_).Sup.Sup.parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T127_, "ValueError", "parseIPv6Address", "net.nim", 396);
						goto LA102_;
					}
					LA107_: ;
					i_4 += ((NI) 1);
				} LA106: ;
			}
			{
				LA102_:;
			}
			{
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmp_));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		{
			NIM_BOOL T132_;
			tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T136_;
			T132_ = (NIM_BOOL)0;
			T132_ = !((byteCount == ((NI) 3)));
			if (T132_) goto LA133_;
			T132_ = !(separatorValid);
			LA133_: ;
			if (!T132_) goto LA134_;
			T136_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
			T136_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
			(*T136_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
			(*T136_).Sup.Sup.name = "ValueError";
			(*T136_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_70;
			(*T136_).Sup.Sup.parent = ((Exception*) NIM_NIL);
			raiseExceptionEx((Exception*)T136_, "ValueError", "parseIPv6Address", "net.nim", 400);
			goto BeforeRet_;
		}
		LA134_: ;
		result._family_1.address_v6[((NI)((NI)(groupCount * ((NI) 2)) + byteCount))- 0] = ((NU8) (currentShort));
		groupCount += ((NI) 2);
	}
	LA87_: ;
	{
		tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T141_;
		if (!(((NI) 8) < groupCount)) goto LA139_;
		T141_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
		T141_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
		(*T141_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
		(*T141_).Sup.Sup.name = "ValueError";
		(*T141_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_71;
		(*T141_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T141_, "ValueError", "parseIPv6Address", "net.nim", 406);
		goto BeforeRet_;
	}
	goto LA137_;
	LA139_: ;
	{
		NI toFill;
		NI toShift;
		if (!(groupCount < ((NI) 8))) goto LA143_;
		{
			tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T149_;
			if (!(dualColonGroup == ((NI) -1))) goto LA147_;
			T149_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
			T149_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
			(*T149_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
			(*T149_).Sup.Sup.name = "ValueError";
			(*T149_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_73;
			(*T149_).Sup.Sup.parent = ((Exception*) NIM_NIL);
			raiseExceptionEx((Exception*)T149_, "ValueError", "parseIPv6Address", "net.nim", 410);
			goto BeforeRet_;
		}
		LA147_: ;
		toFill = (NI)(((NI) 8) - groupCount);
		toShift = (NI)(groupCount - dualColonGroup);
		{
			NI i_5;
			NI colontmp__2;
			NI res;
			i_5 = (NI)0;
			colontmp__2 = (NI)0;
			colontmp__2 = (NI)((NI)(((NI) 2) * toShift) - ((NI) 1));
			res = ((NI) 0);
			{
				while (1) {
					if (!(res <= colontmp__2)) goto LA152;
					i_5 = res;
					result._family_1.address_v6[((NI)(((NI) 15) - i_5))- 0] = result._family_1.address_v6[((NI)((NI)((NI)(groupCount * ((NI) 2)) - i_5) - ((NI) 1)))- 0];
					res += ((NI) 1);
				} LA152: ;
			}
		}
		{
			NI i_6;
			NI colontmp__3;
			NI res_2;
			i_6 = (NI)0;
			colontmp__3 = (NI)0;
			colontmp__3 = (NI)((NI)(((NI) 2) * toFill) - ((NI) 1));
			res_2 = ((NI) 0);
			{
				while (1) {
					if (!(res_2 <= colontmp__3)) goto LA155;
					i_6 = res_2;
					result._family_1.address_v6[((NI)((NI)(dualColonGroup * ((NI) 2)) + i_6))- 0] = ((NU8) 0);
					res_2 += ((NI) 1);
				} LA155: ;
			}
		}
	}
	goto LA137_;
	LA143_: ;
	{
		tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T159_;
		if (!!((dualColonGroup == ((NI) -1)))) goto LA157_;
		T159_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
		T159_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
		(*T159_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
		(*T159_).Sup.Sup.name = "ValueError";
		(*T159_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_74;
		(*T159_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T159_, "ValueError", "parseIPv6Address", "net.nim", 419);
		goto BeforeRet_;
	}
	goto LA137_;
	LA157_: ;
	LA137_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA, parseIPv4Address__1ivqWNphfe1wCfgNmXXOCA_3)(NimStringV2 addressStr) {
	tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA result;
	NI byteCount;
	NU16 currentByte;
	NIM_BOOL separatorValid;
{	nimZeroMem((void*)(&result), sizeof(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA));
	byteCount = ((NI) 0);
	currentByte = ((NU16) 0);
	separatorValid = NIM_FALSE;
	nimZeroMem((void*)(&result), sizeof(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA));
	result.family = ((tyEnum_IpAddressFamily__iqqacz9cr9bcNjYY74E10wPA) 1);
	{
		NI i;
		NI colontmp_;
		NI res;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = (addressStr.len-1);
		res = ((NI) 0);
		{
			while (1) {
				if (!(res <= colontmp_)) goto LA3;
				i = res;
				{
					if (!(((NU8)(addressStr.p->data[i])) >= ((NU8)(48)) && ((NU8)(addressStr.p->data[i])) <= ((NU8)(57)))) goto LA6_;
					currentByte = (NU16)((NU16)((NU16)((NU16)(currentByte) * (NU16)(((NU16) 10)))) + (NU16)(((NU16) ((NI)(((NU8)(addressStr.p->data[i])) - ((NI) 48))))));
					{
						tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T12_;
						if (!((NU16)(((NU16) 255)) < (NU16)(currentByte))) goto LA10_;
						T12_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
						T12_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
						(*T12_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
						(*T12_).Sup.Sup.name = "ValueError";
						(*T12_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_75;
						(*T12_).Sup.Sup.parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T12_, "ValueError", "parseIPv4Address", "net.nim", 282);
						goto BeforeRet_;
					}
					LA10_: ;
					separatorValid = NIM_TRUE;
				}
				goto LA4_;
				LA6_: ;
				{
					if (!((NU8)(addressStr.p->data[i]) == (NU8)(46))) goto LA14_;
					{
						NIM_BOOL T18_;
						tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T22_;
						T18_ = (NIM_BOOL)0;
						T18_ = !(separatorValid);
						if (T18_) goto LA19_;
						T18_ = (((NI) 3) <= byteCount);
						LA19_: ;
						if (!T18_) goto LA20_;
						T22_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
						T22_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
						(*T22_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
						(*T22_).Sup.Sup.name = "ValueError";
						(*T22_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_76;
						(*T22_).Sup.Sup.parent = ((Exception*) NIM_NIL);
						raiseExceptionEx((Exception*)T22_, "ValueError", "parseIPv4Address", "net.nim", 287);
						goto BeforeRet_;
					}
					LA20_: ;
					result._family_2.address_v4[(byteCount)- 0] = ((NU8) (currentByte));
					currentByte = ((NU16) 0);
					byteCount += ((NI) 1);
					separatorValid = NIM_FALSE;
				}
				goto LA4_;
				LA14_: ;
				{
					tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T24_;
					T24_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
					T24_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
					(*T24_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
					(*T24_).Sup.Sup.name = "ValueError";
					(*T24_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_77;
					(*T24_).Sup.Sup.parent = ((Exception*) NIM_NIL);
					raiseExceptionEx((Exception*)T24_, "ValueError", "parseIPv4Address", "net.nim", 294);
					goto BeforeRet_;
				}
				LA4_: ;
				res += ((NI) 1);
			} LA3: ;
		}
	}
	{
		NIM_BOOL T27_;
		tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T31_;
		T27_ = (NIM_BOOL)0;
		T27_ = !((byteCount == ((NI) 3)));
		if (T27_) goto LA28_;
		T27_ = !(separatorValid);
		LA28_: ;
		if (!T27_) goto LA29_;
		T31_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
		T31_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
		(*T31_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
		(*T31_).Sup.Sup.name = "ValueError";
		(*T31_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_78;
		(*T31_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T31_, "ValueError", "parseIPv4Address", "net.nim", 298);
		goto BeforeRet_;
	}
	LA29_: ;
	result._family_2.address_v4[(byteCount)- 0] = ((NU8) (currentByte));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA, parseIpAddress__1ivqWNphfe1wCfgNmXXOCA)(NimStringV2 addressStr) {
	tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA));
	{
		tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T5_;
		if (!(addressStr.len == ((NI) 0))) goto LA3_;
		T5_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
		T5_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
		(*T5_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
		(*T5_).Sup.Sup.name = "ValueError";
		(*T5_).Sup.Sup.message = TM__XqsrSBxhOTPgLQ9cX4MmV4A_48;
		(*T5_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T5_, "ValueError", "parseIpAddress", "net.nim", 426);
		goto BeforeRet_;
	}
	LA3_: ;
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = contains__Pa9a8m0kZYH6LC8N1EcZJdQsystem(addressStr.p->data, addressStr.len, 58);
		if (!T8_) goto LA9_;
		result = parseIPv6Address__1ivqWNphfe1wCfgNmXXOCA_2(addressStr);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	goto LA6_;
	LA9_: ;
	{
		result = parseIPv4Address__1ivqWNphfe1wCfgNmXXOCA_3(addressStr);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	LA6_: ;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL, isObj)(TNimTypeV2* obj, NCSTRING subclass) {
	NIM_BOOL result;
	NCSTRING T1_;
	result = (NIM_BOOL)0;
	T1_ = (NCSTRING)0;
	T1_ = strstr((*obj).name, subclass);
	result = !((((void*) (T1_)) == NIM_NIL));
	return result;
}
static N_INLINE(Exception*, nimBorrowCurrentException)(void) {
	Exception* result;
	result = (Exception*)0;
	result = currException__9bVPeDJlYTi9bQApZpfH8wjg;
	return result;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___rR9boD7urcxl7uyUtE46AOA(&currException__9bVPeDJlYTi9bQApZpfH8wjg, (*currException__9bVPeDJlYTi9bQApZpfH8wjg).up);
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isIpAddress__lty7O9aUHIZT9cqYHeC2n5zA)(NimStringV2 addressStr) {
	NIM_BOOL result;
	tyObject_IpAddress__t0yd6ha54oWXm7nwZ4QqfA T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	T2_ = parseIpAddress__1ivqWNphfe1wCfgNmXXOCA(addressStr);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(void)(T2_);
	if (NIM_UNLIKELY(*nimErr_)) {
		LA1_:;
		if (isObj(nimBorrowCurrentException()->Sup.m_type, "|ValueError|CatchableError|Exception|RootObj|")) {
			*nimErr_ = NIM_FALSE;
			result = NIM_FALSE;
			popCurrentException();
			goto BeforeRet_;
			popCurrentException();
			LA4_:;
		}
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = NIM_TRUE;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NCSTRING, nimToCStringConv)(NimStringV2 s) {
	NCSTRING result;
	result = (NCSTRING)0;
	{
		if (!(s.len == ((NI) 0))) goto LA3_;
		result = "";
	}
	goto LA1_;
	LA3_: ;
	{
		result = ((NCSTRING) ((*s.p).data));
	}
	LA1_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, wrapConnectedSocket__zB421aJ04hXbpUeGq3doVQ)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* ctx, tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg handshake, NimStringV2 hostname) {
	tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* blitTmp;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	blitTmp = ctx;
	ctx = 0;
	wrapSocket__nSrKttw9bOstnCyvh66mpmQ(blitTmp, socket);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	switch (handshake) {
	case ((tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg) 0):
	{
		int ret;
		tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg T11_;
		{
			NIM_BOOL T5_;
			NIM_BOOL T7_;
			NI T10_;
			T5_ = (NIM_BOOL)0;
			T5_ = (((NI) 0) < hostname.len);
			if (!(T5_)) goto LA6_;
			T7_ = (NIM_BOOL)0;
			T7_ = isIpAddress__lty7O9aUHIZT9cqYHeC2n5zA(hostname);
			T5_ = !(T7_);
			LA6_: ;
			if (!T5_) goto LA8_;
			T10_ = (NI)0;
			T10_ = SSL_set_tlsext_host_name__jGR2GiKRQZ9cgDkYFu4P9aNg((*socket).sslHandle, nimToCStringConv(hostname));
			(void)(T10_);
		}
		LA8_: ;
		Dl_16845666_();
		ret = Dl_16800711_((*socket).sslHandle);
		T11_ = 0;
		socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, ((NI) (ret)), NIM_FALSE, ((NI32) -1), T11_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	case ((tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg) 1):
	{
		int ret_2;
		tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg T13_;
		Dl_16845666_();
		ret_2 = Dl_16800728_((*socket).sslHandle);
		T13_ = 0;
		socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, ((NI) (ret_2)), NIM_FALSE, ((NI32) -1), T13_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	break;
	}
	{
		LA1_:;
	}
	{
		eqdestroy___VAv9c7AH4o2TPeFuJ74VN7A(&ctx);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, nimIncRef)(void* p) {
	NI T1_;
	T1_ = (NI)0;
	T1_ = minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system(((NI) (ptrdiff_t) (p)), ((NI) 8));
	(*((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T1_))).rc += ((NI) 8);
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___Maxw2KUIYGcdUEJ9aO5a9bpw_2)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest, tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* src) {
	{
		if (!src) goto LA3_;
		nimIncRef(src);
	}
	LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLast((*dest));
		if (!T7_) goto LA8_;
		eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA8_: ;
	(*dest) = src;
}
N_LIB_PRIVATE N_NIMCALL(NI, send__5L0SyQu9bf9aWLpivLtuRdDg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* data, NI size) {
	NI result;
{	result = (NI)0;
	{
		int T5_;
		if (!(*socket).isSsl) goto LA3_;
		Dl_16845666_();
		T5_ = (int)0;
		T5_ = Dl_16800719_((*socket).sslHandle, ((NCSTRING) (data)), size);
		result = ((NI) (T5_));
		goto BeforeRet_;
	}
	LA3_: ;
	result = send((*socket).fd, data, size, ((NI32) 16384));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, send__sP9af4zGpnwmZkRofZDfbQQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NimStringV2 data, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags) {
	NI sent;
	void* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_ = (void*)0;
	T1_ = ((void*) (nimToCStringConv(data)));
	sent = send__5L0SyQu9bf9aWLpivLtuRdDg(socket, T1_, data.len);
	{
		NI32 lastError;
		if (!(sent < ((NI) 0))) goto LA4_;
		lastError = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, ((NI) -1), NIM_FALSE, lastError, flags);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA4_: ;
	{
		NI32 T10_;
		if (!!((sent == data.len))) goto LA8_;
		T10_ = (NI32)0;
		T10_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T10_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_80);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA8_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___Q2zLi69cYyb9b8xp2c9a9aFvUQ)(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).Sup.Sup.parent);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).Sup.Sup.parent);
	}
	LA4_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).Sup.Sup.message));
	eqdestroy___4fQQqvAqifkWGVa4g39cI5A((&(*dest).Sup.Sup.trace));
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).Sup.Sup.up);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest).Sup.Sup.up);
	}
	LA9_: ;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasDataBuffered__L6V0D3apf5iJeZChqzkovw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* s) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	result = NIM_FALSE;
	{
		NIM_BOOL T5_;
		if (!(*s).isBuffered) goto LA3_;
		T5_ = (NIM_BOOL)0;
		T5_ = (((NI) 0) < (*s).bufLen);
		if (!(T5_)) goto LA6_;
		T5_ = !(((*s).currPos == (*s).bufLen));
		LA6_: ;
		result = T5_;
	}
	LA3_: ;
	{
		NIM_BOOL T9_;
		T9_ = (NIM_BOOL)0;
		T9_ = (*s).isSsl;
		if (!(T9_)) goto LA10_;
		T9_ = !(result);
		LA10_: ;
		if (!T9_) goto LA11_;
		result = (*s).sslHasPeekChar;
	}
	LA11_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, select__9c4QMA6DGRJbXBL6Jy4sbPw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* readfd, NI timeout) {
	NI result;
	tySequence__9apztJSmgERYU8fZOjI4pOg fds;
	int colontmpD_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	fds.len = 0; fds.p = NIM_NIL;
	colontmpD_ = (int)0;
	{
		NIM_BOOL T4_;
		T4_ = (NIM_BOOL)0;
		T4_ = hasDataBuffered__L6V0D3apf5iJeZChqzkovw(readfd);
		if (!T4_) goto LA5_;
		result = ((NI) 1);
		eqdestroy___Ii7N0IPdL6PacyDWpD2POA((&fds));
		goto BeforeRet_;
	}
	LA5_: ;
	fds.len = 1; fds.p = (tySequence__9apztJSmgERYU8fZOjI4pOg_Content*) newSeqPayload(1, sizeof(int), NIM_ALIGNOF(int));
	colontmpD_ = (*readfd).fd;
	fds.p->data[0] = colontmpD_;
	result = selectRead__hYdMbc9crqOqsDFcxhERoLA((&fds), timeout);
	{
		LA1_:;
	}
	{
		eqdestroy___Ii7N0IPdL6PacyDWpD2POA((&fds));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, waitFor__mpNV4IG56MRYASsne34FNA)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw* waited, NI timeout, NI size, NimStringV2 funcName) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	result = ((NI) 1);
	{
		if (!(size <= ((NI) 0))) goto LA3_;
	}
	LA3_: ;
	{
		if (!(timeout == ((NI) -1))) goto LA7_;
		result = size;
		goto BeforeRet_;
	}
	LA7_: ;
	{
		NIM_BOOL T11_;
		NIM_BOOL T12_;
		T11_ = (NIM_BOOL)0;
		T12_ = (NIM_BOOL)0;
		T12_ = (*socket).isBuffered;
		if (!(T12_)) goto LA13_;
		T12_ = !(((*socket).bufLen == ((NI) 0)));
		LA13_: ;
		T11_ = T12_;
		if (!(T11_)) goto LA14_;
		T11_ = !(((*socket).bufLen == (*socket).currPos));
		LA14_: ;
		if (!T11_) goto LA15_;
		result = (NI)((*socket).bufLen - (*socket).currPos);
		result = ((result <= size) ? result : size);
	}
	goto LA9_;
	LA15_: ;
	{
		tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w startTime;
		NI selRet;
		NI64 T38_;
		tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w T50_;
		tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw T51_;
		{
			NI64 T20_;
			tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og* T23_;
			NimStringV2 T24_;
			T20_ = (NI64)0;
			T20_ = inMilliseconds__df0d89cDnRIju9aB6p1W1qVA((*waited));
			if (!((NI64)(((NI64) (timeout)) - T20_) < IL64(1))) goto LA21_;
			T23_ = (tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og*)0;
			T23_ = (tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og*) nimNewObj(sizeof(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og), NIM_ALIGNOF(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og));
			(*T23_).Sup.Sup.Sup.m_type = (&NTIv2__VuFrIFILhVuaGaO5FCG0Og_);
			(*T23_).Sup.Sup.name = "TimeoutError";
			T24_.len = 0; T24_.p = NIM_NIL;
			T24_ = rawNewString(funcName.len + 21);
appendString((&T24_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_83);
appendString((&T24_), funcName);
appendString((&T24_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_85);
			(*T23_).Sup.Sup.message = T24_;
			(*T23_).Sup.Sup.parent = ((Exception*) NIM_NIL);
			raiseExceptionEx((Exception*)T23_, "TimeoutError", "waitFor", "net.nim", 1375);
			goto BeforeRet_;
		}
		LA21_: ;
		{
			int sslPending;
			if (!(*socket).isSsl) goto LA27_;
			{
				NIM_BOOL T31_;
				T31_ = (NIM_BOOL)0;
				T31_ = hasDataBuffered__L6V0D3apf5iJeZChqzkovw(socket);
				if (!T31_) goto LA32_;
				result = ((NI) 1);
				goto BeforeRet_;
			}
			LA32_: ;
			sslPending = Dl_16800731_((*socket).sslHandle);
			{
				if (!!((sslPending == ((NI32) 0)))) goto LA36_;
				result = ((((NI) (sslPending)) <= size) ? ((NI) (sslPending)) : size);
				goto BeforeRet_;
			}
			LA36_: ;
		}
		LA27_: ;
		startTime = getMonoTime__QkEugs2Q2iFK9b83sl2B6wA();
		T38_ = (NI64)0;
		T38_ = inMilliseconds__df0d89cDnRIju9aB6p1W1qVA((*waited));
		selRet = select__9c4QMA6DGRJbXBL6Jy4sbPw(socket, ((NI) ((NI64)(((NI64) (timeout)) - T38_))));
		{
			NI32 T43_;
			if (!(selRet < ((NI) 0))) goto LA41_;
			T43_ = (NI32)0;
			T43_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
			raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T43_, TM__XqsrSBxhOTPgLQ9cX4MmV4A_86);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA41_: ;
		{
			tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og* T48_;
			NimStringV2 T49_;
			if (!!((selRet == ((NI) 1)))) goto LA46_;
			T48_ = (tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og*)0;
			T48_ = (tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og*) nimNewObj(sizeof(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og), NIM_ALIGNOF(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og));
			(*T48_).Sup.Sup.Sup.m_type = (&NTIv2__VuFrIFILhVuaGaO5FCG0Og_);
			(*T48_).Sup.Sup.name = "TimeoutError";
			T49_.len = 0; T49_.p = NIM_NIL;
			T49_ = rawNewString(funcName.len + 21);
appendString((&T49_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_87);
appendString((&T49_), funcName);
appendString((&T49_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_88);
			(*T48_).Sup.Sup.message = T49_;
			(*T48_).Sup.Sup.parent = ((Exception*) NIM_NIL);
			raiseExceptionEx((Exception*)T48_, "TimeoutError", "waitFor", "net.nim", 1390);
			goto BeforeRet_;
		}
		LA46_: ;
		T50_ = getMonoTime__QkEugs2Q2iFK9b83sl2B6wA();
		T51_ = minus___p9cBm7joedh4BwcboQ3HMVQ(T50_, startTime);
		pluseq___x4VoYzJQBbk9bAft9bFS7fyA(waited, T51_);
	}
	LA9_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, uniRecv__YQlV9aRgVr9cJoVJlEPDJIqw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* buffer, int size, int flags) {
	NI result;
{	result = (NI)0;
	result = ((NI) 0);
	{
		int T5_;
		if (!(*socket).isSsl) goto LA3_;
		Dl_16845666_();
		T5_ = (int)0;
		T5_ = Dl_16800714_((*socket).sslHandle, buffer, ((NI) (size)));
		result = ((NI) (T5_));
		goto BeforeRet_;
	}
	LA3_: ;
	result = recv((*socket).fd, buffer, ((NI) (size)), flags);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, readIntoBuf__3VtccBbq17lyKCft9aSHtGA)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI32 flags) {
	NI result;
	tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* T1_;
{	result = (NI)0;
	result = ((NI) 0);
	T1_ = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*)0;
	T1_ = socket;
	result = uniRecv__YQlV9aRgVr9cJoVJlEPDJIqw(T1_, ((void*) ((*socket).buffer)), ((int) 4000), flags);
	{
		if (!(result < ((NI) 0))) goto LA4_;
		(*socket).lastError = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
	}
	LA4_: ;
	{
		if (!(result <= ((NI) 0))) goto LA8_;
		(*socket).bufLen = ((NI) 0);
		(*socket).currPos = ((NI) 0);
		goto BeforeRet_;
	}
	LA8_: ;
	(*socket).bufLen = result;
	(*socket).currPos = ((NI) 0);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, recv__5L0SyQu9bf9aWLpivLtuRdDg_2)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* data, NI size) {
	NI result;
{	result = (NI)0;
	{
		if (!(size == ((NI) 0))) goto LA3_;
		goto BeforeRet_;
	}
	LA3_: ;
	{
		NI read;
		if (!(*socket).isBuffered) goto LA7_;
		{
			NI res;
			if (!((*socket).bufLen == ((NI) 0))) goto LA11_;
			res = readIntoBuf__3VtccBbq17lyKCft9aSHtGA(socket, ((NI32) 0));
			{
				if (!(res <= ((NI) 0))) goto LA15_;
				{
					if (!NIM_FALSE) goto LA19_;
					result = ((NI) 0);
					goto BeforeRet_;
				}
				goto LA17_;
				LA19_: ;
				{
					result = res;
					goto BeforeRet_;
				}
				LA17_: ;
			}
			LA15_: ;
		}
		LA11_: ;
		read = ((NI) 0);
		{
			while (1) {
				NI chunk;
				NCSTRING d;
				if (!(read < size)) goto LA23;
				{
					NI res_2;
					if (!((*socket).bufLen <= (*socket).currPos)) goto LA26_;
					res_2 = readIntoBuf__3VtccBbq17lyKCft9aSHtGA(socket, ((NI32) 0));
					{
						if (!(res_2 <= ((NI) 0))) goto LA30_;
						{
							if (!(((NI) 0) < read)) goto LA34_;
							result = read;
							goto BeforeRet_;
						}
						goto LA32_;
						LA34_: ;
						{
							result = res_2;
							goto BeforeRet_;
						}
						LA32_: ;
					}
					LA30_: ;
				}
				LA26_: ;
				chunk = (((NI)((*socket).bufLen - (*socket).currPos) <= (NI)(size - read)) ? (NI)((*socket).bufLen - (*socket).currPos) : (NI)(size - read));
				d = ((NCSTRING) (data));
				copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(((void*) ((&d[read]))), ((void*) ((&(*socket).buffer[((*socket).currPos)- 0]))), ((NI) (chunk)));
				read += chunk;
				(*socket).currPos += chunk;
			} LA23: ;
		}
		result = read;
	}
	goto LA5_;
	LA7_: ;
	{
		{
			if (!(*socket).isSsl) goto LA40_;
			{
				if (!(*socket).sslHasPeekChar) goto LA44_;
				copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(data, ((void*) ((&(*socket).sslPeekChar))), ((NI) 1));
				(*socket).sslHasPeekChar = NIM_FALSE;
				{
					NCSTRING d_2;
					NI T50_;
					if (!(((NI) 0) < (NI)(size - ((NI) 1)))) goto LA48_;
					d_2 = ((NCSTRING) (data));
					T50_ = (NI)0;
					T50_ = uniRecv__YQlV9aRgVr9cJoVJlEPDJIqw(socket, ((void*) ((&d_2[((NI) 1)]))), ((int) ((NI)(size - ((NI) 1)))), ((NI32) 0));
					result = (NI)(T50_ + ((NI) 1));
				}
				goto LA46_;
				LA48_: ;
				{
					result = ((NI) 1);
				}
				LA46_: ;
			}
			goto LA42_;
			LA44_: ;
			{
				result = uniRecv__YQlV9aRgVr9cJoVJlEPDJIqw(socket, data, ((int) (size)), ((NI32) 0));
			}
			LA42_: ;
		}
		goto LA38_;
		LA40_: ;
		{
			result = recv((*socket).fd, data, ((NI) (((int) (size)))), ((NI32) 0));
		}
		LA38_: ;
		{
			if (!(result < ((NI) 0))) goto LA56_;
			(*socket).lastError = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		}
		LA56_: ;
	}
	LA5_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, peekChar__vy4VpuiQuyO2yjz3cp2FxQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NIM_CHAR* c) {
	NI result;
{	result = (NI)0;
	{
		if (!(*socket).isBuffered) goto LA3_;
		result = ((NI) 1);
		{
			NIM_BOOL T7_;
			NI res;
			T7_ = (NIM_BOOL)0;
			T7_ = ((*socket).bufLen == ((NI) 0));
			if (T7_) goto LA8_;
			T7_ = ((NI)((*socket).bufLen - ((NI) 1)) < (*socket).currPos);
			LA8_: ;
			if (!T7_) goto LA9_;
			res = readIntoBuf__3VtccBbq17lyKCft9aSHtGA(socket, ((NI32) 0));
			{
				if (!(res <= ((NI) 0))) goto LA13_;
				result = res;
			}
			LA13_: ;
		}
		LA9_: ;
		(*c) = (*socket).buffer[((*socket).currPos)- 0];
	}
	goto LA1_;
	LA3_: ;
	{
		{
			if (!(*socket).isSsl) goto LA18_;
			{
				tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* T24_;
				if (!!((*socket).sslHasPeekChar)) goto LA22_;
				T24_ = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*)0;
				T24_ = socket;
				result = uniRecv__YQlV9aRgVr9cJoVJlEPDJIqw(T24_, ((void*) ((&(*socket).sslPeekChar))), ((int) 1), ((NI32) 0));
				(*socket).sslHasPeekChar = NIM_TRUE;
			}
			LA22_: ;
			(*c) = (*socket).sslPeekChar;
			goto BeforeRet_;
		}
		LA18_: ;
		result = recv((*socket).fd, ((void*) (c)), ((NI) 1), ((int) 2));
	}
	LA1_: ;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimAddCharV1)(NimStringV2* s, NIM_CHAR c) {
	prepareAdd(s, ((NI) 1));
	(*(*s).p).data[(*s).len] = c;
	(*(*s).p).data[(NI)((*s).len + ((NI) 1))] = 0;
	(*s).len += ((NI) 1);
}
N_LIB_PRIVATE N_NIMCALL(void, readLine__0WLvm80r9c7KImcDRmm5IDg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NimStringV2* line, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags, NI maxLength) {
	tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw waited;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&waited), sizeof(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw));
	setLengthStrV2((&(*line)), ((NI) 0));
	{
		while (1) {
			NIM_CHAR c;
			NI T3_;
			NI n;
			c = (NIM_CHAR)0;
			T3_ = (NI)0;
			T3_ = waitFor__mpNV4IG56MRYASsne34FNA(socket, (&waited), timeout, ((NI) 1), TM__XqsrSBxhOTPgLQ9cX4MmV4A_90);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			(void)(T3_);
			n = recv__5L0SyQu9bf9aWLpivLtuRdDg_2(socket, ((void*) ((&c))), ((NI) 1));
			{
				NI32 lastError;
				if (!(n < ((NI) 0))) goto LA6_;
				lastError = getSocketError__YATB019buW9cFOjCCZLlKipQ(socket);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				{
					NIM_BOOL T10_;
					T10_ = (NIM_BOOL)0;
					T10_ = isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ(flags, lastError);
					if (!T10_) goto LA11_;
					setLengthStrV2((&(*line)), ((NI) 0));
				}
				LA11_: ;
				socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, n, NIM_FALSE, lastError, flags);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA4_;
			LA6_: ;
			{
				if (!(n == ((NI) 0))) goto LA14_;
				setLengthStrV2((&(*line)), ((NI) 0));
				goto BeforeRet_;
			}
			goto LA4_;
			LA14_: ;
			LA4_: ;
			{
				NI T20_;
				if (!((NU8)(c) == (NU8)(13))) goto LA18_;
				T20_ = (NI)0;
				T20_ = waitFor__mpNV4IG56MRYASsne34FNA(socket, (&waited), timeout, ((NI) 1), TM__XqsrSBxhOTPgLQ9cX4MmV4A_91);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(void)(T20_);
				n = peekChar__vy4VpuiQuyO2yjz3cp2FxQ(socket, (&c));
				{
					NIM_BOOL T23_;
					NI T27_;
					T23_ = (NIM_BOOL)0;
					T23_ = (((NI) 0) < n);
					if (!(T23_)) goto LA24_;
					T23_ = ((NU8)(c) == (NU8)(10));
					LA24_: ;
					if (!T23_) goto LA25_;
					T27_ = (NI)0;
					T27_ = recv__5L0SyQu9bf9aWLpivLtuRdDg_2(socket, ((void*) ((&c))), ((NI) 1));
					(void)(T27_);
				}
				goto LA21_;
				LA25_: ;
				{
					NI32 lastError_2;
					if (!(n <= ((NI) 0))) goto LA29_;
					lastError_2 = getSocketError__YATB019buW9cFOjCCZLlKipQ(socket);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					{
						NIM_BOOL T33_;
						T33_ = (NIM_BOOL)0;
						T33_ = isDisconnectionError__XxybNfLJKXhPAkMhmPhNzQ(flags, lastError_2);
						if (!T33_) goto LA34_;
						setLengthStrV2((&(*line)), ((NI) 0));
					}
					LA34_: ;
					socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, n, NIM_FALSE, lastError_2, flags);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				goto LA21_;
				LA29_: ;
				LA21_: ;
				{
					if (!((*line).len == ((NI) 0))) goto LA38_;
					prepareAdd((&(*line)), 2);
appendString((&(*line)), TM__XqsrSBxhOTPgLQ9cX4MmV4A_93);
				}
				LA38_: ;
				goto BeforeRet_;
			}
			goto LA16_;
			LA18_: ;
			{
				if (!((NU8)(c) == (NU8)(10))) goto LA41_;
				{
					if (!((*line).len == ((NI) 0))) goto LA45_;
					prepareAdd((&(*line)), 2);
appendString((&(*line)), TM__XqsrSBxhOTPgLQ9cX4MmV4A_94);
				}
				LA45_: ;
				goto BeforeRet_;
			}
			goto LA16_;
			LA41_: ;
			LA16_: ;
			nimAddCharV1((&(*line)), c);
			{
				if (!(maxLength < (*line).len)) goto LA49_;
				goto LA1;
			}
			LA49_: ;
		}
	} LA1: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, recvLine__xQiPYgNz7DM0cyQl7evHRQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags, NI maxLength) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	result = TM__XqsrSBxhOTPgLQ9cX4MmV4A_81;
	readLine__0WLvm80r9c7KImcDRmm5IDg(socket, (&result), timeout, flags, maxLength);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, recv__s9bHVcCkcztbhZorVAO5UpA)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, void* data, NI size, NI timeout) {
	NI result;
	tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw waited;
	NI read;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	nimZeroMem((void*)(&waited), sizeof(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw));
	read = ((NI) 0);
	{
		while (1) {
			NI avail;
			NCSTRING d;
			if (!(read < size)) goto LA2;
			avail = waitFor__mpNV4IG56MRYASsne34FNA(socket, (&waited), timeout, (NI)(size - read), TM__XqsrSBxhOTPgLQ9cX4MmV4A_96);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			d = ((NCSTRING) (data));
			result = recv__5L0SyQu9bf9aWLpivLtuRdDg_2(socket, ((void*) ((&d[read]))), avail);
			{
				if (!(result == ((NI) 0))) goto LA5_;
				goto LA1;
			}
			LA5_: ;
			{
				if (!(result < ((NI) 0))) goto LA9_;
				goto BeforeRet_;
			}
			LA9_: ;
			read += result;
		} LA2: ;
	} LA1: ;
	result = read;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, recv__WAuvR33LNsmM2rTnugz1Lw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NimStringV2* data, NI size, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags) {
	NI result;
	NI colontmpD_;
	NI colontmpD__2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	colontmpD_ = (NI)0;
	colontmpD__2 = (NI)0;
	setLengthStrV2((&(*data)), ((NI) (size)));
	{
		if (!(timeout == ((NI) -1))) goto LA3_;
		colontmpD_ = recv__5L0SyQu9bf9aWLpivLtuRdDg_2(socket, ((void*) (nimToCStringConv((*data)))), size);
		result = colontmpD_;
	}
	goto LA1_;
	LA3_: ;
	{
		colontmpD__2 = recv__s9bHVcCkcztbhZorVAO5UpA(socket, ((void*) (nimToCStringConv((*data)))), size, timeout);
		if (NIM_UNLIKELY(*nimErr_)) goto LA6_;
		result = colontmpD__2;
		{
			LA6_:;
		}
		{
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA1_: ;
	{
		NI32 lastError;
		if (!(result < ((NI) 0))) goto LA11_;
		setLengthStrV2((&(*data)), ((NI) 0));
		lastError = getSocketError__YATB019buW9cFOjCCZLlKipQ(socket);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		socketError__OvHxk9cQ7Y9cpNf9bNuX4awrg(socket, result, NIM_FALSE, lastError, flags);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA9_;
	LA11_: ;
	{
		setLengthStrV2((&(*data)), ((NI) (result)));
	}
	LA9_: ;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(int, SSL_CTX_set_ecdh_auto__7FfmdDMi8b9aPt5ijVCCYfwopenssl)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, int onoff) {
	int result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (int)0;
	{
		NIM_BOOL T3_;
		unsigned long T4_;
		unsigned long T6_;
		long T9_;
		T3_ = (NIM_BOOL)0;
		T4_ = (unsigned long)0;
		T4_ = getOpenSSLVersion__dJsO04BYfgh1GDCx4NNEgA();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T3_ = ((NU64)(T4_) < (NU64)(((NU) 269484032)));
		if (T3_) goto LA5_;
		T6_ = (unsigned long)0;
		T6_ = getOpenSSLVersion__dJsO04BYfgh1GDCx4NNEgA();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T3_ = (T6_ == ((NU) 536870912));
		LA5_: ;
		if (!T3_) goto LA7_;
		T9_ = (long)0;
		T9_ = Dl_16845459_(ctx, ((int) 94), ((long) (onoff)), NIM_NIL);
		result = ((int) (T9_));
	}
	goto LA1_;
	LA7_: ;
	{
		result = ((int) 1);
	}
	LA1_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, loadCertificates__geRWUgM7mn0muJSOQgdeJg)(tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* ctx, NimStringV2 certFile, NimStringV2 keyFile) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		NIM_BOOL T5_;
		tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw* T8_;
		NimStringV2 T9_;
		T3_ = (NIM_BOOL)0;
		T3_ = !((certFile.len == 0));
		if (!(T3_)) goto LA4_;
		T5_ = (NIM_BOOL)0;
		T5_ = nosfileExists(certFile);
		T3_ = !(T5_);
		LA4_: ;
		if (!T3_) goto LA6_;
		T8_ = (tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw*)0;
		T8_ = (tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw*) nimNewObj(sizeof(tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw), NIM_ALIGNOF(tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw));
		(*T8_).Sup.Sup.Sup.m_type = (&NTIv2__iLZrPn9anoh9ad1MmO0RczFw_);
		(*T8_).Sup.Sup.name = "IOError";
		T9_.len = 0; T9_.p = NIM_NIL;
		T9_ = rawNewString(certFile.len + 37);
appendString((&T9_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_106);
appendString((&T9_), certFile);
		(*T8_).Sup.Sup.message = T9_;
		(*T8_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T8_, "IOError", "loadCertificates", "net.nim", 533);
		goto BeforeRet_;
	}
	LA6_: ;
	{
		NIM_BOOL T12_;
		NIM_BOOL T14_;
		tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw* T17_;
		NimStringV2 T18_;
		T12_ = (NIM_BOOL)0;
		T12_ = !((keyFile.len == 0));
		if (!(T12_)) goto LA13_;
		T14_ = (NIM_BOOL)0;
		T14_ = nosfileExists(keyFile);
		T12_ = !(T14_);
		LA13_: ;
		if (!T12_) goto LA15_;
		T17_ = (tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw*)0;
		T17_ = (tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw*) nimNewObj(sizeof(tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw), NIM_ALIGNOF(tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw));
		(*T17_).Sup.Sup.Sup.m_type = (&NTIv2__iLZrPn9anoh9ad1MmO0RczFw_);
		(*T17_).Sup.Sup.name = "IOError";
		T18_.len = 0; T18_.p = NIM_NIL;
		T18_ = rawNewString(keyFile.len + 29);
appendString((&T18_), TM__XqsrSBxhOTPgLQ9cX4MmV4A_108);
appendString((&T18_), keyFile);
		(*T17_).Sup.Sup.message = T18_;
		(*T17_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T17_, "IOError", "loadCertificates", "net.nim", 536);
		goto BeforeRet_;
	}
	LA15_: ;
	{
		int ret;
		if (!!((certFile.len == 0))) goto LA21_;
		ret = Dl_16800669_(ctx, nimToCStringConv(certFile));
		{
			if (!!((ret == ((NI32) 1)))) goto LA25_;
			raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_109);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA25_: ;
	}
	LA21_: ;
	{
		if (!!((keyFile.len == 0))) goto LA29_;
		{
			int T33_;
			T33_ = (int)0;
			T33_ = Dl_16800673_(ctx, nimToCStringConv(keyFile), ((int) 1));
			if (!!((T33_ == ((NI32) 1)))) goto LA34_;
			raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_110);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA34_: ;
		{
			int T38_;
			T38_ = (int)0;
			T38_ = Dl_16800678_(ctx);
			if (!!((T38_ == ((NI32) 1)))) goto LA39_;
			raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_112);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA39_: ;
	}
	LA29_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___62MUyfPaPMqOLTuGUq9aNLg)(tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ** dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest));
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___SrpOpUfOUr8D5UIygvrDmw)(tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).serverGetPskFunc.ClE_0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).serverGetPskFunc.ClE_0);
	}
	LA4_: ;
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).clientGetPskFunc.ClE_0);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest).clientGetPskFunc.ClE_0);
	}
	LA9_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*, newContext__p45vOS9b3iK2JJ1Y7aIJ9bUA)(tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw protVersion, tyEnum_SslCVerifyMode__t9a9cuHiKUd7w4o8XPQAbfJg verifyMode, NimStringV2 certFile, NimStringV2 keyFile, NimStringV2 cipherList, NimStringV2 caDir, NimStringV2 caFile) {
	tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* result;
	tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* newCTX;
	unsigned long sslVersion;
	NI T32_;
	tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* T33_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*)0;
	newCTX = (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*)0;
	switch (protVersion) {
	case ((tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw) 3):
	{
		tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* T2_;
		T2_ = (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*)0;
		T2_ = SSLv23_method__LTfNTmKR6aBlZTkY8nHSxg();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		newCTX = Dl_16800637_(T2_);
	}
	break;
	case ((tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw) 0):
	{
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_98);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw) 1):
	{
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_100);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw) 2):
	{
		tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw* T6_;
		T6_ = (tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*)0;
		T6_ = Dl_16786248_();
		newCTX = Dl_16800637_(T6_);
	}
	break;
	}
	{
		int T9_;
		T9_ = (int)0;
		T9_ = Dl_16800660_(newCTX, nimToCStringConv(cipherList));
		if (!!((T9_ == ((NI32) 1)))) goto LA10_;
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_101);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA10_: ;
	sslVersion = getOpenSSLVersion__dJsO04BYfgh1GDCx4NNEgA();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NIM_BOOL T14_;
		T14_ = (NIM_BOOL)0;
		T14_ = ((NU64)(((NU) 269488128)) <= (NU64)(sslVersion));
		if (!(T14_)) goto LA15_;
		T14_ = ((NU)((NU64) ~(sslVersion)) == ((NU) 536870912));
		LA15_: ;
		if (!T14_) goto LA16_;
		{
			int T20_;
			T20_ = (int)0;
			T20_ = SSL_CTX_set_ciphersuites__WApCSzGH2uqCDm9bYkShtQw(newCTX, nimToCStringConv(cipherList));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			if (!!((T20_ == ((NI32) 1)))) goto LA21_;
			raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_102);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA21_: ;
	}
	LA16_: ;
	{
		int T25_;
		T25_ = (int)0;
		T25_ = SSL_CTX_set_ecdh_auto__7FfmdDMi8b9aPt5ijVCCYfwopenssl(newCTX, ((int) 1));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!((T25_ == ((NI32) 1)))) goto LA26_;
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_103);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA26_: ;
	Dl_16800648_(newCTX, ((NI) 0), NIM_NIL);
	{
		if (!(newCTX == ((tyObject_SslStruct__hZKic6WnTBMq6Usbg49bnhw*) NIM_NIL))) goto LA30_;
		raiseSSLError__4bk00w9al9cfmeFR9a9cMW860g(TM__XqsrSBxhOTPgLQ9cX4MmV4A_104);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA30_: ;
	T32_ = (NI)0;
	T32_ = SSLCTXSetMode__u4DGuCXu9asDo9aQgd9cu5QNQ(newCTX, ((NI) 4));
	(void)(T32_);
	loadCertificates__geRWUgM7mn0muJSOQgdeJg(newCTX, certFile, keyFile);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T33_ = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*)0;
	T33_ = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*) nimNewObjUninit(sizeof(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w), NIM_ALIGNOF(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w));
	(*T33_).context = newCTX;
	(*T33_).referencedData = initHashSet__rkx2SGa9c4bJGzaJP7jTaxg(((NI) 64));
	(*T33_).extraInternal = new__5koBfXFt4Ec5TaAoLmPrsw();
	result = T33_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, stdlib_netInit000)(void) {
{
NIM_BOOL* nimErr_;
nimErr_ = nimErrorFlag();
	CRYPTO_malloc_init__G2BDIxFj2W9ajANxAoi8oZA();
	{
		int T3_;
		T3_ = (int)0;
		T3_ = SSL_library_init__6SfBfS64wp6JZihQGGrnKg();
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!((T3_ == ((NI32) 1)))) goto LA4_;
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(TM__XqsrSBxhOTPgLQ9cX4MmV4A_3);
	}
	LA4_: ;
	SSL_load_error_strings__G2BDIxFj2W9ajANxAoi8oZA_2();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	Dl_16800614_();
	OpenSSL_add_all_algorithms__G2BDIxFj2W9ajANxAoi8oZA_3();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	BeforeRet_: ;
}
}

N_LIB_PRIVATE N_NIMCALL(void, stdlib_netDatInit000)(void) {

/* section: NIM_merge_TYPE_INIT3 */
NTIv2__GtD0IEVE1EOWxaU5x9amdzA_.destructor = (void*)eqdestroy___Ae2FSx40er6tM5hCtHQNSg; NTIv2__GtD0IEVE1EOWxaU5x9amdzA_.size = sizeof(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA); NTIv2__GtD0IEVE1EOWxaU5x9amdzA_.align = NIM_ALIGNOF(tyObject_SslError__GtD0IEVE1EOWxaU5x9amdzA); NTIv2__GtD0IEVE1EOWxaU5x9amdzA_.name = "|stdlib.net.SslError|CatchableError|Exception|RootObj|";
; NTIv2__GtD0IEVE1EOWxaU5x9amdzA_.traceImpl = (void*)NIM_NIL; NTIv2__GtD0IEVE1EOWxaU5x9amdzA_.disposeImpl = (void*)NIM_NIL;NTIv2__VuFrIFILhVuaGaO5FCG0Og_.destructor = (void*)eqdestroy___Q2zLi69cYyb9b8xp2c9a9aFvUQ; NTIv2__VuFrIFILhVuaGaO5FCG0Og_.size = sizeof(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og); NTIv2__VuFrIFILhVuaGaO5FCG0Og_.align = NIM_ALIGNOF(tyObject_TimeoutError__VuFrIFILhVuaGaO5FCG0Og); NTIv2__VuFrIFILhVuaGaO5FCG0Og_.name = "|stdlib.net.TimeoutError|CatchableError|Exception|RootObj|";
; NTIv2__VuFrIFILhVuaGaO5FCG0Og_.traceImpl = (void*)NIM_NIL; NTIv2__VuFrIFILhVuaGaO5FCG0Og_.disposeImpl = (void*)NIM_NIL;NTIv2__22zILeNTc8ClX7DrPZ3XOQ_.destructor = (void*)eqdestroy___SrpOpUfOUr8D5UIygvrDmw; NTIv2__22zILeNTc8ClX7DrPZ3XOQ_.size = sizeof(tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ); NTIv2__22zILeNTc8ClX7DrPZ3XOQ_.align = NIM_ALIGNOF(tyObject_SslContextExtraInternalcolonObjectType___22zILeNTc8ClX7DrPZ3XOQ); NTIv2__22zILeNTc8ClX7DrPZ3XOQ_.name = "|stdlib.net.SslContextExtraInternal:ObjectType|RootObj|";
; NTIv2__22zILeNTc8ClX7DrPZ3XOQ_.traceImpl = (void*)NIM_NIL; NTIv2__22zILeNTc8ClX7DrPZ3XOQ_.disposeImpl = (void*)NIM_NIL;}

