(self.webpackChunkatoti_jupyterlab=self.webpackChunkatoti_jupyterlab||[]).push([[6099],{96099:(e,t,a)=>{"use strict";e.exports=a(52437)},18457:e=>{"use strict";e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},42935:(e,t,a)=>{"use strict";var n=a(61782).extendFlat,i=a(61782).extendDeep,l=a(23233).overrideAll,r=a(95980),o=a(73925),s=a(5227).Y,c=a(3116),u=a(61608).templatedArray,d=a(18457),h=a(30755).FORMAT_LINK,g=r({editType:"plot",colorEditType:"plot"}),p={color:{valType:"color",editType:"plot",role:"info",description:["Sets the background color of the arc."].join(" ")},line:{color:{valType:"color",role:"info",dflt:o.defaultLine,editType:"plot",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",role:"info",min:0,dflt:0,editType:"plot",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},thickness:{valType:"number",role:"info",min:0,max:1,dflt:1,editType:"plot",description:["Sets the thickness of the bar as a fraction of the total thickness of the gauge."].join(" ")},editType:"calc"},f={valType:"info_array",role:"info",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["Sets the range of this axis."].join(" ")},m=u("step",i({},p,{range:f}));e.exports={mode:{valType:"flaglist",editType:"calc",role:"info",flags:["number","delta","gauge"],dflt:"number",description:["Determines how the value is displayed on the graph.","`number` displays the value numerically in text.","`delta` displays the difference to a reference value in text.","Finally, `gauge` displays the value graphically on an axis."].join(" ")},value:{valType:"number",editType:"calc",role:"info",anim:!0,description:["Sets the number to be displayed."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],role:"info",editType:"plot",description:["Sets the horizontal alignment of the `text` within the box.","Note that this attribute has no effect if an angular gauge is displayed:","in this case, it is always centered"].join(" ")},domain:s({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",role:"info",editType:"plot",description:["Sets the title of this indicator."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],role:"info",editType:"plot",description:["Sets the horizontal alignment of the title.","It defaults to `center` except for bullet charts","for which it defaults to right."].join(" ")},font:n({},g,{description:["Set the font used to display the title"].join(" ")}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",role:"info",editType:"plot",description:["Sets the value formatting rule using d3 formatting mini-language","which is similar to those of Python. See",h].join(" ")},font:n({},g,{description:["Set the font used to display main number"].join(" ")}),prefix:{valType:"string",dflt:"",role:"info",editType:"plot",description:["Sets a prefix appearing before the number."].join(" ")},suffix:{valType:"string",dflt:"",role:"info",editType:"plot",description:["Sets a suffix appearing next to the number."].join(" ")},editType:"plot"},delta:{reference:{valType:"number",role:"info",editType:"calc",description:["Sets the reference value to compute the delta.","By default, it is set to the current value."].join(" ")},position:{valType:"enumerated",values:["top","bottom","left","right"],role:"info",dflt:"bottom",editType:"plot",description:["Sets the position of delta with respect to the number."].join(" ")},relative:{valType:"boolean",editType:"plot",role:"info",dflt:!1,description:["Show relative change"].join(" ")},valueformat:{valType:"string",role:"info",editType:"plot",description:["Sets the value formatting rule using d3 formatting mini-language","which is similar to those of Python. See",h].join(" ")},increasing:{symbol:{valType:"string",role:"info",dflt:d.INCREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",role:"info",dflt:d.INCREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},decreasing:{symbol:{valType:"string",role:"info",dflt:d.DECREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",role:"info",dflt:d.DECREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},font:n({},g,{description:["Set the font used to display the delta"].join(" ")}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",role:"info",dflt:"angular",values:["angular","bullet"],description:["Set the shape of the gauge"].join(" ")},bar:i({},p,{color:{dflt:"green"},description:["Set the appearance of the gauge's value"].join(" ")}),bgcolor:{valType:"color",role:"info",editType:"plot",description:"Sets the gauge background color."},bordercolor:{valType:"color",dflt:o.defaultLine,role:"info",editType:"plot",description:"Sets the color of the border enclosing the gauge."},borderwidth:{valType:"number",min:0,dflt:1,role:"info",editType:"plot",description:"Sets the width (in px) of the border enclosing the gauge."},axis:l({range:f,visible:n({},c.visible,{dflt:!0}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:n({},c.ticks,{dflt:"outside"}),ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:r({description:"Sets the color bar's tick label font"}),tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,separatethousands:c.separatethousands,exponentformat:c.exponentformat,minexponent:c.minexponent,showexponent:c.showexponent,editType:"plot"},"plot"),steps:m,threshold:{line:{color:n({},p.line.color,{description:["Sets the color of the threshold line."].join(" ")}),width:n({},p.line.width,{dflt:1,description:["Sets the width (in px) of the threshold line."].join(" ")}),editType:"plot"},thickness:n({},p.thickness,{dflt:.85,description:["Sets the thickness of the threshold line as a fraction of the thickness of the gauge."].join(" ")}),value:{valType:"number",editType:"calc",dflt:!1,role:"info",description:["Sets a treshold value drawn as a line."].join(" ")},editType:"plot"},description:"The gauge of the Indicator plot.",editType:"plot"}}},55917:(e,t,a)=>{"use strict";var n=a(49701);t.name="indicator",t.plot=function(e,a,i,l){n.plotBasePlot(t.name,e,a,i,l)},t.clean=function(e,a,i,l){n.cleanBasePlot(t.name,e,a,i,l)}},86452:e=>{"use strict";e.exports={calc:function(e,t){var a=[],n=t.value;"number"!=typeof t._lastValue&&(t._lastValue=t.value);var i=t._lastValue,l=i;return t._hasDelta&&"number"==typeof t.delta.reference&&(l=t.delta.reference),a[0]={y:n,lastY:i,delta:n-l,relativeDelta:(n-l)/l},a}}},80272:e=>{"use strict";e.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},90833:(e,t,a)=>{"use strict";var n=a(95754),i=a(42935),l=a(5227).c,r=a(61608),o=a(34470),s=a(80272),c=a(43042),u=a(35117),d=a(88257);function h(e,t){function a(a,l){return n.coerce(e,t,i.gauge.steps,a,l)}a("color"),a("line.color"),a("line.width"),a("range"),a("thickness")}e.exports={supplyDefaults:function(e,t,a,g){function p(a,l){return n.coerce(e,t,i,a,l)}l(t,g,p),p("mode"),t._hasNumber=-1!==t.mode.indexOf("number"),t._hasDelta=-1!==t.mode.indexOf("delta"),t._hasGauge=-1!==t.mode.indexOf("gauge");var f=p("value");t._range=[0,"number"==typeof f?1.5*f:1];var m,b,v,y,x,T,k=new Array(2);function w(e,t){return n.coerce(v,y,i.gauge,e,t)}function _(e,t){return n.coerce(x,T,i.gauge.axis,e,t)}if(t._hasNumber&&(p("number.valueformat"),p("number.font.color",g.font.color),p("number.font.family",g.font.family),p("number.font.size"),void 0===t.number.font.size&&(t.number.font.size=s.defaultNumberFontSize,k[0]=!0),p("number.prefix"),p("number.suffix"),m=t.number.font.size),t._hasDelta&&(p("delta.font.color",g.font.color),p("delta.font.family",g.font.family),p("delta.font.size"),void 0===t.delta.font.size&&(t.delta.font.size=(t._hasNumber?.5:1)*(m||s.defaultNumberFontSize),k[1]=!0),p("delta.reference",t.value),p("delta.relative"),p("delta.valueformat",t.delta.relative?"2%":""),p("delta.increasing.symbol"),p("delta.increasing.color"),p("delta.decreasing.symbol"),p("delta.decreasing.color"),p("delta.position"),b=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||k[0])&&(!t._hasDelta||k[1])||!1,p("title.font.color",g.font.color),p("title.font.family",g.font.family),p("title.font.size",.25*(m||b||s.defaultNumberFontSize)),p("title.text"),t._hasGauge){(v=e.gauge)||(v={}),y=r.newContainer(t,"gauge"),w("shape"),(t._isBullet="bullet"===t.gauge.shape)||p("title.align","center"),(t._isAngular="angular"===t.gauge.shape)||p("align","center"),w("bgcolor",g.paper_bgcolor),w("borderwidth"),w("bordercolor"),w("bar.color"),w("bar.line.color"),w("bar.line.width"),w("bar.thickness",s.valueThickness*("bullet"===t.gauge.shape?.5:1)),o(v,y,{name:"steps",handleItemDefaults:h}),w("threshold.value"),w("threshold.thickness"),w("threshold.line.width"),w("threshold.line.color"),x={},v&&(x=v.axis||{}),T=r.newContainer(y,"axis"),_("visible"),t._range=_("range",t._range);var S={outerTicks:!0};c(x,T,_,"linear"),d(x,T,_,"linear",S),u(x,T,_,S)}else p("title.align","center"),p("align","center"),t._isAngular=t._isBullet=!1;t._length=null}}},52437:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"indicator",basePlotModule:a(55917),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:a(42935),supplyDefaults:a(90833).supplyDefaults,calc:a(86452).calc,plot:a(45693),meta:{description:["An indicator is used to visualize a single `value` along with some","contextual information such as `steps` or a `threshold`, using a","combination of three visual elements: a number, a delta, and/or a gauge.","Deltas are taken with respect to a `reference`.","Gauges can be either angular or bullet (aka linear) gauges."].join(" ")}}},45693:(e,t,a)=>{"use strict";var n=a(42895),i=a(95754),l=i.rad2deg,r=a(64440).MID_SHIFT,o=a(14124),s=a(80272),c=a(73071),u=a(39393),d=a(14504),h=a(43427),g=a(3116),p=a(92665),f={left:"start",center:"middle",right:"end"},m={left:0,center:.5,right:1},b=/[yzafpnµmkMGTPEZY]/;function v(e){return e&&e.duration>0}function y(e){e.each((function(e){p.stroke(n.select(this),e.line.color)})).each((function(e){p.fill(n.select(this),e.color)})).style("stroke-width",(function(e){return e.line.width}))}function x(e,t,a){var n=e._fullLayout,l=i.extendFlat({type:"linear",ticks:"outside",range:a,showline:!0},t),r={type:"linear",_id:"x"+t._id},o={letter:"x",font:n.font,noHover:!0,noTickson:!0};function s(e,t){return i.coerce(l,r,g,e,t)}return d(l,r,s,o,n),h(l,r,s,o),r}function T(e,t){return"translate("+e+","+t+")"}function k(e,t,a){return[Math.min(t/e.width,a/e.height),e,t+"x"+a]}function w(e,t,a,i){var l=document.createElementNS("http://www.w3.org/2000/svg","text"),r=n.select(l);return r.text(e).attr("x",0).attr("y",0).attr("text-anchor",a).attr("data-unformatted",e).call(c.convertToTspans,i).call(o.font,t),o.bBox(r.node())}function _(e,t,a,n,l,r){var o="_cache"+t;e[o]&&e[o].key===l||(e[o]={key:l,value:a});var s=i.aggNums(r,null,[e[o].value,n],2);return e[o].value=s,s}e.exports=function(e,t,a,d){var h,g=e._fullLayout;v(a)&&d&&(h=d()),i.makeTraceGroups(g._indicatorlayer,t,"trace").each((function(t){var d,S,M,z,A,N=t[0].trace,j=n.select(this),D=N._hasGauge,O=N._isAngular,F=N._isBullet,L=N.domain,C={w:g._size.w*(L.x[1]-L.x[0]),h:g._size.h*(L.y[1]-L.y[0]),l:g._size.l+g._size.w*L.x[0],r:g._size.r+g._size.w*(1-L.x[1]),t:g._size.t+g._size.h*(1-L.y[1]),b:g._size.b+g._size.h*L.y[0]},I=C.l+C.w/2,P=C.t+C.h/2,B=Math.min(C.w/2,C.h),R=s.innerRadius*B,E=N.align||"center";if(S=P,D){if(O&&(d=I,S=P+B/2,M=function(e){return function(e,t){return[t/Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),e,t]}(e,.9*R)}),F){var G=s.bulletPadding,Y=1-s.bulletNumberDomainSize+G;d=C.l+(Y+(1-Y)*m[E])*C.w,M=function(e){return k(e,(s.bulletNumberDomainSize-G)*C.w,C.h)}}}else d=C.l+m[E]*C.w,M=function(e){return k(e,C.w,C.h)};!function(e,t,a,l){var r,s,d,h=a[0].trace,g=l.numbersX,y=l.numbersY,k=h.align||"center",S=f[k],M=l.transitionOpts,z=l.onComplete,A=i.ensureSingle(t,"g","numbers"),N=[];h._hasNumber&&N.push("number"),h._hasDelta&&(N.push("delta"),"left"===h.delta.position&&N.reverse());var j=A.selectAll("text").data(N);function D(t,a,n,i){if(!t.match("s")||n>=0==i>=0||a(n).slice(-1).match(b)||a(i).slice(-1).match(b))return a;var l=t.slice().replace("s","f").replace(/\d+/,(function(e){return parseInt(e)-1})),r=x(e,{tickformat:l});return function(e){return Math.abs(e)<1?u.tickText(r,e).text:a(e)}}j.enter().append("text"),j.attr("text-anchor",(function(){return S})).attr("class",(function(e){return e})).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),j.exit().remove();var O,F=h.mode+h.align;if(h._hasDelta&&(O=function(){var t=x(e,{tickformat:h.delta.valueformat},h._range);t.setScale(),u.prepTicks(t);var i=function(e){return u.tickText(t,e).text},l=function(e){return h.delta.relative?e.relativeDelta:e.delta},r=function(e,t){return 0===e||"number"!=typeof e||isNaN(e)?"-":(e>0?h.delta.increasing.symbol:h.delta.decreasing.symbol)+t(e)},d=function(e){return e.delta>=0?h.delta.increasing.color:h.delta.decreasing.color};void 0===h._deltaLastValue&&(h._deltaLastValue=l(a[0]));var g=A.select("text.delta");function f(){g.text(r(l(a[0]),i)).call(p.fill,d(a[0])).call(c.convertToTspans,e)}return g.call(o.font,h.delta.font).call(p.fill,d({delta:h._deltaLastValue})),v(M)?g.transition().duration(M.duration).ease(M.easing).tween("text",(function(){var e=n.select(this),t=l(a[0]),o=h._deltaLastValue,s=D(h.delta.valueformat,i,o,t),c=n.interpolateNumber(o,t);return h._deltaLastValue=t,function(t){e.text(r(c(t),s)),e.call(p.fill,d({delta:c(t)}))}})).each("end",(function(){f(),z&&z()})).each("interrupt",(function(){f(),z&&z()})):f(),s=w(r(l(a[0]),i),h.delta.font,S,e),g}(),F+=h.delta.position+h.delta.font.size+h.delta.font.family+h.delta.valueformat,F+=h.delta.increasing.symbol+h.delta.decreasing.symbol,d=s),h._hasNumber&&(function(){var t=x(e,{tickformat:h.number.valueformat},h._range);t.setScale(),u.prepTicks(t);var i=function(e){return u.tickText(t,e).text},l=h.number.suffix,s=h.number.prefix,d=A.select("text.number");function g(){var t="number"==typeof a[0].y?s+i(a[0].y)+l:"-";d.text(t).call(o.font,h.number.font).call(c.convertToTspans,e)}v(M)?d.transition().duration(M.duration).ease(M.easing).each("end",(function(){g(),z&&z()})).each("interrupt",(function(){g(),z&&z()})).attrTween("text",(function(){var e=n.select(this),t=n.interpolateNumber(a[0].lastY,a[0].y);h._lastValue=a[0].y;var r=D(h.number.valueformat,i,a[0].lastY,a[0].y);return function(a){e.text(s+r(t(a))+l)}})):g(),r=w(s+i(a[0].y)+l,h.number.font,S,e)}(),F+=h.number.font.size+h.number.font.family+h.number.valueformat+h.number.suffix+h.number.prefix,d=r),h._hasDelta&&h._hasNumber){var L,C,I=[(r.left+r.right)/2,(r.top+r.bottom)/2],P=[(s.left+s.right)/2,(s.top+s.bottom)/2],B=.75*h.delta.font.size;"left"===h.delta.position&&(L=_(h,"deltaPos",0,-1*(r.width*m[h.align]+s.width*(1-m[h.align])+B),F,Math.min),C=I[1]-P[1],d={width:r.width+s.width+B,height:Math.max(r.height,s.height),left:s.left+L,right:r.right,top:Math.min(r.top,s.top+C),bottom:Math.max(r.bottom,s.bottom+C)}),"right"===h.delta.position&&(L=_(h,"deltaPos",0,r.width*(1-m[h.align])+s.width*m[h.align]+B,F,Math.max),C=I[1]-P[1],d={width:r.width+s.width+B,height:Math.max(r.height,s.height),left:r.left,right:s.right+L,top:Math.min(r.top,s.top+C),bottom:Math.max(r.bottom,s.bottom+C)}),"bottom"===h.delta.position&&(L=null,C=s.height,d={width:Math.max(r.width,s.width),height:r.height+s.height,left:Math.min(r.left,s.left),right:Math.max(r.right,s.right),top:r.bottom-r.height,bottom:r.bottom+s.height}),"top"===h.delta.position&&(L=null,C=r.top,d={width:Math.max(r.width,s.width),height:r.height+s.height,left:Math.min(r.left,s.left),right:Math.max(r.right,s.right),top:r.bottom-r.height-s.height,bottom:r.bottom}),O.attr({dx:L,dy:C})}(h._hasNumber||h._hasDelta)&&A.attr("transform",(function(){var e=l.numbersScaler(d);F+=e[2];var t,a=_(h,"numbersScale",1,e[0],F,Math.min);h._scaleNumbers||(a=1),t=h._isAngular?y-a*d.bottom:y-a*(d.top+d.bottom)/2,h._numbersTop=a*d.top+t;var n=d[k];"center"===k&&(n=(d.left+d.right)/2);var i=g-a*n;return T(i=_(h,"numbersTranslate",0,i,F,Math.max),t)+" scale("+a+")"}))}(e,j,t,{numbersX:d,numbersY:S,numbersScaler:M,transitionOpts:a,onComplete:h}),D&&(z={range:N.gauge.axis.range,color:N.gauge.bgcolor,line:{color:N.gauge.bordercolor,width:0},thickness:1},A={range:N.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:N.gauge.bordercolor,width:N.gauge.borderwidth},thickness:1});var V=j.selectAll("g.angular").data(O?t:[]);V.exit().remove();var H=j.selectAll("g.angularaxis").data(O?t:[]);H.exit().remove(),O&&function(e,t,a,i){var o,s,c,d,h=a[0].trace,g=i.size,p=i.radius,f=i.innerRadius,m=i.gaugeBg,b=i.gaugeOutline,k=[g.l+g.w/2,g.t+g.h/2+p/2],w=i.gauge,_=i.layer,S=i.transitionOpts,M=i.onComplete,z=Math.PI/2;function A(e){var t=h.gauge.axis.range[0],a=(e-t)/(h.gauge.axis.range[1]-t)*Math.PI-z;return a<-z?-z:a>z?z:a}function N(e){return n.svg.arc().innerRadius((f+p)/2-e/2*(p-f)).outerRadius((f+p)/2+e/2*(p-f)).startAngle(-z)}function j(e){e.attr("d",(function(e){return N(e.thickness).startAngle(A(e.range[0])).endAngle(A(e.range[1]))()}))}w.enter().append("g").classed("angular",!0),w.attr("transform",T(k[0],k[1])),_.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),_.selectAll("g.xangularaxistick,path,text").remove(),(o=x(e,h.gauge.axis)).type="linear",o.range=h.gauge.axis.range,o._id="xangularaxis",o.setScale();var D=function(e){return(o.range[0]-e.x)/(o.range[1]-o.range[0])*Math.PI+Math.PI},O={},F=u.makeLabelFns(o,0).labelStandoff;O.xFn=function(e){var t=D(e);return Math.cos(t)*F},O.yFn=function(e){var t=D(e),a=Math.sin(t)>0?.2:1;return-Math.sin(t)*(F+e.fontSize*a)+Math.abs(Math.cos(t))*(e.fontSize*r)},O.anchorFn=function(e){var t=D(e),a=Math.cos(t);return Math.abs(a)<.1?"middle":a>0?"start":"end"},O.heightFn=function(e,t,a){var n=D(e);return-.5*(1+Math.sin(n))*a};var L=function(e){return T(k[0]+p*Math.cos(e),k[1]-p*Math.sin(e))};c=function(e){return L(D(e))};if(s=u.calcTicks(o),d=u.getTickSigns(o)[2],o.visible){d="inside"===o.ticks?-1:1;var C=(o.linewidth||1)/2;u.drawTicks(e,o,{vals:s,layer:_,path:"M"+d*C+",0h"+d*o.ticklen,transFn:function(e){var t=D(e);return L(t)+"rotate("+-l(t)+")"}}),u.drawLabels(e,o,{vals:s,layer:_,transFn:c,labelFns:O})}var I=[m].concat(h.gauge.steps),P=w.selectAll("g.bg-arc").data(I);P.enter().append("g").classed("bg-arc",!0).append("path"),P.select("path").call(j).call(y),P.exit().remove();var B=N(h.gauge.bar.thickness),R=w.selectAll("g.value-arc").data([h.gauge.bar]);R.enter().append("g").classed("value-arc",!0).append("path");var E,G,Y,V=R.select("path");v(S)?(V.transition().duration(S.duration).ease(S.easing).each("end",(function(){M&&M()})).each("interrupt",(function(){M&&M()})).attrTween("d",(E=B,G=A(a[0].lastY),Y=A(a[0].y),function(){var e=n.interpolate(G,Y);return function(t){return E.endAngle(e(t))()}})),h._lastValue=a[0].y):V.attr("d","number"==typeof a[0].y?B.endAngle(A(a[0].y)):"M0,0Z"),V.call(y),R.exit().remove(),I=[];var H=h.gauge.threshold.value;H&&I.push({range:[H,H],color:h.gauge.threshold.color,line:{color:h.gauge.threshold.line.color,width:h.gauge.threshold.line.width},thickness:h.gauge.threshold.thickness});var X=w.selectAll("g.threshold-arc").data(I);X.enter().append("g").classed("threshold-arc",!0).append("path"),X.select("path").call(j).call(y),X.exit().remove();var Z=w.selectAll("g.gauge-outline").data([b]);Z.enter().append("g").classed("gauge-outline",!0).append("path"),Z.select("path").call(j).call(y),Z.exit().remove()}(e,0,t,{radius:B,innerRadius:R,gauge:V,layer:H,size:C,gaugeBg:z,gaugeOutline:A,transitionOpts:a,onComplete:h});var X=j.selectAll("g.bullet").data(F?t:[]);X.exit().remove();var Z=j.selectAll("g.bulletaxis").data(F?t:[]);Z.exit().remove(),F&&function(e,t,a,n){var i,l,r,o,c,d=a[0].trace,h=n.gauge,g=n.layer,f=n.gaugeBg,m=n.gaugeOutline,b=n.size,T=d.domain,k=n.transitionOpts,w=n.onComplete;h.enter().append("g").classed("bullet",!0),h.attr("transform","translate("+b.l+", "+b.t+")"),g.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),g.selectAll("g.xbulletaxistick,path,text").remove();var _=b.h,S=d.gauge.bar.thickness*_,M=T.x[0],z=T.x[0]+(T.x[1]-T.x[0])*(d._hasNumber||d._hasDelta?1-s.bulletNumberDomainSize:1);function A(e){e.attr("width",(function(e){return Math.max(0,i.c2p(e.range[1])-i.c2p(e.range[0]))})).attr("x",(function(e){return i.c2p(e.range[0])})).attr("y",(function(e){return.5*(1-e.thickness)*_})).attr("height",(function(e){return e.thickness*_}))}(i=x(e,d.gauge.axis))._id="xbulletaxis",i.domain=[M,z],i.setScale(),l=u.calcTicks(i),r=u.makeTransFn(i),o=u.getTickSigns(i)[2],c=b.t+b.h,i.visible&&(u.drawTicks(e,i,{vals:"inside"===i.ticks?u.clipEnds(i,l):l,layer:g,path:u.makeTickPath(i,c,o),transFn:r}),u.drawLabels(e,i,{vals:l,layer:g,transFn:r,labelFns:u.makeLabelFns(i,c)}));var N=[f].concat(d.gauge.steps),j=h.selectAll("g.bg-bullet").data(N);j.enter().append("g").classed("bg-bullet",!0).append("rect"),j.select("rect").call(A).call(y),j.exit().remove();var D=h.selectAll("g.value-bullet").data([d.gauge.bar]);D.enter().append("g").classed("value-bullet",!0).append("rect"),D.select("rect").attr("height",S).attr("y",(_-S)/2).call(y),v(k)?D.select("rect").transition().duration(k.duration).ease(k.easing).each("end",(function(){w&&w()})).each("interrupt",(function(){w&&w()})).attr("width",Math.max(0,i.c2p(Math.min(d.gauge.axis.range[1],a[0].y)))):D.select("rect").attr("width","number"==typeof a[0].y?Math.max(0,i.c2p(Math.min(d.gauge.axis.range[1],a[0].y))):0),D.exit().remove();var O=a.filter((function(){return d.gauge.threshold.value})),F=h.selectAll("g.threshold-bullet").data(O);F.enter().append("g").classed("threshold-bullet",!0).append("line"),F.select("line").attr("x1",i.c2p(d.gauge.threshold.value)).attr("x2",i.c2p(d.gauge.threshold.value)).attr("y1",(1-d.gauge.threshold.thickness)/2*_).attr("y2",(1-(1-d.gauge.threshold.thickness)/2)*_).call(p.stroke,d.gauge.threshold.line.color).style("stroke-width",d.gauge.threshold.line.width),F.exit().remove();var L=h.selectAll("g.gauge-outline").data([m]);L.enter().append("g").classed("gauge-outline",!0).append("rect"),L.select("rect").call(A).call(y),L.exit().remove()}(e,0,t,{gauge:X,layer:Z,size:C,gaugeBg:z,gaugeOutline:A,transitionOpts:a,onComplete:h});var q=j.selectAll("text.title").data(t);q.exit().remove(),q.enter().append("text").classed("title",!0),q.attr("text-anchor",(function(){return F?f.right:f[N.title.align]})).text(N.title.text).call(o.font,N.title.font).call(c.convertToTspans,e),q.attr("transform",(function(){var e,t=C.l+C.w*m[N.title.align],a=s.titlePadding,n=o.bBox(q.node());return D?(O&&(e=N.gauge.axis.visible?o.bBox(H.node()).top-a-n.bottom:C.t+C.h/2-B/2-n.bottom-a),F&&(e=S-(n.top+n.bottom)/2,t=C.l-s.bulletPadding*C.w)):e=N._numbersTop-a-n.bottom,T(t,e)}))}))}}}]);