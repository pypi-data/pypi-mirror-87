(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{151:function(e,t,n){e.exports=n(240)},156:function(e,t,n){},158:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),o=n.n(c),s=(n(156),n(22)),i=n(41),u=n(241),l=n(102),d=n(244),m=n(61),f=n(118),h=n(243),p=n(248),b=n(249),E=n(253),O=(n(157),n(158),n(242)),v=n(247),j=function(e){return{type:"ADD_SOURCES",sources:e}},y=function(e){return{type:"SET_SELECTED_SOURCE",source:e}},g=function(e){return{type:"UPDATE_SOURCE",source:e}},S=function(e){return{type:"UPDATE_NODE",node:e}},w=n(57),k=n.n(w),C=n(77),T=function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a,r,c,o,s,i,u,l,d,m;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,a=t.url,r=t.body,c=t.params,o=t.resolve,s=t.reject,i=t.onStart,u=t.onFinish,i&&i(),c&&(a="".concat(a,"?").concat(new URLSearchParams(c).toString())),e.prev=3,e.next=6,fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 6:if((l=e.sent).ok){e.next=12;break}return e.next=10,l.json();case 10:throw d=e.sent,new Error("".concat(l.statusText,": ").concat(d.detail));case 12:return e.next=14,l.json();case 14:m=e.sent,o(m),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),s(e.t0.message);case 21:u&&u();case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),D=n(250),x=n(251),P=n(252),L=function(e){var t=e.dispatch,n=e.node,c=e.page,o=void 0===c?"table":c,u=Object(a.useState)(!1),l=Object(i.a)(u,2),d=l[0],f=l[1];return r.a.createElement(m.a,{onClick:function(){T({method:"POST",url:"/node/view/",body:n,resolve:function(e){!function(e){try{window.open(e)}catch(t){}}("charts"===o?e.dtaleChartsUrl:e.dtaleUrl),t(S(e))},reject:function(e){return t(S(Object(s.a)(Object(s.a)({},n),{},{error:e})))},onStart:function(){return f(!0)},onFinish:function(){return f(!1)}})},loading:d,icon:"charts"===o?r.a.createElement(D.a,null):r.a.createElement(x.a,null)},"".concat("charts"===o?"Charts":"Table"))},U=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(L,{dispatch:t,node:n,page:"table"})},_=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(L,{dispatch:t,node:n,page:"charts"})},I=function(e){var t=e.dispatch,n=e.node,c=Object(a.useState)(!1),o=Object(i.a)(c,2),u=o[0],l=o[1];return r.a.createElement(m.a,{onClick:function(){l(!0),fetch("node/kill/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){t(S(e)),l(!1)})).catch((function(e){var a=Object(s.a)(Object(s.a)({},n),{},{error:e});t(S(a)),l(!0)}))},disabled:!n.dtaleUrl,loading:u,icon:r.a.createElement(P.a,null)})},N=function(e){var t=e.dispatch,n=e.source,c=Object(a.useState)(!1),o=Object(i.a)(c,2),s=o[0];o[1];return s?r.a.createElement(f.a,null):r.a.createElement(O.b,{size:"small",bordered:!0,dataSource:Object.values(n.nodes),renderItem:function(e){return r.a.createElement(O.b.Item,{actions:[r.a.createElement(U,{dispatch:t,node:e}),r.a.createElement(_,{dispatch:t,node:e}),r.a.createElement(I,{dispatch:t,node:e})]},r.a.createElement(O.b.Item.Meta,{title:e.path,description:e.error?r.a.createElement(v.a,{type:"error",message:e.error,closable:!0}):e.dtaleUrl||null}))}})},R=n(246),A=n(245),F=n(148),z=n(134),J=n.n(z),B=(n(226),n(227),function(e){var t=e.name,n=e.value,a=e.onChange,c=e.width,o=e.theme,s=void 0===o?"monokai":o,i=e.maxLines,u=void 0===i?20:i,l=e.minLines,d=void 0===l?4:l,m=e.editorProps,f=void 0===m?{$blockScrolling:!0}:m,h=e.wrapEnabled,p=void 0===h||h,b=Object(F.a)(e,["name","value","onChange","width","theme","maxLines","minLines","editorProps","wrapEnabled"]);return r.a.createElement(J.a,Object.assign({mode:"python",name:t,value:n,onChange:a,width:c,theme:s,maxLines:u,minLines:d,editorProps:f,wrapEnabled:p},b))}),G=function(e){var t=e.text;return r.a.createElement("div",{style:{marginTop:5,marginBottom:5}},t)},K=function(e){var t=e.source,n=e.dispatch,c=Object(a.useState)(null),o=Object(i.a)(c,2),u=o[0],l=o[1],d=""!==t.name?"edit":"new",f=Object(s.a)({},t),h=function(){var e=["name","listPaths","getData"],n=e.filter((function(e){return!f[e]}));return n.length>0?(l("Fill out the required fields: ".concat(n.join(", "))),!1):"edit"!==d||!e.every((function(e){return f[e]===t[e]}))||(l("No changes were made"),!1)},p=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h()&&T({method:"POST",url:"/source/create/",body:f,resolve:function(e){n(j([e])),n(y(null))},reject:function(e){return l(e)}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h()&&T({method:"POST",url:"/source/update/",body:f,resolve:function(e){n(g(e)),n(y(null))},reject:function(e){return l(e)}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(R.a,{title:"new"===d?"Add Data Source":"Edit Data Source",width:720,onClose:function(){return n(y(null))},visible:!0},u?r.a.createElement(v.a,{type:"error",message:u,closable:!0,onClose:function(){return l(null)}}):null,r.a.createElement(G,{text:"Name"}),r.a.createElement(A.a,{defaultValue:f.name,onChange:function(e){f.name=e.target.value},size:"small"}),r.a.createElement(G,{text:"list_paths.py"}),r.a.createElement(B,{name:"list_paths_code",value:f.listPaths,onChange:function(e){f.listPaths=e},width:"600",maxLines:16,minLines:16}),r.a.createElement(G,{text:"get_data.py"}),r.a.createElement(B,{name:"get_data_code",value:f.getData,onChange:function(e){f.getData=e},width:"600",maxLines:16,minLines:16}),r.a.createElement(m.a,{type:"primary",block:!0,style:{marginTop:10},onClick:function(){"new"===d?p():b()}},"Submit"))},M=n(103);function W(e,t){switch(t.type){case"ADD_SOURCES":return Object(s.a)(Object(s.a)({},e),{},{sources:[].concat(Object(M.a)(t.sources),Object(M.a)(e.sources||[]))});case"SET_SELECTED_SOURCE":return Object(s.a)(Object(s.a)({},e),{},{selectedSource:t.source});case"UPDATE_SOURCE":return Object(s.a)(Object(s.a)({},e),{},{sources:e.sources.map((function(e){return e.id===t.source.id?t.source:e}))});case"UPDATE_NODE":return Object(s.a)(Object(s.a)({},e),{},{sources:e.sources.map((function(e){return e.id===t.node.sourceId?(n=e,a=t.node,Object(s.a)(Object(s.a)({},n),{},{nodes:Object.fromEntries(Object.entries(n.nodes).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return r.dataId===a.dataId?[n,a]:[n,r]})))})):e;var n,a}))});default:return Object(s.a)(Object(s.a)({},e),{},{sources:e.sources||[]})}}var $={sources:void 0,selectedSource:null},q=u.a.Header,H=(u.a.Footer,u.a.Sider,u.a.Content),V=function(){var e=Object(a.useReducer)(W,$),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){T({method:"GET",url:"/source/list/",resolve:function(e){return c(j(e))},reject:function(e){return null}})}),[]);var o=function(e){c(g(Object(s.a)(Object(s.a)({},e),{},{loading:!0}))),T({method:"POST",url:"/source/nodes/list/",body:e,resolve:function(e){return c(g(Object(s.a)(Object(s.a)({},e),{},{loading:!1})))},reject:function(t){return c(g(Object(s.a)(Object(s.a)({},e),{},{loading:!1})))}})};return Object(a.useEffect)((function(){void 0!==n.sources&&n.sources.filter((function(e){return!e.nodesFullyLoaded&&!e.loading&&0===Object.keys(e.nodes||{}).length})).forEach((function(e){o(e)}))}),[n.sources]),r.a.createElement(u.a,{className:"layout"},r.a.createElement(q,{style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement(l.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["sources"]},r.a.createElement(l.a.Item,{key:"sources"},"Data Sources"),r.a.createElement(l.a.Item,{key:"instances"},"D-Tale Instances"))),r.a.createElement(H,{style:{width:"100vw",marginTop:64}},r.a.createElement(d.a,{title:"Data Sources",className:"site-page-header",subTitle:"This is a subtitle",extra:[r.a.createElement(m.a,{key:"newDataSource",type:"primary",onClick:function(){c(y({id:"",name:"",packageName:"",nodes:{},nodesFullyLoaded:!1,visible:!0,listPaths:'def main():\n    """\n    Return a list of paths identifying where the data is located.\n    Typically for file paths, URLs, or database connection strings.\n    """\n    return []\n',getData:'import pandas as pd\n\n\ndef main(path: str) -> pd.DataFrame:\n    """\n    Given a path, retrieve that data and return it as a pandas dataframe\n    """\n    raise NotImplementedError()\n\n'}))}},"Add Data Source")]}),r.a.createElement("div",{style:{width:"100%"}},void 0===n.sources?r.a.createElement(f.a,null):r.a.createElement(h.a,{defaultActiveKey:[]},n.sources.map((function(e){return r.a.createElement(h.a.Panel,{key:e.id,disabled:e.loading,header:r.a.createElement(p.b,null,r.a.createElement("span",null,e.name),r.a.createElement(b.a,null,e.loading?r.a.createElement(f.a,{size:"small"}):"".concat(Object.keys(e.nodes).length," results")),e.nodesFullyLoaded?null:r.a.createElement(m.a,{key:"".concat(e.id,"loadmore"),size:"small",onClick:function(t){t.stopPropagation(),o(e)}},"Load more")),extra:[r.a.createElement(E.a,{key:"".concat(e.id,"settings"),onClick:function(t){t.stopPropagation(),c(y(e))}})]},r.a.createElement(N,{dispatch:c,source:e}))})))),n.selectedSource?r.a.createElement(K,{source:n.selectedSource,dispatch:c}):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[151,1,2]]]);
//# sourceMappingURL=main.855fe9bf.chunk.js.map