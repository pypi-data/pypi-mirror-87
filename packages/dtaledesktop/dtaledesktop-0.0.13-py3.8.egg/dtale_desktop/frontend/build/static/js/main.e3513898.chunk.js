(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{149:function(e,t,n){e.exports=n(238)},154:function(e,t,n){},156:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),o=n.n(c),i=(n(154),n(22)),s=n(48),l=n(239),u=n(241),d=n(61),m=n(131),f=n(242),p=n(246),h=n(247),b=n(251),E=(n(155),n(156),n(245)),v=n(240),O=function(e){return{type:"ADD_SOURCES",sources:e}},j=function(e){return{type:"SET_SELECTED_SOURCE",source:e}},g=function(e){return{type:"UPDATE_SOURCE",source:e}},y=function(e){return{type:"UPDATE_NODE",node:e}},w=n(57),S=n.n(w),k=n(77),C=function(){var e=Object(k.a)(S.a.mark((function e(t){var n,a,r,c,o,i,s,l,u,d,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,a=t.url,r=t.body,c=t.params,o=t.resolve,i=t.reject,s=t.onStart,l=t.onFinish,s&&s(),c&&(a="".concat(a,"?").concat(new URLSearchParams(c).toString())),e.prev=3,e.next=6,fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 6:if((u=e.sent).ok){e.next=12;break}return e.next=10,u.json();case 10:throw d=e.sent,new Error("".concat(u.statusText,": ").concat(d.detail));case 12:return e.next=14,u.json();case 14:m=e.sent,o(m),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),i(e.t0.message);case 21:l&&l();case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),D=n(248),T=n(249),x=n(250),P=function(e){var t=e.dispatch,n=e.node,c=e.page,o=void 0===c?"table":c,l=Object(a.useState)(!1),u=Object(s.a)(l,2),m=u[0],f=u[1];return r.a.createElement(d.a,{onClick:function(){C({method:"POST",url:"/node/view/",body:n,resolve:function(e){!function(e){try{window.open(e)}catch(t){}}("charts"===o?e.dtaleChartsUrl:e.dtaleUrl),t(y(e))},reject:function(e){return t(y(Object(i.a)(Object(i.a)({},n),{},{error:e})))},onStart:function(){return f(!0)},onFinish:function(){return f(!1)}})},loading:m,icon:"charts"===o?r.a.createElement(D.a,null):r.a.createElement(T.a,null)},"".concat("charts"===o?"Charts":"Table"))},L=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(P,{dispatch:t,node:n,page:"table"})},U=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(P,{dispatch:t,node:n,page:"charts"})},_=function(e){var t=e.dispatch,n=e.node,c=Object(a.useState)(!1),o=Object(s.a)(c,2),l=o[0],u=o[1];return r.a.createElement(d.a,{title:"shut down",onClick:function(){u(!0),fetch("node/kill/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){t(y(e)),u(!1)})).catch((function(e){var a=Object(i.a)(Object(i.a)({},n),{},{error:e});t(y(a)),u(!0)}))},disabled:!n.dtaleUrl,loading:l,icon:r.a.createElement(x.a,null)})},I=function(e){var t=e.error,n=e.dtaleUrl;return t?r.a.createElement(E.a,{type:"error",message:t,closable:!0}):n?r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n):null},N=function(e){var t=e.dispatch,n=e.source;return r.a.createElement(v.b,{size:"small",bordered:!0,dataSource:Object.values(n.nodes),renderItem:function(e){return r.a.createElement(v.b.Item,{actions:[r.a.createElement(L,{dispatch:t,node:e}),r.a.createElement(U,{dispatch:t,node:e}),r.a.createElement(_,{dispatch:t,node:e})]},r.a.createElement(v.b.Item.Meta,{title:e.path,description:r.a.createElement(I,e)}))}})},R=n(83),A=n(244),F=n(243),z=n(133),J=n.n(z),B=(n(224),n(225),function(e){var t=e.name,n=e.value,a=e.onChange,c=e.width,o=e.theme,i=void 0===o?"monokai":o,s=e.maxLines,l=void 0===s?20:s,u=e.minLines,d=void 0===u?4:u,m=e.editorProps,f=void 0===m?{$blockScrolling:!0}:m,p=e.wrapEnabled,h=void 0===p||p,b=Object(R.a)(e,["name","value","onChange","width","theme","maxLines","minLines","editorProps","wrapEnabled"]);return r.a.createElement(J.a,Object.assign({mode:"python",name:t,value:n,onChange:a,width:c,theme:i,maxLines:l,minLines:d,editorProps:f,wrapEnabled:h},b))}),G=function(e){var t=e.text;return r.a.createElement("div",{style:{marginTop:5,marginBottom:5}},t)},M=function(e){var t=e.source,n=e.dispatch,c=Object(a.useState)(null),o=Object(s.a)(c,2),l=o[0],u=o[1],m=""!==t.name?"edit":"new",f=Object(i.a)({},t),p=function(){var e=["name","listPaths","getData"],n=e.filter((function(e){return!f[e]}));return n.length>0?(u("Fill out the required fields: ".concat(n.join(", "))),!1):"edit"!==m||!e.every((function(e){return f[e]===t[e]}))||(u("No changes were made"),!1)},h=function(){var e=Object(k.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p()&&(f.nodes,t=Object(R.a)(f,["nodes"]),C({method:"POST",url:"/source/create/",body:t,resolve:function(e){n(O([e])),n(j(null))},reject:function(e){return u(e)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(k.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p()&&(f.nodes,t=Object(R.a)(f,["nodes"]),C({method:"POST",url:"/source/update/",body:t,resolve:function(e){n(g(e)),n(j(null))},reject:function(e){return u(e)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{title:"new"===m?"Add Data Source":"Edit Data Source",width:720,onClose:function(){return n(j(null))},visible:!0},l?r.a.createElement(E.a,{type:"error",message:l,closable:!0,onClose:function(){return u(null)}}):null,r.a.createElement(G,{text:"Name"}),r.a.createElement(F.a,{disabled:!t.editable,defaultValue:f.name,onChange:function(e){f.name=e.target.value},size:"small"}),r.a.createElement(G,{text:"list_paths.py"}),r.a.createElement(B,{readOnly:!t.editable,name:"list_paths_code",value:f.listPaths,onChange:function(e){f.listPaths=e},width:"600",maxLines:16,minLines:16}),r.a.createElement(G,{text:"get_data.py"}),r.a.createElement(B,{readOnly:!t.editable,name:"get_data_code",value:f.getData,onChange:function(e){f.getData=e},width:"600",maxLines:16,minLines:16}),t.editable?r.a.createElement(d.a,{type:"primary",block:!0,style:{marginTop:10},onClick:function(){"new"===m?h():b()}},"Submit"):null)},W=n(102);function $(e,t){switch(t.type){case"ADD_SOURCES":return Object(i.a)(Object(i.a)({},e),{},{sources:[].concat(Object(W.a)(t.sources),Object(W.a)(e.sources||[]))});case"SET_SELECTED_SOURCE":return Object(i.a)(Object(i.a)({},e),{},{selectedSource:t.source});case"UPDATE_SOURCE":return Object(i.a)(Object(i.a)({},e),{},{sources:e.sources.map((function(e){return e.id===t.source.id?t.source:e}))});case"UPDATE_NODE":return Object(i.a)(Object(i.a)({},e),{},{sources:e.sources.map((function(e){return e.id===t.node.sourceId?(n=e,a=t.node,Object(i.a)(Object(i.a)({},n),{},{nodes:Object.fromEntries(Object.entries(n.nodes).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return r.dataId===a.dataId?[n,a]:[n,r]})))})):e;var n,a}))});default:return Object(i.a)(Object(i.a)({},e),{},{sources:e.sources||[]})}}var q={sources:void 0,selectedSource:null},K=l.a.Content,V=function(){var e=Object(a.useReducer)($,q),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){C({method:"GET",url:"/source/list/",resolve:function(e){return c(O(e))},reject:function(e){return null}})}),[]);var o=function(e){c(g(Object(i.a)(Object(i.a)({},e),{},{loading:!0}))),C({method:"POST",url:"/source/nodes/list/",body:e,resolve:function(e){return c(g(Object(i.a)(Object(i.a)({},e),{},{loading:!1})))},reject:function(t){return c(g(Object(i.a)(Object(i.a)({},e),{},{loading:!1})))}})};return Object(a.useEffect)((function(){void 0!==n.sources&&n.sources.filter((function(e){return!e.nodesFullyLoaded&&!e.loading&&0===Object.keys(e.nodes||{}).length})).forEach((function(e){o(e)}))}),[n.sources]),r.a.createElement(l.a,{className:"layout"},r.a.createElement(K,{style:{width:"100vw"}},r.a.createElement(u.a,{title:"D-Tale Desktop",className:"site-page-header",subTitle:"",extra:[r.a.createElement(d.a,{key:"newDataSource",type:"primary",onClick:function(){c(j({id:"",name:"",packageName:"",nodes:{},nodesFullyLoaded:!1,visible:!0,editable:!0,listPaths:'from typing import Iterable\n\n\ndef main() -> Iterable[str]:\n    """\n    Return an iterable of paths identifying where data is located, such as file paths or URLs.\n    These paths will be passed to your function in get_data.py.\n    """\n    raise NotImplementedError()\n',getData:'import pandas as pd\n\n\ndef main(path: str) -> pd.DataFrame:\n    """\n    Given a path, retrieve that data and return it as a pandas dataframe\n    """\n    raise NotImplementedError()\n',saveData:""}))}},"Add Data Source")]}),r.a.createElement("div",{style:{width:"100%"}},void 0===n.sources?r.a.createElement(m.a,null):r.a.createElement(f.a,{defaultActiveKey:[]},n.sources.map((function(e){return r.a.createElement(f.a.Panel,{key:e.id,disabled:e.loading,header:r.a.createElement(p.b,null,r.a.createElement("span",null,e.name),r.a.createElement(h.a,null,e.loading?r.a.createElement(m.a,{size:"small"}):"".concat(Object.keys(e.nodes).length," results")),Object.values(e.nodes||{}).some((function(e){return e.dtaleUrl}))?r.a.createElement(h.a,{color:"green"},"".concat(Object.values(e.nodes).filter((function(e){return e.dtaleUrl})).length," active")):null,e.nodesFullyLoaded?null:r.a.createElement(d.a,{key:"".concat(e.id,"loadmore"),size:"small",onClick:function(t){t.stopPropagation(),o(e)}},"Load more")),extra:r.a.createElement(d.a,{icon:r.a.createElement(b.a,null),onClick:function(t){t.stopPropagation(),c(j(e))}},"Settings")},r.a.createElement(N,{dispatch:c,source:e}))})))),n.selectedSource?r.a.createElement(M,{source:n.selectedSource,dispatch:c}):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[149,1,2]]]);
//# sourceMappingURL=main.e3513898.chunk.js.map