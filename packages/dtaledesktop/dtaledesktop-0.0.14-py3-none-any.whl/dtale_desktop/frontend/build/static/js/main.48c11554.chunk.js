(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{179:function(e,t,n){e.exports=n(278)},184:function(e,t,n){},186:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),i=n.n(o),c=(n(184),n(38)),l=(n(185),n(186),n(51)),u=n(279),s=n(281),d=n(289),m=n(54),p=n(158),f=n(299),h=n(300),g=function(e){return{type:"SET_SELECTED_SOURCE",source:e}},b=function(e,t){return{type:"SET_SOURCE_UPDATING",sourceId:e,updating:t}},E=function(e,t){return{type:"SET_NODE_UPDATING",dataId:e,updating:t}},v=function(e){return{type:"SET_OPEN_MODAL",modal:e}},O=n(53),y=n(288),j=n(283),S=n(176),w=n(280),k=n(296),C=n(297),D=n(282),T=n(286),P=n(291),I=n(292),x=n(293),_=n(294),A=n(295),L=n(72),N=String(Date.now()),U=function(e){var t=e.dispatch,n=e.url,a=e.method,r=e.body,o=e.params,i=e.onStart,c=e.onFinish,l=e.onAfterResolve,u=e.errorHandler;i&&i(),o&&(n="".concat(n,"?").concat(new URLSearchParams(o).toString())),fetch(n,{method:a||(r?"POST":"GET"),headers:{"Content-Type":"application/json","Client-Id":N},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){Array.isArray(e)?e.forEach((function(e){return t(e)})):t(e),l&&l(e)})).catch((function(e){return u?u(e):alert(e)})).finally((function(){c&&c()}))},R=function(e,t,n){return U({dispatch:e,url:"/source/".concat(t,"/load-nodes/"),params:void 0===n?{}:{limit:n},onStart:function(){return e(b(t,!0))},onFinish:function(){return e(b(t,!1))}})},F={table:"dtaleUrl",charts:"dtaleChartsUrl",describe:"dtaleDescribeUrl",correlations:"dtaleCorrelationsUrl"},z=function(e){var t=new WebSocket(function(){var e=window.location.host,t="https:"===window.location.protocol?"wss:":"ws:";return"".concat(t,"//").concat(e,"/ws/").concat(N,"/")}());return t.onmessage=function(t){var n=JSON.parse(t.data);"action"===n.type?Array.isArray(n.payload)?n.payload.forEach((function(t){return e(t)})):e(n.payload):"notification"===n.type&&alert(n.payload)},t};function V(){var e=Object(l.a)(["\n  .clear-cache-button {\n    border: none;\n    background: none;\n    padding: 0;\n    margin-left: 5px;\n    cursor: pointer;\n  }\n  .cache-placeholder {\n    color: transparent;\n  }\n"]);return V=function(){return e},e}function B(){var e=Object(l.a)(['\n  margin-top: 0;\n  margin-bottom: auto;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: 5px;\n  grid-template-areas:\n    "buttons"\n    "link";\n  .node-action-buttons {\n    grid-area: "buttons";\n    align-self: end;\n    margin-left: auto;\n    margin-right: 0;\n    button {\n      margin-right: 3px;\n    }\n    button:last-child {\n      margin-right: 0px;\n    }\n  }\n  .node-action-link {\n    grid-area: "link";\n    align-self: end;\n    margin-left: auto;\n    margin-right: 0;\n  }\n  .node-action-link-placeholder {\n    color: transparent;\n  }\n']);return B=function(){return e},e}var G=function(e){var t=e.dispatch,n=e.dataId,o=e.updating,i=e.page,l=e.icon,u=Object(a.useState)(!1),s=Object(c.a)(u,2),d=s[0],p=s[1];return Object(a.useEffect)((function(){d&&!o&&p(!1)}),[o]),r.a.createElement(m.a,{icon:l,style:{textTransform:"capitalize"},size:"small",loading:d,disabled:o&&!d,onClick:function(){p(!0),function(e,t,n){U({dispatch:e,url:"/node/view/".concat(t,"/"),onStart:function(){return e(E(t,!0))},onFinish:function(){return e(E(t,!1))},onAfterResolve:function(e){var t=e.node[F[n]];t&&window.open(t)}})}(t,n,i)}},i)},M=function(e){return r.a.createElement(G,Object.assign({page:"table",icon:r.a.createElement(P.a,null)},e))},W=function(e){return r.a.createElement(G,Object.assign({page:"charts",icon:r.a.createElement(I.a,null)},e))},H=function(e){return r.a.createElement(G,Object.assign({page:"describe",icon:r.a.createElement(x.a,null)},e))},J=function(e){return r.a.createElement(G,Object.assign({page:"correlations",icon:r.a.createElement(_.a,null)},e))},$=function(e){var t=e.dispatch,n=e.dataId,o=e.updating,i=Object(a.useState)(!1),l=Object(c.a)(i,2),u=l[0],s=l[1];return Object(a.useEffect)((function(){u&&!o&&s(!1)}),[o]),r.a.createElement(m.a,{size:"small",loading:u,disabled:o&&!u,onClick:function(){s(!0),function(e,t){window.open("/node/profile-report/".concat(t,"/")),U({dispatch:e,url:"/node/watch-profile-report-builder/".concat(t,"/"),onStart:function(){return e(E(t,!0))},onFinish:function(){return e(E(t,!1))}})}(t,n)},icon:r.a.createElement(A.a,null)},"Profile")},q=function(e){var t=e.dispatch,n=e.dataId,a=e.updating;return r.a.createElement(m.a,{danger:!0,size:"small",title:"shut down",onClick:function(){return function(e,t){return U({dispatch:e,url:"/node/kill/".concat(t,"/"),method:"DELETE",onStart:function(){return e(E(t,!0))},onFinish:function(){return e(E(t,!1))}})}(t,n)},loading:a},"Shut down")},K=O.a.div(B()),Y=function(e){var t=e.node,n=e.settings,a={dispatch:e.dispatch,dataId:t.dataId,updating:t.updating};return r.a.createElement(K,null,r.a.createElement("div",{className:"node-action-buttons"},t.dtaleUrl?r.a.createElement(q,a):null,r.a.createElement(M,a),r.a.createElement(W,a),r.a.createElement(J,a),r.a.createElement(H,a),n.disableProfileReports?null:r.a.createElement($,a)),r.a.createElement("div",{className:"node-action-link"},t.dtaleUrl?r.a.createElement("a",{href:t.dtaleUrl,target:"_blank",rel:"noopener noreferrer"},t.dtaleUrl):r.a.createElement("div",{className:"node-action-link-placeholder"},"...")))},Q=O.a.div(V()),X=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(Q,null,n.lastCachedAt?r.a.createElement(a.Fragment,null,r.a.createElement(j.a.Text,{type:"secondary"},"Cached at ".concat(new Date(n.lastCachedAt).toLocaleString())),r.a.createElement("button",{className:"clear-cache-button",onClick:function(){return function(e,t){return U({dispatch:e,url:"/node/clear-cache/".concat(t,"/"),method:"DELETE"})}(t,n.dataId)}},r.a.createElement(j.a.Text,{type:"danger",underline:!0,className:"clear-cache-button"},"clear cache"))):r.a.createElement("div",{className:"cache-placeholder"},"..."))},Z=function(e){var t=e.nodes,n=e.settings,o=e.dispatch,i=Object(a.useState)(""),l=Object(c.a)(i,2),u=l[0],s=l[1];return r.a.createElement(D.b,{size:"small",header:t.length<10?null:r.a.createElement(T.a.Search,{style:{marginTop:"10px",marginBottom:"10px"},placeholder:"filter",allowClear:!0,onSearch:function(e){return s(e)}}),bordered:!0,dataSource:t.filter((function(e){return e.visible&&(""===u||e.path.includes(u))})),renderItem:function(e){return r.a.createElement(D.b.Item,{actions:[r.a.createElement(Y,{settings:n,dispatch:o,node:e})]},r.a.createElement(D.b.Item.Meta,{title:r.a.createElement(j.a.Text,{ellipsis:!0,style:{maxWidth:"100%"}},e.path),description:e.error?r.a.createElement(j.a.Text,{type:"danger",strong:!0,ellipsis:!0,style:{maxWidth:"100%"}},e.error):r.a.createElement(X,{node:e,dispatch:o})}))}})};function ee(){var e=Object(l.a)(["\n  margin-right: 0;\n"]);return ee=function(){return e},e}var te=Object(O.a)(y.a)(ee()),ne=function(e){var t=e.source,n=Object.values(t.nodes||{}),a=n.filter((function(e){return e.dtaleUrl})).length;return r.a.createElement(d.b,{size:"small"},r.a.createElement(j.a.Text,{ellipsis:!0},t.name),t.updating?null:r.a.createElement(te,null,"".concat(n.length," results")),t.updating||0===a?null:r.a.createElement(te,{color:"green"},"".concat(a," active")),t.updating||!t.error?null:r.a.createElement(y.a,{color:"error"},r.a.createElement(S.a,{content:t.error},"Error")))},ae=function(e){var t=e.sources,n=e.settings,o=e.dispatch;return Object(a.useEffect)((function(){t.forEach((function(e){e.updating||e.nodesFullyLoaded||e.error||0!==Object.keys(e.nodes||{}).length||R(o,e.id,50)}))})),r.a.createElement(w.a,{defaultActiveKey:[]},t.filter((function(e){return e.visible})).map((function(e){return r.a.createElement(w.a.Panel,{id:e.id,key:e.id,disabled:e.updating,header:r.a.createElement(ne,{source:e}),extra:r.a.createElement(d.b,null,e.nodesFullyLoaded||e.error?null:r.a.createElement(m.a,{size:"small",icon:r.a.createElement(k.a,null),loading:e.updating,onClick:function(t){t.stopPropagation(),R(o,e.id,50)}},"Load more"),r.a.createElement(m.a,{icon:r.a.createElement(C.a,null),onClick:function(t){t.stopPropagation(),o(g(e))}},"Settings"))},r.a.createElement(Z,{settings:n,nodes:Object.values(e.nodes||{}),dispatch:o}))})))},re=n(33),oe=n(285),ie=n(287),ce=n(175),le=n(104),ue=n(298),se=n(177),de=n(162),me=n.n(de),pe=(n(265),n(266),n(267),n(268),function(e){var t=e.name,n=e.value,a=e.onChange,o=e.width,i=e.minLines,c=void 0===i?16:i,l=e.maxLines,u=void 0===l?32:l,s=e.theme,d=void 0===s?"monokai":s,m=e.editorProps,p=void 0===m?{$blockScrolling:!0}:m,f=e.wrapEnabled,h=void 0===f||f,g=Object(se.a)(e,["name","value","onChange","width","minLines","maxLines","theme","editorProps","wrapEnabled"]);return r.a.createElement(me.a,Object.assign({mode:"python",name:t,value:n,onChange:a,width:o,theme:d,minLines:c,maxLines:u,editorProps:p,wrapEnabled:h,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0},g))});function fe(){var e=Object(l.a)(["\n  margin-top: 5;\n  margin-bottom: 5;\n"]);return fe=function(){return e},e}var he=O.a.div(fe()),ge=function(e){var t=e.source,n=e.clone,o=e.mode,i=e.dispatch,l=e.templates,u=Object(a.useState)(null),s=Object(c.a)(u,2),d=s[0],p=s[1],f=Object(a.useState)(void 0),h=Object(c.a)(f,2),b=(h[0],h[1]);return r.a.createElement(oe.a,{title:"new"===o?"Add Data Source":"Data Source",width:800,onClose:function(){return i(g(null))},visible:!0,footer:t.editable?r.a.createElement(m.a,{type:"primary",block:!0,onClick:function(){(function(){var e=["name","listPaths","getData"],a=e.filter((function(e){return!n[e]}));return a.length>0?(p("Fill out the required fields: ".concat(a.join(", "))),!1):"edit"!==o||!e.every((function(e){return n[e]===t[e]}))||(p("No changes were made"),!1)})()&&("new"===o?function(e,t,n){U({dispatch:e,url:"/source/create/",body:Object(L.omit)(t,["nodes"]),onAfterResolve:function(){return e(g(null))},errorHandler:n})}(i,n,p):function(e,t,n){U({dispatch:e,url:"/source/update/",body:Object(L.omit)(t,["nodes"]),onAfterResolve:function(){return e(g(null))},errorHandler:n})}(i,n,p))}},"new"===o?"Create source":"Save changes"):null},d?r.a.createElement(ie.a,{type:"error",message:d,closable:!0,onClose:function(){return p(null)}}):null,"new"===o?null:r.a.createElement(T.a,{style:{marginTop:5,marginBottom:5},disabled:!0,defaultValue:n.packagePath,size:"small",addonBefore:"Package",addonAfter:r.a.createElement(ue.a,{onClick:function(){return navigator.clipboard.writeText(n.packagePath).then((function(){return ce.a.open({message:"Copied to clipboard!",duration:1})}))}})}),r.a.createElement(T.a,{addonBefore:"Name",style:{marginTop:5,marginBottom:5},disabled:!t.editable,defaultValue:n.name,onChange:function(e){n.name=e.target.value},size:"small"}),"new"===o&&l?r.a.createElement(T.a.Group,{style:{marginTop:5,marginBottom:5}},r.a.createElement("span",{className:"ant-input-group-addon"},"Template"),r.a.createElement(le.a,{size:"small",style:{width:"100%"},placeholder:"Select a template",onChange:function(e){!function(e){b(e),n.listPaths=e.listPaths,n.getData=e.getData}(l.find((function(t){return t.id===e})))}},l.map((function(e){return r.a.createElement(le.a.Option,{value:e.id,key:e.id},e.name)})))):null,r.a.createElement(he,null,"list_paths.py"),r.a.createElement(pe,{readOnly:!t.editable,name:"list_paths_code",value:n.listPaths,onChange:function(e){n.listPaths=e},width:"100%"}),r.a.createElement(he,null,"get_data.py"),r.a.createElement(pe,{readOnly:!t.editable,name:"get_data_code",value:n.getData,onChange:function(e){n.getData=e},width:"100%"}))},be=function(e){var t=e.source,n=e.dispatch,a=e.templates;return r.a.createElement(ge,{source:t,clone:Object(re.a)({},t),mode:""!==t.name?"edit":"new",dispatch:n,templates:a})},Ee=n(284),ve=n(290),Oe=n(124);function ye(){var e=Object(l.a)(["\n  display: flex;\n  padding: 10px;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  &:hover {\n    background-color: #d3ecfa;\n  }\n  .visibility-toggle {\n    margin-left: auto;\n  }\n"]);return ye=function(){return e},e}function je(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px;\n  border: 1px solid lightgray;\n  div {\n    border-bottom: 1px solid lightgray;\n  }\n  div:last-child {\n    border-bottom: none;\n  }\n"]);return je=function(){return e},e}var Se=O.a.div(je()),we=O.a.div(ye()),ke=function(e){var t=e.state,n=e.clone,a=e.dispatch,o=e.updateClone,i=function(){var e=n.sources.filter((function(e){var n=t.sources.find((function(t){return t.id===e.id}));return e.sortValue!==n.sortValue||e.visible!==n.visible})).map((function(e){return{id:e.id,visible:e.visible,sortValue:e.sortValue}}));e.length>0&&function(e,t){U({dispatch:e,url:"/source/update-layout/",body:t,onAfterResolve:function(){return e(v(null))}})}(a,e)};return r.a.createElement(Ee.a,{visible:"layoutEditor"===t.openModal,title:"Edit Layout",onCancel:function(){return a(v(null))},destroyOnClose:!0,width:"90%",bodyStyle:{height:"80vh",overflowY:"scroll"},centered:!0,onOk:function(){return i()}},r.a.createElement(Oe.a,{onDragEnd:function(e){e.destination&&function(e,t,a){var r=Object(L.cloneDeep)(e),i=r.splice(t,1),l=Object(c.a)(i,1)[0];r.splice(a,0,l),r.forEach((function(t,n){t.sortValue=e[n].sortValue})),o(Object(re.a)(Object(re.a)({},n),{},{sources:r}))}(n.sources,e.source.index,e.destination.index)}},r.a.createElement(Oe.c,{droppableId:"editLayoutSourceList"},(function(e,t){return r.a.createElement(Se,Object.assign({id:"editLayoutSourceList"},e.droppableProps,{ref:e.innerRef}),n.sources.map((function(e,t){return r.a.createElement(Oe.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return r.a.createElement(we,Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:a.isDragging?Object(re.a)(Object(re.a)({},t.draggableProps.style),{},{background:"#bae7ff"}):t.draggableProps.style}),e.name,r.a.createElement(ve.a,{className:"visibility-toggle",checked:e.visible,onChange:function(){return function(e){e.visible=!e.visible,o(Object(L.cloneDeep)(n))}(e)},checkedChildren:"visible",unCheckedChildren:"hidden"}))}))})),e.placeholder)}))))},Ce=function(e){var t=e.state,n=e.dispatch,o=Object(a.useState)(Object(L.cloneDeep)(t)),i=Object(c.a)(o,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){"layoutEditor"===t.openModal&&u(Object(L.cloneDeep)(t))}),[t.openModal]),void 0===t.sources||0===t.sources.length?null:r.a.createElement(ke,{state:t,clone:l,dispatch:n,updateClone:u})};function De(){var e=Object(l.a)(["\n  width: 95vw;\n  margin: 0 auto;\n  min-height: 100vh;\n  margin-bottom: 20px;\n"]);return De=function(){return e},e}var Te=u.a.Content,Pe=Object(O.a)(Te)(De()),Ie=function(e){var t,n=e.state,a=e.dispatch,o=void 0!==n.settings&&void 0!==n.sources,i=void 0!==n.sources&&n.sources.length>0;return r.a.createElement(u.a,null,r.a.createElement(Pe,null,r.a.createElement(s.a,{title:r.a.createElement(d.b,null,r.a.createElement("span",null,"D-Tale Desktop"),r.a.createElement(m.a,{icon:r.a.createElement(f.a,null),shape:"circle-outline",title:"github",href:"https://github.com/phillipdupuis/dtale-desktop",target:"_blank",rel:"noopener noreferrer"}),r.a.createElement(m.a,{icon:r.a.createElement(h.a,null),shape:"circle-outline",title:"API documentation",href:"/docs",target:"_blank",rel:"noopener noreferrer"})),subTitle:"",extra:r.a.createElement(d.b,null,o&&i&&!(null===(t=n.settings)||void 0===t?void 0:t.disableEditLayout)?r.a.createElement(m.a,{onClick:function(){return a(v("layoutEditor"))}},"Edit Layout"):null,o&&!n.settings.disableAddDataSources?r.a.createElement(m.a,{type:"primary",onClick:function(){return a(g({id:"",name:"",packageName:"",packagePath:"",nodes:void 0,nodesFullyLoaded:!1,error:null,visible:!0,editable:!0,listPaths:'from typing import Iterable\n\n\ndef main() -> Iterable[str]:\n    """\n    Return an iterable of paths identifying where data is located, such as file paths or URLs.\n    These paths will be passed to your function in get_data.py.\n    """\n    raise NotImplementedError()\n',getData:'import pandas as pd\n\n\ndef main(path: str) -> pd.DataFrame:\n    """\n    Given a path, retrieve that data and return it as a pandas dataframe\n    """\n    raise NotImplementedError()\n',saveData:""}))}},"Add Data Source"):null)}),o?r.a.createElement(ae,{settings:n.settings,sources:n.sources,dispatch:a}):r.a.createElement(p.a,null),o&&n.selectedSource?r.a.createElement(be,{source:n.selectedSource,dispatch:a,templates:(n.sources||[]).map((function(e){return{id:e.id,name:e.name,listPaths:e.listPaths,getData:e.getData}}))}):null,o&&i&&!n.settings.disableEditLayout?r.a.createElement(Ce,{state:n,dispatch:a}):null))},xe=n(171),_e=function(e,t){return e.find((function(e){return t in(e.nodes||{})}))},Ae=function(e,t){switch(t.type){case"UPDATE_NODE":return Object.fromEntries(Object.entries(e).map((function(e){var n=Object(c.a)(e,2),a=n[0],r=n[1];return[a,r.dataId===t.node.dataId?t.node:r]})));case"SET_NODE_UPDATING":return Object.fromEntries(Object.entries(e).map((function(e){var n=Object(c.a)(e,2),a=n[0],r=n[1];return[a,r.dataId===t.dataId?Object(re.a)(Object(re.a)({},r),{},{updating:t.updating}):r]})));default:return e}},Le=function(e){return Object(xe.a)(e).sort((function(e,t){return e.sortValue-t.sortValue}))},Ne=function(e,t){switch(t.type){case"ADD_SOURCES":return Le(t.sources.concat(e||[]));case"UPDATE_SOURCE":return Le(e.map((function(e){return e.id===t.source.id?t.source:e})));case"SET_SOURCE_UPDATING":var n=Object(re.a)(Object(re.a)({},function(e,t){return e.find((function(e){return e.id===t}))}(e,t.sourceId)),{},{updating:t.updating});return e.map((function(e){return e.id===t.sourceId?n:e}));case"UPDATE_NODE":return e.map((function(e){return e.id===t.node.sourceId?Object(re.a)(Object(re.a)({},e),{},{nodes:Ae(e.nodes,t)}):e}));case"SET_NODE_UPDATING":var a=_e(e,t.dataId).id;return e.map((function(e){return e.id===a?Object(re.a)(Object(re.a)({},e),{},{nodes:Ae(e.nodes,t)}):e}));default:return e}},Ue=function(e,t){switch(t.type){case"UPDATE_SETTINGS":return Object(re.a)(Object(re.a)({},e),{},{settings:t.settings});case"SET_OPEN_MODAL":return Object(re.a)(Object(re.a)({},e),{},{openModal:t.modal});case"SET_SELECTED_SOURCE":return Object(re.a)(Object(re.a)({},e),{},{selectedSource:t.source});default:return Object(re.a)(Object(re.a)({},e),{},{sources:Ne(e.sources,t)})}},Re={sources:void 0,selectedSource:null,openModal:null,settings:void 0,error:null},Fe=function(){var e=Object(a.useReducer)(Ue,Re),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){void 0===n.settings&&function(e){U({dispatch:e,url:"/settings/"})}(o),void 0===n.sources&&function(e){U({dispatch:e,url:"/source/list/"})}(o)}),[]),Object(a.useEffect)((function(){var e;(null===(e=n.settings)||void 0===e?void 0:e.enableWebsocketConnections)&&z(o)}),[n.settings]),r.a.createElement(Ie,{state:n,dispatch:o})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.48c11554.chunk.js.map