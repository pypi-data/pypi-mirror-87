/* Generated by Nim Compiler v1.4.2 */
/*   (c) 2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

/* section: NIM_merge_HEADERS */

#include "nimbase.h"
#include <string.h>
#include <stdio.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix

/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x, y)
#define nimln_(x, y)

/* section: NIM_merge_FORWARD_TYPES */
typedef struct tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA;
typedef struct tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA;
typedef struct tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ;
typedef struct tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA;
typedef struct tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g;
typedef struct tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content;
typedef struct tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw;
typedef struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA tySequence__uB9b75OUPRENsBAu4AnoePA;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA_Content tySequence__uB9b75OUPRENsBAu4AnoePA_Content;
typedef struct tySequence__HntX7ExXXTSNL4DQEnaeTg tySequence__HntX7ExXXTSNL4DQEnaeTg;
typedef struct tySequence__HntX7ExXXTSNL4DQEnaeTg_Content tySequence__HntX7ExXXTSNL4DQEnaeTg_Content;
typedef struct tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw;
typedef struct tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ;
typedef struct tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ;
typedef struct tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w;
typedef struct tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA;
typedef struct tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw;
typedef struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A;
typedef struct tyObject_Table__qagh2zcXAhSb9aRfetCb26g tyObject_Table__qagh2zcXAhSb9aRfetCb26g;
typedef struct tySequence__JiteSJxrvz63iP2o9bcn2Sg tySequence__JiteSJxrvz63iP2o9bcn2Sg;
typedef struct tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content;
typedef struct tyTuple__g1w83cyyBYiVU9c8WEJWnjQ tyTuple__g1w83cyyBYiVU9c8WEJWnjQ;
typedef struct tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ;
typedef struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA;
typedef struct tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw;
typedef struct tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw;
typedef struct tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ;
typedef struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA;

/* section: NIM_merge_TYPES */
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA {
NimStringV2 version;
NimStringV2 status;
tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers;
NimStringV2 body;
tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* bodyStream;
};
typedef NU8 tySet_tyChar__nmiMWKVIe46vacnhAFrQvw[32];
struct tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ {
NimStringV2 scheme;
NimStringV2 username;
NimStringV2 password;
NimStringV2 hostname;
NimStringV2 port;
NimStringV2 path;
NimStringV2 query;
NimStringV2 anchor;
NIM_BOOL opaque;
NIM_BOOL isIpv6;
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  NI len; tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content* p;
};
struct TNimTypeV2 {
void* destructor;
NI size;
NI align;
NCSTRING name;
void* traceImpl;
void* disposeImpl;
void* typeInfoV1;
};
struct RootObj {
TNimTypeV2* m_type;
};
struct tySequence__uB9b75OUPRENsBAu4AnoePA {
  NI len; tySequence__uB9b75OUPRENsBAu4AnoePA_Content* p;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringV2 message;
tySequence__uB9b75OUPRENsBAu4AnoePA trace;
Exception* up;
};
struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA {
  Exception Sup;
};
struct tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
struct tySequence__HntX7ExXXTSNL4DQEnaeTg {
  NI len; tySequence__HntX7ExXXTSNL4DQEnaeTg_Content* p;
};
struct tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g {
tySequence__HntX7ExXXTSNL4DQEnaeTg content;
};
struct tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw {
NimStringV2 name;
NimStringV2 content;
NIM_BOOL isFile;
union{
struct {NimStringV2 filename;
NimStringV2 contentType;
NI64 fileSize;
NIM_BOOL isStream;
} _isFile_1;
};
};
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (NI64 total, NI64 progress, NI64 speed, void* ClE_0);
void* ClE_0;
} tyProc__TSOsjF4c9aXotPerq9cEE56A;
struct tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w {
NI64 ticks;
};
struct tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA {
tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket;
NIM_BOOL connected;
tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ currentURL;
tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers;
NI maxRedirects;
NimStringV2 userAgent;
NI timeout;
tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* proxy;
tyProc__TSOsjF4c9aXotPerq9cEE56A onProgressChanged;
tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* sslContext;
NI64 contentTotal;
NI64 contentProgress;
NI64 oneSecondProgress;
tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w lastProgressReport;
tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* bodyStream;
NIM_BOOL getBody;
};
struct tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ {
tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ url;
NimStringV2 auth;
};
struct tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
struct tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA {
  tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw Sup;
};
struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A {
NI rc;
};
typedef NU8 tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg;
typedef NU8 tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg;
typedef NU8 tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg;
struct tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA {
tyObject_Table__qagh2zcXAhSb9aRfetCb26g* table;
NIM_BOOL isTitleCase;
};
struct tySequence__JiteSJxrvz63iP2o9bcn2Sg {
  NI len; tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content* p;
};
struct tyObject_Table__qagh2zcXAhSb9aRfetCb26g {
tySequence__JiteSJxrvz63iP2o9bcn2Sg data;
NI counter;
};
struct tyTuple__g1w83cyyBYiVU9c8WEJWnjQ {
NI Field0;
NimStringV2 Field1;
tySequence__sM4lkSb7zS6F7OVMvW9cffQ Field2;
};
typedef NU8 tyEnum_HttpMethod__wfZHspwVKQPl9aWhkIcMrAA;
struct tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ {
  tyObject_IOError__iLZrPn9anoh9ad1MmO0RczFw Sup;
};
struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA {
NI a;
NI b;
};
typedef N_NIMCALL_PTR(void, tyProc__JQrsH08b4uPTH9cyFPlVOZg) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s);
typedef N_NIMCALL_PTR(NIM_BOOL, tyProc__9bmhFrLahRsL2hltfRDVtlQ) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s);
typedef N_NIMCALL_PTR(void, tyProc__3svSoGIUJIsHkaBL7q4DAQ) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, NI pos);
typedef N_NIMCALL_PTR(NI, tyProc__xflqkf2D1uVClg70czEDHA) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s);
typedef N_NIMCALL_PTR(NI, tyProc__c9c0f59ak4YGQ6neEym8LPKw) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, NimStringV2* buffer, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA slice);
typedef N_NIMCALL_PTR(NIM_BOOL, tyProc__7jFfqMk9ajToCz6Hv9atCA4A) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, NimStringV2* line);
typedef N_NIMCALL_PTR(NI, tyProc__2VVzVL9bOnKhj1eZKkf9cEuA) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, void* buffer, NI bufLen);
typedef N_NIMCALL_PTR(void, tyProc__ki6p1QyfOkJLQJ9aw5NI0AQ) (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, void* buffer, NI bufLen);
struct tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ {
  RootObj Sup;
tyProc__JQrsH08b4uPTH9cyFPlVOZg closeImpl;
tyProc__9bmhFrLahRsL2hltfRDVtlQ atEndImpl;
tyProc__3svSoGIUJIsHkaBL7q4DAQ setPositionImpl;
tyProc__xflqkf2D1uVClg70czEDHA getPositionImpl;
tyProc__c9c0f59ak4YGQ6neEym8LPKw readDataStrImpl;
tyProc__7jFfqMk9ajToCz6Hv9atCA4A readLineImpl;
tyProc__2VVzVL9bOnKhj1eZKkf9cEuA readDataImpl;
tyProc__2VVzVL9bOnKhj1eZKkf9cEuA peekDataImpl;
tyProc__ki6p1QyfOkJLQJ9aw5NI0AQ writeDataImpl;
tyProc__JQrsH08b4uPTH9cyFPlVOZg flushImpl;
};
struct tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw {
  tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ Sup;
NimStringV2 data;
NI pos;
};
struct tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw {
NI64 seconds;
NI nanosecond;
};
typedef N_CLOSURE_PTR(void, TM__9brjMmGFaIx4wBkLyxxXZxw_106) (NI64 total, NI64 progress, NI64 speed);
struct tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ {
  tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ Sup;
FILE* f;
};
typedef NU8 tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg;
typedef NimStringV2 tyArray__Re75IspeoxXy2oCZHwcRrA[2];
typedef NimStringV2 tyArray__haiLFy0nBviVTKFGuwztzQ[5];
typedef NU8 tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw;
typedef NU8 tyEnum_SslCVerifyMode__t9a9cuHiKUd7w4o8XPQAbfJg;


#ifndef tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content_PP
#define tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content_PP
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE];};
#endif

      struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA {
NCSTRING procname;
NI line;
NCSTRING filename;
};


#ifndef tySequence__uB9b75OUPRENsBAu4AnoePA_Content_PP
#define tySequence__uB9b75OUPRENsBAu4AnoePA_Content_PP
struct tySequence__uB9b75OUPRENsBAu4AnoePA_Content { NI cap; tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__HntX7ExXXTSNL4DQEnaeTg_Content_PP
#define tySequence__HntX7ExXXTSNL4DQEnaeTg_Content_PP
struct tySequence__HntX7ExXXTSNL4DQEnaeTg_Content { NI cap; tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content_PP
#define tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content_PP
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content_PP
#define tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content_PP
struct tySequence__JiteSJxrvz63iP2o9bcn2Sg_Content { NI cap; tyTuple__g1w83cyyBYiVU9c8WEJWnjQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content_PP
#define tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content_PP
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content { NI cap; NimStringV2 data[SEQ_DECL_SIZE];};
#endif

      
/* section: NIM_merge_PROC_HEADERS */
N_LIB_PRIVATE N_NIMCALL(void, eqsink___aBBXmHFBEivKqERloP6zmA)(NimStringV2* dest, NimStringV2 src);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, readAll__Z3k8HYNsCnt82WLNxaYQiQ)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___aBBXmHFBEivKqERloP6zmA_2)(NimStringV2* dest, NimStringV2 src);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__wAzSnEu9cCHHjvPQlWBZUeQ)(NimStringV2 s, tySet_tyChar__nmiMWKVIe46vacnhAFrQvw chars);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A)(NimStringV2 msg);
N_LIB_PRIVATE N_NIMCALL(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*, requestAux__nrxBG9atKB7KhRUylZop7gA_2)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NimStringV2 url, NimStringV2 httpMethod, NimStringV2 body, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size);
N_LIB_PRIVATE N_NIMCALL(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ, parseUri__rbZTAh57otUDsvMlWgTQog)(NimStringV2 uri);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size, NI alignment);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e, NCSTRING ename, NCSTRING procname, NCSTRING filename, NI line);
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, format__N4eE9a9au9cfobiXawLjYLIIw)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getBoundary__YX3WF0FwpX3W1dnYusiiXw)(tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* p);
N_LIB_PRIVATE N_NIMCALL(NI, rand__v7jZDEs4VOsrcpvk0yo8Rg)(NI max);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nimIntToStr)(NI x);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__KV0xCsBzaN9coqb7PG9au0oQ)(NimStringV2 s, NimStringV2 sub);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___Iy0txpq5svlfrlKS9bU28Kw)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 key, NimStringV2 value);
static N_INLINE(void, appendString)(NimStringV2* dest, NimStringV2 src);
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size);
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space);
N_LIB_PRIVATE N_NIMCALL(void, readFileSizes__cRvnVPBe4rJR9cIs5w6AJww)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart);
N_LIB_PRIVATE N_NIMCALL(NI64, nosgetFileSize)(NimStringV2 file);
N_LIB_PRIVATE N_NIMCALL(void, add__dK9ajFgX5RSWQx0eHjjpjSQ)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* x, NimStringV2 value);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, format__gVWUjCpNHhBYO9ai6KMPMKA)(tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw* entry, NimStringV2 boundary);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s, NI addlen);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ)(NimStringV2* dest);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nimInt64ToStr)(NI64 x);
N_LIB_PRIVATE N_NIMCALL(void, newConnection__OTRwNmMCrM24z6RZ2ZmLqg)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* url);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a, NimStringV2 b);
static N_INLINE(NIM_BOOL, equalMem__9bGgqEk7RXXl6eqM9c1HdELAsystem)(void* a, void* b, NI size);
static N_INLINE(int, nimCmpMem)(void* a, void* b, NI size);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OydxUV9ad0I3qVcqasXV7RQ)(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* dest, tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* src);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuToLowerAsciiStr)(NimStringV2 s);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___U8uLAIXBq8V9bZzYUjcBzkA)(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA* dest);
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p);
static N_INLINE(NI, minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system)(NI x, NI y);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___4fQQqvAqifkWGVa4g39cI5A)(tySequence__uB9b75OUPRENsBAu4AnoePA* dest);
N_LIB_PRIVATE N_NIMCALL(void, close__LSkbNH0VA1HBcOjYrAgBmA)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client);
N_LIB_PRIVATE N_NIMCALL(void, close__dPXIsN1nx9bPvap47WTEMow)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags);
N_LIB_PRIVATE N_NIMCALL(NI, nsuParseInt)(NimStringV2 s);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___uz5bm6GTj6lhUqoWSCWdvg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ** dest, tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* src);
N_LIB_PRIVATE N_NIMCALL(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*, dial__oD5cdlP49a1aM6tVxzT4h1Q)(NimStringV2 address, NU16 port, tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg protocol, NIM_BOOL buffered);
N_LIB_PRIVATE N_NIMCALL(void, wrapConnectedSocket__zB421aJ04hXbpUeGq3doVQ)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* ctx, tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg handshake, NimStringV2 hostname);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___Maxw2KUIYGcdUEJ9aO5a9bpw_2)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest, tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* src);
static N_INLINE(Exception*, getCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___rR9boD7urcxl7uyUtE46AOA)(Exception** dest, Exception* src);
static N_INLINE(void, popCurrentException)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ, initUri__zcwd3ynrfDQcP9c8k9cEeg9aQ)(void);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, generateHeaders__BYtup6hw7Ii2LjHd19cuuhA)(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* requestUrl, NimStringV2 httpMethod, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* proxy);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuToUpperAsciiStr)(NimStringV2 s);
static N_INLINE(void, nimAddCharV1)(NimStringV2* s, NIM_CHAR c);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nsuStartsWith)(NimStringV2 s, NimStringV2 prefix);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___9aI7qw5xvHD3Zb9b9cJik76iw)(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* u);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw)(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* dest);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, hasKey__jz0AniI5No9bnkMo9aqdkc2A)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 key);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, encode__D4bDwZBUb9bAJslbVxAPmbg)(NimStringV2 s, NIM_BOOL safe);
N_LIB_PRIVATE N_NIMCALL(NI, len__J4hnoSPhc6KiK07n7KgZ9cQ)(tyObject_Table__qagh2zcXAhSb9aRfetCb26g* t);
static N_INLINE(NIM_BOOL, isFilled__5Qpmu5QqwDY0esVXn6wf7wtables)(NI hcode);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___JcSadDOgpYarTBAbeNWqTw)(tyEnum_HttpMethod__wfZHspwVKQPl9aWhkIcMrAA httpMethod);
N_LIB_PRIVATE N_NIMCALL(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*, newHttpHeaders__m5XuFRjmtJnvrQCk25khAA)(NIM_BOOL titleCase);
N_LIB_PRIVATE N_NIMCALL(void, send__sP9af4zGpnwmZkRofZDfbQQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NimStringV2 data, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags);
N_LIB_PRIVATE N_NIMCALL(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*, parseResponse__3AoUMM1jyrz8BUdsjBoKYQ)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NIM_BOOL getBody);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___b19aGGEWVnlKBxGOhME5IOA)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA** dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___A1YDm2u0M1bbDfuy6EU5UA)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___gczQO0vzLYPQ2o5V9bLxOCQ)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* dest);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p, NI alignment);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___mcVzTPma3mVmolqKCGb1Iw)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA** dest, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* src);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, recvLine__xQiPYgNz7DM0cyQl7evHRQ)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags, NI maxLength);
N_LIB_PRIVATE N_NIMCALL(NI, skipIgnoreCase__Z630VYBL4pZDWlOyn05K5w)(NimStringV2 s, NimStringV2 token, NI start);
N_LIB_PRIVATE N_NIMCALL(void, httpError__QP4vBkFseuds6dKm2yqk9cw)(NimStringV2 msg);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___8spWQEcy8cWEUfdgbLNs4A)(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ** dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___F39brdC9bGKsCBoX3fDMHByw)(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ* dest);
static N_INLINE(NI, skipWhitespace__6WuCTfsk2bOGNtGSxg9cZWAparseutils)(NimStringV2 s, NI start);
static N_INLINE(NimStringV2, X5BX5D___ogYTOKbgqbjPfyC123US1gsystem)(NimStringV2 s, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA x);
N_NIMCALL(NimStringV2, mnewString)(NI len);
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s);
N_LIB_PRIVATE N_NIMCALL(void, nimPrepareStrMutationImpl__C0YoABEefTaYbWLv9aVOzZA)(NimStringV2* s);
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___xNR8BVBMWzS9bXXNMikmyLgsystem)(NI a, NI b);
static N_INLINE(NI, parseUntil__jfFErPNXs9cw9bvuw3hS0GVAparseutils)(NimStringV2 s, NimStringV2* token, NIM_CHAR until, NI start);
N_LIB_PRIVATE N_NIMCALL(void, fastSubstr__a88zu6ztJ3SBDTHcnqFjsg)(NimStringV2 s, NimStringV2* token, NI start, NI length);
N_LIB_PRIVATE N_NIMCALL(void, add__Iy0txpq5svlfrlKS9bU28Kw_2)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 key, NimStringV2 value);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuStrip)(NimStringV2 s, NIM_BOOL leading, NIM_BOOL trailing, tySet_tyChar__nmiMWKVIe46vacnhAFrQvw chars);
static N_INLINE(NI, len__phLlcLkG9amvbv9cul0w5ERQhttpcore)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers);
N_LIB_PRIVATE N_NIMCALL(NI, code__74MIEFap0tx9bAcFdN6ES7Q)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* response);
static N_INLINE(NimStringV2, X5BX5D___FPvLvuwqfYMFkcbGfPM8QQsystem)(NimStringV2 s, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA x);
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___BokNSDrKN1xmV1nA01G9brAsystem)(NI a, NI b);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___uD7PP9aMywYClkkmJVib7sg)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ** dest, tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* src);
N_LIB_PRIVATE N_NIMCALL(tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw*, newStringStream__9aLRtgEYeRMrZKrObtoOslQ)(NimStringV2 s);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___uD7PP9aMywYClkkmJVib7sg_2)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ** dest, tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* src);
N_LIB_PRIVATE N_NIMCALL(void, parseBody__nesWh4uP9aaR2HAQTFYAzUA)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 httpVersion);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, toString__vY9b9br9btFmrOxuFGpY9cNqbQ)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ values);
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, getOrDefault__aSNwyYYZ2RsZRzsI4edhhA)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 key, tySequence__sM4lkSb7zS6F7OVMvW9cffQ default_0);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap, NI elemSize, NI elemAlign);
N_LIB_PRIVATE N_NIMCALL(void, parseChunks__LSkbNH0VA1HBcOjYrAgBmA_2)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client);
N_LIB_PRIVATE N_NIMCALL(NI, recvFull__yQD3rUDgVn4FSoNLCDnXQQ)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NI size, NI timeout, NIM_BOOL keep);
static N_INLINE(NimStringV2, recv__RNH6ElAkiN5likr2EisKHQnet)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI size, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags);
N_LIB_PRIVATE N_NIMCALL(NI, recv__WAuvR33LNsmM2rTnugz1Lw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NimStringV2* data, NI size, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags);
N_LIB_PRIVATE N_NIMCALL(void, write__egjcKjt8WddLFyjTFl5BAw)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, NimStringV2 x);
N_LIB_PRIVATE N_NIMCALL(void, reportProgress__gU9aunvzmdn878ItM4BwBjQ)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NI64 progress);
N_LIB_PRIVATE N_NIMCALL(NI64, inSeconds__df0d89cDnRIju9aB6p1W1qVA_2)(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw dur);
N_LIB_PRIVATE N_NIMCALL(tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw, minus___p9cBm7joedh4BwcboQ3HMVQ)(tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w a, tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w b);
N_LIB_PRIVATE N_NIMCALL(tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w, getMonoTime__QkEugs2Q2iFK9b83sl2B6wA)(void);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___9cEHZYAST9afMf7sM41NLYIQ)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, setPosition__cci01mizUCs1g9a9bQPBwweQ_3)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, NI pos);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___W6vnarVEjHAKSygcoFfE4A)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA** dest);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___OydxUV9ad0I3qVcqasXV7RQ_2)(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* dest, tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* src);
N_LIB_PRIVATE N_NIMCALL(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*, override__FtvT5N1bkQfcJQGIp9aKlhQ)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* fallback, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* override);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___mcVzTPma3mVmolqKCGb1Iw_2)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA** dest, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* src);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___ic9a3GZ2Kbgw2QwLw0A1dMQ_2)(tyObject_Table__qagh2zcXAhSb9aRfetCb26g* dest, tyObject_Table__qagh2zcXAhSb9aRfetCb26g src);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___ot6ARD7jycF5zD3Vxo4ZCw)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 key, tySequence__sM4lkSb7zS6F7OVMvW9cffQ value);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___r6aagoRVuov7HvfEjIi3Uw_2)(tySequence__sM4lkSb7zS6F7OVMvW9cffQ* dest, tySequence__sM4lkSb7zS6F7OVMvW9cffQ src);
N_LIB_PRIVATE N_NIMCALL(void, setLengthStrV2)(NimStringV2* s, NI newLen);
N_LIB_PRIVATE N_NIMCALL(void, sendFile__Yb9cHECVaxEDx9bEF54vo7fg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw* entry);
N_LIB_PRIVATE N_NIMCALL(tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ*, newFileStream__cwYJiP3D7DOTCJxCdBqBZQ)(NimStringV2 filename, tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg mode, NI bufSize);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, readStr__Z7JDISIOZLxtyOOY7L8wDw)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s, NI length);
N_LIB_PRIVATE N_NIMCALL(void, close__y1KA3B0U09bKtU09am9a9avRYQ_3)(tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* s);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___1C4ixR1siTbJKB2Qcw7ZWw)(tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ** dest);
static N_INLINE(NimStringV2*, X5BX5D___qAX9aHx35KUFY79aX8PJ3xRgsystem)(NimStringV2* s, NI sLen_0, NI i);
static N_INLINE(NIM_BOOL, contains__MghwuKjQqmVLYE8A59cNGHgsystem)(NimStringV2* a, NI aLen_0, NimStringV2 item);
static N_INLINE(NI, find__CWgb1wQSxTCKtdHVU5pCYQsystem)(NimStringV2* a, NI aLen_0, NimStringV2 item);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, redirection__7c9c0MkLRudbFZ1hPGI7gVw)(NimStringV2 status);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getNewLocation__zVcgYlyVeZFDopwaR9ao7Jg)(NimStringV2 lastURL, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___8PoGYtGK2aJ4uGgFszak3w)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA** dest, tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* src);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___1XZft5a5dikeHY9a7ro8T7Q)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA** dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___0AogzSEAggCYyLR2kz88Dg)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___1TCKL9aWTg3J2fdjyrLXdQw)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___NRThnU6XgZ4MqObKZkAZBw)(tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___i709c9bs9aE2bIcudNSMg20UQ)(tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ** dest, tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* src);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___sQXQN9ay09bfcfti3uWgci4A)(tyProc__TSOsjF4c9aXotPerq9cEE56A* dest, tyProc__TSOsjF4c9aXotPerq9cEE56A src);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___Maxw2KUIYGcdUEJ9aO5a9bpw)(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w** dest, tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* src);
N_LIB_PRIVATE N_NIMCALL(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*, newContext__p45vOS9b3iK2JJ1Y7aIJ9bUA)(tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw protVersion, tyEnum_SslCVerifyMode__t9a9cuHiKUd7w4o8XPQAbfJg verifyMode, NimStringV2 certFile, NimStringV2 keyFile, NimStringV2 cipherList, NimStringV2 caDir, NimStringV2 caFile);

/* section: NIM_merge_DATA */
static NIM_CONST tySet_tyChar__nmiMWKVIe46vacnhAFrQvw TM__9brjMmGFaIx4wBkLyxxXZxw_2 = {
0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
static const struct {
  NI cap; NIM_CHAR data[102+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_3 = { 102 | NIM_STRLIT_FLAG, "httpclient.nim(1040, 11) `not url.contains({\'\\c\', \'\\n\'})` url s"
"houldn\'t contain any newline characters" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_4 = {102, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_3};
extern TNimTypeV2 NTIv2__yoNlBGx0D2tRizIdhQuENw_;
static const struct {
  NI cap; NIM_CHAR data[23+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_5 = { 23 | NIM_STRLIT_FLAG, "No uri scheme supplied." };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_6 = {23, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_5};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_7 = { 12 | NIM_STRLIT_FLAG, "Content-Type" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_8 = {12, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_7};
static const struct {
  NI cap; NIM_CHAR data[30+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_9 = { 30 | NIM_STRLIT_FLAG, "multipart/form-data; boundary=" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_10 = {30, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_9};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_11 = { 2 | NIM_STRLIT_FLAG, "--" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_12 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_11};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_13 = { 2 | NIM_STRLIT_FLAG, "\015\012" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_14 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const struct {
  NI cap; NIM_CHAR data[38+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_15 = { 38 | NIM_STRLIT_FLAG, "Content-Disposition: form-data; name=\"" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_16 = {38, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_15};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_17 = { 1 | NIM_STRLIT_FLAG, "\"" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_18 = {1, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_17};
static const struct {
  NI cap; NIM_CHAR data[12+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_19 = { 12 | NIM_STRLIT_FLAG, "; filename=\"" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_20 = {12, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_19};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_21 = { 3 | NIM_STRLIT_FLAG, "\"\015\012" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_22 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_21};
static const struct {
  NI cap; NIM_CHAR data[14+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_23 = { 14 | NIM_STRLIT_FLAG, "Content-Type: " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_24 = {14, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_23};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_25 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_26 = { 4 | NIM_STRLIT_FLAG, "\015\012\015\012" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_27 = {4, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_26};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_28 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_29 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_11};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_30 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_11};
static const struct {
  NI cap; NIM_CHAR data[14+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_31 = { 14 | NIM_STRLIT_FLAG, "Content-Length" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_32 = {14, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_31};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_33 = {14, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_31};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_34 = { 5 | NIM_STRLIT_FLAG, "https" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_35 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_34};
N_LIB_PRIVATE TNimTypeV2 NTIv2__L1L9b70HFrKWeYV59a3EWeaA_;
static const struct {
  NI cap; NIM_CHAR data[85+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_36 = { 85 | NIM_STRLIT_FLAG, "SSL support is not available. Cannot connect over SSL. Compile "
"with -d:ssl to enable." };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_37 = {85, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_36};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_38 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_34};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_39 = { 3 | NIM_STRLIT_FLAG, "443" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_40 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_39};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_41 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_34};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_42 = { 1 | NIM_STRLIT_FLAG, "/" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_43 = {1, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_42};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_44 = { 1 | NIM_STRLIT_FLAG, "\?" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_45 = {1, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_44};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_46 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_34};
static const struct {
  NI cap; NIM_CHAR data[0+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_47 = { 0 | NIM_STRLIT_FLAG, "" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_48 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[11+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_49 = { 11 | NIM_STRLIT_FLAG, " HTTP/1.1\015\012" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_50 = {11, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_49};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_51 = { 4 | NIM_STRLIT_FLAG, "Host" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_52 = {4, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_51};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_53 = { 6 | NIM_STRLIT_FLAG, "Host: " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_54 = {6, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_53};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_55 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_56 = {6, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_53};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_57 = { 1 | NIM_STRLIT_FLAG, ":" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_58 = {1, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_57};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_59 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_60 = { 10 | NIM_STRLIT_FLAG, "Connection" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_61 = {10, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_60};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_62 = { 24 | NIM_STRLIT_FLAG, "Connection: Keep-Alive\015\012" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_63 = {24, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_62};
static const struct {
  NI cap; NIM_CHAR data[27+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_64 = { 27 | NIM_STRLIT_FLAG, "Proxy-Authorization: basic " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_65 = {27, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_64};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_66 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_67 = { 2 | NIM_STRLIT_FLAG, ": " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_68 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_67};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_69 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_70 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_71 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_72 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_73 = { 5 | NIM_STRLIT_FLAG, "HTTP/" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_74 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_73};
N_LIB_PRIVATE TNimTypeV2 NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_;
static const struct {
  NI cap; NIM_CHAR data[23+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_75 = { 23 | NIM_STRLIT_FLAG, "invalid http version, `" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_76 = {23, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_75};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_77 = { 1 | NIM_STRLIT_FLAG, "`" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_78 = {1, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_77};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_79 = { 3 | NIM_STRLIT_FLAG, "1.1" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_80 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_79};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_81 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_79};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_82 = { 3 | NIM_STRLIT_FLAG, "1.0" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_83 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_82};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_84 = { 24 | NIM_STRLIT_FLAG, "unsupported http version" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_85 = {24, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_84};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_86 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_82};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_87 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[15+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_88 = { 15 | NIM_STRLIT_FLAG, "invalid headers" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_89 = {15, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_88};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_90 = {15, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_88};
static NIM_CONST tySet_tyChar__nmiMWKVIe46vacnhAFrQvw TM__9brjMmGFaIx4wBkLyxxXZxw_91 = {
0x00, 0x3e, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
static const struct {
  NI cap; NIM_CHAR data[16+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_92 = { 16 | NIM_STRLIT_FLAG, "too many headers" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_93 = {16, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_92};
static const struct {
  NI cap; NIM_CHAR data[55+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_94 = { 55 | NIM_STRLIT_FLAG, "Connection was closed before full request has been made" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_95 = {55, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_94};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_96 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[17+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_97 = { 17 | NIM_STRLIT_FLAG, "Transfer-Encoding" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_98 = {17, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_97};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_99 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_100 = { 7 | NIM_STRLIT_FLAG, "chunked" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_101 = {7, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_100};
static const struct {
  NI cap; NIM_CHAR data[40+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_102 = { 40 | NIM_STRLIT_FLAG, "Server terminated connection prematurely" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_103 = {40, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_102};
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_104 = { 20 | NIM_STRLIT_FLAG, "Invalid chunk size: " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_105 = {20, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_104};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_107 = {40, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_102};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_108 = {40, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_102};
static const struct {
  NI cap; NIM_CHAR data[14+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_109 = { 14 | NIM_STRLIT_FLAG, "Content-Length" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_110 = {14, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_109};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_111 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[43+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_112 = { 43 | NIM_STRLIT_FLAG, "Got disconnected while trying to read body." };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_113 = {43, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_112};
static const struct {
  NI cap; NIM_CHAR data[54+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_114 = { 54 | NIM_STRLIT_FLAG, "Received length doesn\'t match expected length. Wanted " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_115 = {54, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_114};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_116 = { 5 | NIM_STRLIT_FLAG, " got " };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_117 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_116};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_118 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_82};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_119 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_79};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_120 = { 10 | NIM_STRLIT_FLAG, "Connection" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_121 = {10, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_120};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_122 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_123 = {10, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_120};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_124 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[5+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_125 = { 5 | NIM_STRLIT_FLAG, "close" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_126 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_125};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_127 = {10, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_120};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_128 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_129 = {5, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_125};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_130 = { 3 | NIM_STRLIT_FLAG, "200" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_131 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_130};
static const struct {
  NI cap; NIM_CHAR data[93+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_132 = { 93 | NIM_STRLIT_FLAG, "The proxy server rejected a CONNECT request, so a secure connec"
"tion could not be established." };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_133 = {93, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_132};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_134 = { 10 | NIM_STRLIT_FLAG, "user-agent" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_135 = {10, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_134};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_136 = { 10 | NIM_STRLIT_FLAG, "User-Agent" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_137 = {10, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_136};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_138 = {2, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_13};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_140 = { 4 | NIM_STRLIT_FLAG, "head" };
static const struct {
  NI cap; NIM_CHAR data[7+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_141 = { 7 | NIM_STRLIT_FLAG, "connect" };
static NIM_CONST tyArray__Re75IspeoxXy2oCZHwcRrA TM__9brjMmGFaIx4wBkLyxxXZxw_139 = {{4, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_140},
{7, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_141}}
;
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_142 = { 3 | NIM_STRLIT_FLAG, "301" };
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_143 = { 3 | NIM_STRLIT_FLAG, "302" };
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_144 = { 3 | NIM_STRLIT_FLAG, "303" };
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_145 = { 3 | NIM_STRLIT_FLAG, "307" };
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_146 = { 3 | NIM_STRLIT_FLAG, "308" };
N_LIB_PRIVATE NIM_CONST tyArray__haiLFy0nBviVTKFGuwztzQ redirectionNRs__RlB9c6otkMoOuxfTj3Z1QfA = {{3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_142},
{3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_143},
{3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_144},
{3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_145},
{3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_146}}
;
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_147 = { 8 | NIM_STRLIT_FLAG, "Location" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_148 = {8, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_147};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_149 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_150 = { 24 | NIM_STRLIT_FLAG, "location header expected" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_151 = {24, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_150};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_152 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_145};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_153 = { 3 | NIM_STRLIT_FLAG, "GET" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_154 = {3, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_153};
static NIM_CONST tyProc__TSOsjF4c9aXotPerq9cEE56A TM__9brjMmGFaIx4wBkLyxxXZxw_155 = {NIM_NIL,NIM_NIL};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_156 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_157 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_158 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[300+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_159 = { 300 | NIM_STRLIT_FLAG, "TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY"
"1305_SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-S"
"HA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:"
"ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RS"
"A-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_160 = {300, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_159};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_161 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_162 = {0, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_47};
static const struct {
  NI cap; NIM_CHAR data[77+1];
} TM__9brjMmGFaIx4wBkLyxxXZxw_163 = { 77 | NIM_STRLIT_FLAG, "httpclient.nim(326, 16) `result != nil` failure to initialize t"
"he SSL context" };
static const NimStringV2 TM__9brjMmGFaIx4wBkLyxxXZxw_164 = {77, (NimStrPayload*)&TM__9brjMmGFaIx4wBkLyxxXZxw_163};

/* section: NIM_merge_VARS */
N_LIB_PRIVATE tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* defaultSslContext__3GZQajZtKdLpqTTN2RjTzw;
extern NIM_BOOL nimInErrorMode__759bT87luu8XGcbkw13FUjA;
extern Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;
extern Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;
extern Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;

/* section: NIM_merge_PROCS */
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__759bT87luu8XGcbkw13FUjA);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, body__mkX1oYuRqAkh0RDJcoDCgQ)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* response) {
	NimStringV2 result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	{
		NimStringV2 T5_;
		if (!((*response).body.len == ((NI) 0))) goto LA3_;
		T5_.len = 0; T5_.p = NIM_NIL;
		T5_ = readAll__Z3k8HYNsCnt82WLNxaYQiQ((*response).bodyStream);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqsink___aBBXmHFBEivKqERloP6zmA((&(*response).body), T5_);
	}
	LA3_: ;
	eqcopy___aBBXmHFBEivKqERloP6zmA_2((&result), (*response).body);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory(p, ((int) 0), size);
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getBoundary__YX3WF0FwpX3W1dnYusiiXw)(tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* p) {
	NimStringV2 result;
{	result.len = 0; result.p = NIM_NIL;
	{
		NIM_BOOL T3_;
		NI T5_;
		T3_ = (NIM_BOOL)0;
		T3_ = (p == ((tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g*) NIM_NIL));
		if (T3_) goto LA4_;
		T5_ = (*p).content.len;
		T3_ = (T5_ == ((NI) 0));
		LA4_: ;
		if (!T3_) goto LA6_;
		goto BeforeRet_;
	}
	LA6_: ;
	{
		while (1) {
			NI T10_;
			NimStringV2 T11_;
			T10_ = (NI)0;
			T10_ = rand__v7jZDEs4VOsrcpvk0yo8Rg(((NI) IL64(9223372036854775807)));
			T11_.len = 0; T11_.p = NIM_NIL;
			T11_ = nimIntToStr(T10_);
			eqsink___aBBXmHFBEivKqERloP6zmA((&result), T11_);
			{
				NI i;
				tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw entry;
				NI i_2;
				NI L;
				NI T13_;
				i = (NI)0;
				nimZeroMem((void*)(&entry), sizeof(tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw));
				i_2 = ((NI) 0);
				T13_ = (*p).content.len;
				L = T13_;
				{
					while (1) {
						if (!(i_2 < L)) goto LA15;
						i = i_2;
						entry = (*p).content.p->data[i_2];
						{
							NIM_BOOL T18_;
							T18_ = (NIM_BOOL)0;
							T18_ = contains__KV0xCsBzaN9coqb7PG9au0oQ(entry.content, result);
							if (!T18_) goto LA19_;
							goto LA12;
						}
						goto LA16_;
						LA19_: ;
						{
							NI T22_;
							T22_ = ((*p).content.len-1);
							if (!(i == T22_)) goto LA23_;
							goto BeforeRet_;
						}
						goto LA16_;
						LA23_: ;
						LA16_: ;
						i_2 += ((NI) 1);
					} LA15: ;
				}
			} LA12: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
}
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size) {
	nimCopyMem(dest, source, size);
}
static N_INLINE(void, appendString)(NimStringV2* dest, NimStringV2 src) {
	{
		void* T5_;
		void* T6_;
		if (!(((NI) 0) < src.len)) goto LA3_;
		T5_ = (void*)0;
		T5_ = ((void*) ((&(*(*dest).p).data[(*dest).len])));
		T6_ = (void*)0;
		T6_ = ((void*) ((&(*src.p).data[((NI) 0)])));
		copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(T5_, T6_, ((NI) ((NI)(src.len + ((NI) 1)))));
		(*dest).len += src.len;
	}
	LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, readFileSizes__cRvnVPBe4rJR9cIs5w6AJww)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw* entry;
		NI i;
		NI L;
		NI T2_;
		entry = (tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw*)0;
		i = ((NI) 0);
		T2_ = (*multipart).content.len;
		L = T2_;
		{
			while (1) {
				if (!(i < L)) goto LA4;
				entry = (&(*multipart).content.p->data[i]);
				{
					NI64 fileSize;
					{
						if (!!((*entry).isFile)) goto LA8_;
						goto LA5;
					}
					LA8_: ;
					{
						if (!!((*entry)._isFile_1.isStream)) goto LA12_;
						(*entry)._isFile_1.fileSize = ((NI64) ((*entry).content.len));
						goto LA5;
					}
					LA12_: ;
					fileSize = nosgetFileSize((*entry).content);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					(*entry)._isFile_1.fileSize = fileSize;
				} LA5: ;
				i += ((NI) 1);
			} LA4: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, format__gVWUjCpNHhBYO9ai6KMPMKA)(tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw* entry, NimStringV2 boundary) {
	NimStringV2 result;
	NimStringV2 colontmpD_;
	NimStringV2 T1_;
	NimStringV2 T2_;
	result.len = 0; result.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_ = rawNewString(boundary.len + 4);
appendString((&T1_), TM__9brjMmGFaIx4wBkLyxxXZxw_12);
appendString((&T1_), boundary);
appendString((&T1_), TM__9brjMmGFaIx4wBkLyxxXZxw_14);
	result = T1_;
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_ = rawNewString((*entry).name.len + 39);
appendString((&T2_), TM__9brjMmGFaIx4wBkLyxxXZxw_16);
appendString((&T2_), (*entry).name);
appendString((&T2_), TM__9brjMmGFaIx4wBkLyxxXZxw_18);
	colontmpD_ = T2_;
	prepareAdd((&result), colontmpD_.len + 0);
appendString((&result), colontmpD_);
	{
		NimStringV2 colontmpD__2;
		NimStringV2 colontmpD__3;
		NimStringV2 T7_;
		NimStringV2 T8_;
		if (!(*entry).isFile) goto LA5_;
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
		T7_.len = 0; T7_.p = NIM_NIL;
		T7_ = rawNewString((*entry)._isFile_1.filename.len + 15);
appendString((&T7_), TM__9brjMmGFaIx4wBkLyxxXZxw_20);
appendString((&T7_), (*entry)._isFile_1.filename);
appendString((&T7_), TM__9brjMmGFaIx4wBkLyxxXZxw_22);
		colontmpD__2 = T7_;
		prepareAdd((&result), colontmpD__2.len + 0);
appendString((&result), colontmpD__2);
		T8_.len = 0; T8_.p = NIM_NIL;
		T8_ = rawNewString((*entry)._isFile_1.contentType.len + 16);
appendString((&T8_), TM__9brjMmGFaIx4wBkLyxxXZxw_24);
appendString((&T8_), (*entry)._isFile_1.contentType);
appendString((&T8_), TM__9brjMmGFaIx4wBkLyxxXZxw_25);
		colontmpD__3 = T8_;
		prepareAdd((&result), colontmpD__3.len + 0);
appendString((&result), colontmpD__3);
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__3));
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__2));
	}
	goto LA3_;
	LA5_: ;
	{
		NimStringV2 colontmpD__4;
		NimStringV2 T10_;
		colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
		T10_.len = 0; T10_.p = NIM_NIL;
		T10_ = rawNewString((*entry).content.len + 4);
appendString((&T10_), TM__9brjMmGFaIx4wBkLyxxXZxw_27);
appendString((&T10_), (*entry).content);
		colontmpD__4 = T10_;
		prepareAdd((&result), colontmpD__4.len + 0);
appendString((&result), colontmpD__4);
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__4));
	}
	LA3_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tySequence__sM4lkSb7zS6F7OVMvW9cffQ, format__N4eE9a9au9cfobiXawLjYLIIw)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ result;
	NimStringV2 bound;
	NimStringV2 T2_;
	NI64 length;
	NimStringV2 T12_;
	NimStringV2 T17_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	bound.len = 0; bound.p = NIM_NIL;
	bound = getBoundary__YX3WF0FwpX3W1dnYusiiXw(multipart);
	T2_.len = 0; T2_.p = NIM_NIL;
	T2_ = rawNewString(bound.len + 30);
appendString((&T2_), TM__9brjMmGFaIx4wBkLyxxXZxw_10);
appendString((&T2_), bound);
	X5BX5Deq___Iy0txpq5svlfrlKS9bU28Kw((*client).headers, TM__9brjMmGFaIx4wBkLyxxXZxw_8, T2_);
	readFileSizes__cRvnVPBe4rJR9cIs5w6AJww(client, multipart);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	length = (NI64)0;
	{
		tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw* entry;
		NI i;
		NI L;
		NI T4_;
		entry = (tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw*)0;
		i = ((NI) 0);
		T4_ = (*multipart).content.len;
		L = T4_;
		{
			while (1) {
				NimStringV2 colontmpD_;
				NimStringV2 T7_;
				if (!(i < L)) goto LA6;
				colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
				entry = (&(*multipart).content.p->data[i]);
				T7_.len = 0; T7_.p = NIM_NIL;
				colontmpD_ = format__gVWUjCpNHhBYO9ai6KMPMKA((&(*entry)), bound);
				T7_ = rawNewString(colontmpD_.len + 2);
appendString((&T7_), colontmpD_);
appendString((&T7_), TM__9brjMmGFaIx4wBkLyxxXZxw_28);
				add__dK9ajFgX5RSWQx0eHjjpjSQ((&result), T7_);
				{
					if (!(*entry).isFile) goto LA10_;
					length += (NI64)((*entry)._isFile_1.fileSize + IL64(2));
				}
				LA10_: ;
				i += ((NI) 1);
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
			} LA6: ;
		}
	}
	T12_.len = 0; T12_.p = NIM_NIL;
	T12_ = rawNewString(bound.len + 4);
appendString((&T12_), TM__9brjMmGFaIx4wBkLyxxXZxw_29);
appendString((&T12_), bound);
appendString((&T12_), TM__9brjMmGFaIx4wBkLyxxXZxw_30);
	add__dK9ajFgX5RSWQx0eHjjpjSQ((&result), T12_);
	{
		NimStringV2* s;
		NI i_2;
		NI L_2;
		NI T14_;
		s = (NimStringV2*)0;
		i_2 = ((NI) 0);
		T14_ = result.len;
		L_2 = T14_;
		{
			while (1) {
				if (!(i_2 < L_2)) goto LA16;
				s = (&result.p->data[i_2]);
				length += ((NI64) ((*s).len));
				i_2 += ((NI) 1);
			} LA16: ;
		}
	}
	T17_.len = 0; T17_.p = NIM_NIL;
	T17_ = nimInt64ToStr(length);
	X5BX5Deq___Iy0txpq5svlfrlKS9bU28Kw((*client).headers, TM__9brjMmGFaIx4wBkLyxxXZxw_32, T17_);
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&bound));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(int, nimCmpMem)(void* a, void* b, NI size) {
	int result;
	result = (int)0;
	result = memcmp(a, b, ((size_t) (size)));
	return result;
}
static N_INLINE(NIM_BOOL, equalMem__9bGgqEk7RXXl6eqM9c1HdELAsystem)(void* a, void* b, NI size) {
	NIM_BOOL result;
	int T1_;
	result = (NIM_BOOL)0;
	T1_ = (int)0;
	T1_ = nimCmpMem(a, b, size);
	result = (T1_ == ((NI32) 0));
	return result;
}
static N_INLINE(NIM_BOOL, eqStrings)(NimStringV2 a, NimStringV2 b) {
	NIM_BOOL result;
	NI alen;
	NI blen;
{	result = (NIM_BOOL)0;
	alen = a.len;
	blen = b.len;
	{
		if (!(alen == blen)) goto LA3_;
		{
			if (!(alen == ((NI) 0))) goto LA7_;
			result = NIM_TRUE;
			goto BeforeRet_;
		}
		LA7_: ;
		result = equalMem__9bGgqEk7RXXl6eqM9c1HdELAsystem(((void*) ((&a.p->data[((NI) 0)]))), ((void*) ((&b.p->data[((NI) 0)]))), ((NI) (alen)));
		goto BeforeRet_;
	}
	LA3_: ;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NI, minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system)(NI x, NI y) {
	NI result;
	result = (NI)0;
	result = ((NI) ((NU)((NU64)(((NU) (x))) - (NU64)(((NU) (y))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	{
		tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A* cell;
		NI T5_;
		if (!!((p == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___dgYAo7RfdUVVpvkfKDym8w_2system(((NI) (ptrdiff_t) (p)), ((NI) 8));
		cell = ((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T5_));
		{
			if (!((NI)((*cell).rc & ((NI) -8)) == ((NI) 0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
		LA8_: ;
		{
			(*cell).rc -= ((NI) 8);
		}
		LA6_: ;
	}
	LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___U8uLAIXBq8V9bZzYUjcBzkA)(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).Sup.Sup.Sup.parent);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).Sup.Sup.Sup.parent);
	}
	LA4_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).Sup.Sup.Sup.message));
	eqdestroy___4fQQqvAqifkWGVa4g39cI5A((&(*dest).Sup.Sup.Sup.trace));
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).Sup.Sup.Sup.up);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest).Sup.Sup.Sup.up);
	}
	LA9_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, close__LSkbNH0VA1HBcOjYrAgBmA)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		if (!(*client).connected) goto LA3_;
		close__dPXIsN1nx9bPvap47WTEMow((*client).socket, 2);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*client).connected = NIM_FALSE;
	}
	LA3_: ;
	}BeforeRet_: ;
}
static N_INLINE(Exception*, getCurrentException)(void) {
	Exception* result;
	result = (Exception*)0;
	eqcopy___rR9boD7urcxl7uyUtE46AOA(&result, currException__9bVPeDJlYTi9bQApZpfH8wjg);
	return result;
}
static N_INLINE(void, popCurrentException)(void) {
	eqcopy___rR9boD7urcxl7uyUtE46AOA(&currException__9bVPeDJlYTi9bQApZpfH8wjg, (*currException__9bVPeDJlYTi9bQApZpfH8wjg).up);
}
static N_INLINE(void, nimAddCharV1)(NimStringV2* s, NIM_CHAR c) {
	prepareAdd(s, ((NI) 1));
	(*(*s).p).data[(*s).len] = c;
	(*(*s).p).data[(NI)((*s).len + ((NI) 1))] = 0;
	(*s).len += ((NI) 1);
}
static N_INLINE(NIM_BOOL, isFilled__5Qpmu5QqwDY0esVXn6wf7wtables)(NI hcode) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	result = !((hcode == ((NI) 0)));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, generateHeaders__BYtup6hw7Ii2LjHd19cuuhA)(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* requestUrl, NimStringV2 httpMethod, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* proxy) {
	NimStringV2 result;
	NimStringV2 upperMethod;
	result.len = 0; result.p = NIM_NIL;
	upperMethod.len = 0; upperMethod.p = NIM_NIL;
	upperMethod = nsuToUpperAsciiStr(httpMethod);
	result = upperMethod;
	nimAddCharV1((&result), 32);
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (proxy == 0);
		if (T3_) goto LA4_;
		T3_ = eqStrings((*requestUrl).scheme, TM__9brjMmGFaIx4wBkLyxxXZxw_41);
		LA4_: ;
		if (!T3_) goto LA5_;
		{
			NIM_BOOL T9_;
			T9_ = (NIM_BOOL)0;
			T9_ = nsuStartsWith((*requestUrl).path, TM__9brjMmGFaIx4wBkLyxxXZxw_43);
			if (!!(T9_)) goto LA10_;
			nimAddCharV1((&result), 47);
		}
		LA10_: ;
		prepareAdd((&result), (*requestUrl).path.len + 0);
appendString((&result), (*requestUrl).path);
		{
			NimStringV2 colontmpD_;
			NimStringV2 T16_;
			if (!(((NI) 0) < (*requestUrl).query.len)) goto LA14_;
			colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
			T16_.len = 0; T16_.p = NIM_NIL;
			T16_ = rawNewString((*requestUrl).query.len + 1);
appendString((&T16_), TM__9brjMmGFaIx4wBkLyxxXZxw_45);
appendString((&T16_), (*requestUrl).query);
			colontmpD_ = T16_;
			prepareAdd((&result), colontmpD_.len + 0);
appendString((&result), colontmpD_);
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
		}
		LA14_: ;
	}
	goto LA1_;
	LA5_: ;
	{
		tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ modifiedUrl;
		NimStringV2 colontmpD__2;
		nimZeroMem((void*)(&modifiedUrl), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
		colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
		eqcopy___OydxUV9ad0I3qVcqasXV7RQ((&modifiedUrl), requestUrl);
		{
			if (!eqStrings((*requestUrl).scheme, TM__9brjMmGFaIx4wBkLyxxXZxw_46)) goto LA20_;
			eqsink___aBBXmHFBEivKqERloP6zmA((&modifiedUrl.scheme), TM__9brjMmGFaIx4wBkLyxxXZxw_48);
		}
		LA20_: ;
		colontmpD__2 = dollar___9aI7qw5xvHD3Zb9b9cJik76iw((&modifiedUrl));
		prepareAdd((&result), colontmpD__2.len + 0);
appendString((&result), colontmpD__2);
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__2));
		eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw((&modifiedUrl));
	}
	LA1_: ;
	prepareAdd((&result), 11);
appendString((&result), TM__9brjMmGFaIx4wBkLyxxXZxw_50);
	{
		NIM_BOOL T24_;
		T24_ = (NIM_BOOL)0;
		T24_ = hasKey__jz0AniI5No9bnkMo9aqdkc2A(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_52);
		if (!!(T24_)) goto LA25_;
		{
			NimStringV2 colontmpD__3;
			NimStringV2 T31_;
			if (!((*requestUrl).port.len == 0)) goto LA29_;
			colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
			T31_.len = 0; T31_.p = NIM_NIL;
			T31_ = rawNewString((*requestUrl).hostname.len + 8);
appendString((&T31_), TM__9brjMmGFaIx4wBkLyxxXZxw_54);
appendString((&T31_), (*requestUrl).hostname);
appendString((&T31_), TM__9brjMmGFaIx4wBkLyxxXZxw_55);
			colontmpD__3 = T31_;
			prepareAdd((&result), colontmpD__3.len + 0);
appendString((&result), colontmpD__3);
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__3));
		}
		goto LA27_;
		LA29_: ;
		{
			NimStringV2 colontmpD__4;
			NimStringV2 T33_;
			colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
			T33_.len = 0; T33_.p = NIM_NIL;
			T33_ = rawNewString((*requestUrl).hostname.len + (*requestUrl).port.len + 9);
appendString((&T33_), TM__9brjMmGFaIx4wBkLyxxXZxw_56);
appendString((&T33_), (*requestUrl).hostname);
appendString((&T33_), TM__9brjMmGFaIx4wBkLyxxXZxw_58);
appendString((&T33_), (*requestUrl).port);
appendString((&T33_), TM__9brjMmGFaIx4wBkLyxxXZxw_59);
			colontmpD__4 = T33_;
			prepareAdd((&result), colontmpD__4.len + 0);
appendString((&result), colontmpD__4);
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__4));
		}
		LA27_: ;
	}
	LA25_: ;
	{
		NIM_BOOL T36_;
		T36_ = (NIM_BOOL)0;
		T36_ = hasKey__jz0AniI5No9bnkMo9aqdkc2A(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_61);
		if (!!(T36_)) goto LA37_;
		prepareAdd((&result), 24);
appendString((&result), TM__9brjMmGFaIx4wBkLyxxXZxw_63);
	}
	LA37_: ;
	{
		NIM_BOOL T41_;
		NimStringV2 auth;
		NimStringV2 colontmpD__5;
		NimStringV2 T45_;
		T41_ = (NIM_BOOL)0;
		T41_ = !((proxy == 0));
		if (!(T41_)) goto LA42_;
		T41_ = !(((*proxy).auth.len == 0));
		LA42_: ;
		if (!T41_) goto LA43_;
		auth.len = 0; auth.p = NIM_NIL;
		colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
		auth = encode__D4bDwZBUb9bAJslbVxAPmbg((*proxy).auth, NIM_FALSE);
		T45_.len = 0; T45_.p = NIM_NIL;
		T45_ = rawNewString(auth.len + 29);
appendString((&T45_), TM__9brjMmGFaIx4wBkLyxxXZxw_65);
appendString((&T45_), auth);
appendString((&T45_), TM__9brjMmGFaIx4wBkLyxxXZxw_66);
		colontmpD__5 = T45_;
		prepareAdd((&result), colontmpD__5.len + 0);
appendString((&result), colontmpD__5);
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__5));
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&auth));
	}
	LA43_: ;
	{
		NimStringV2 key;
		NimStringV2 val;
		key.len = 0; key.p = NIM_NIL;
		val.len = 0; val.p = NIM_NIL;
		{
			NimStringV2 k;
			tySequence__sM4lkSb7zS6F7OVMvW9cffQ v;
			NI L;
			k.len = 0; k.p = NIM_NIL;
			v.len = 0; v.p = NIM_NIL;
			L = len__J4hnoSPhc6KiK07n7KgZ9cQ((*headers).table);
			{
				NI h;
				NI colontmp_;
				NI T49_;
				NI res;
				h = (NI)0;
				colontmp_ = (NI)0;
				T49_ = ((*(*headers).table).data.len-1);
				colontmp_ = T49_;
				res = ((NI) 0);
				{
					while (1) {
						if (!(res <= colontmp_)) goto LA51;
						h = res;
						{
							NIM_BOOL T54_;
							T54_ = (NIM_BOOL)0;
							T54_ = isFilled__5Qpmu5QqwDY0esVXn6wf7wtables((*(*headers).table).data.p->data[h].Field0);
							if (!T54_) goto LA55_;
							k = (*(*headers).table).data.p->data[h].Field1;
							v = (*(*headers).table).data.p->data[h].Field2;
							{
								NimStringV2* value;
								NI i;
								NI L_2;
								NI T58_;
								value = (NimStringV2*)0;
								i = ((NI) 0);
								T58_ = v.len;
								L_2 = T58_;
								{
									while (1) {
										NimStringV2 colontmpD__6;
										NimStringV2 T61_;
										if (!(i < L_2)) goto LA60;
										colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
										value = (&v.p->data[i]);
										eqcopy___aBBXmHFBEivKqERloP6zmA_2((&key), k);
										eqcopy___aBBXmHFBEivKqERloP6zmA_2((&val), (*value));
										T61_.len = 0; T61_.p = NIM_NIL;
										T61_ = rawNewString(key.len + val.len + 4);
appendString((&T61_), key);
appendString((&T61_), TM__9brjMmGFaIx4wBkLyxxXZxw_68);
appendString((&T61_), val);
appendString((&T61_), TM__9brjMmGFaIx4wBkLyxxXZxw_69);
										colontmpD__6 = T61_;
										prepareAdd((&result), colontmpD__6.len + 0);
appendString((&result), colontmpD__6);
										i += ((NI) 1);
										eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__6));
									} LA60: ;
								}
							}
						}
						LA55_: ;
						res += ((NI) 1);
					} LA51: ;
				}
			}
		}
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&val));
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&key));
	}
	prepareAdd((&result), 2);
appendString((&result), TM__9brjMmGFaIx4wBkLyxxXZxw_70);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___A1YDm2u0M1bbDfuy6EU5UA)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* dest) {
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).version));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).status));
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).headers);
		if (!T3_) goto LA4_;
		eqdestroy___gczQO0vzLYPQ2o5V9bLxOCQ((*dest).headers);
		nimRawDispose((*dest).headers, ((NI) 8));
	}
	LA4_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).body));
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).bodyStream);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest).bodyStream);
	}
	LA9_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___b19aGGEWVnlKBxGOhME5IOA)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA** dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___A1YDm2u0M1bbDfuy6EU5UA((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___8spWQEcy8cWEUfdgbLNs4A)(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ** dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest));
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___F39brdC9bGKsCBoX3fDMHByw)(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).Sup.Sup.Sup.parent);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).Sup.Sup.Sup.parent);
	}
	LA4_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).Sup.Sup.Sup.message));
	eqdestroy___4fQQqvAqifkWGVa4g39cI5A((&(*dest).Sup.Sup.Sup.trace));
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).Sup.Sup.Sup.up);
		if (!T8_) goto LA9_;
		nimDestroyAndDispose((*dest).Sup.Sup.Sup.up);
	}
	LA9_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, httpError__QP4vBkFseuds6dKm2yqk9cw)(NimStringV2 msg) {
	tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ* e;
	tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ* blitTmp;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	e = (tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ*)0;
	eqdestroy___8spWQEcy8cWEUfdgbLNs4A(&e);
	e = (tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ*) nimNewObj(sizeof(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ), NIM_ALIGNOF(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ));
	(*e).Sup.Sup.Sup.Sup.m_type = (&NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_);
	(*e).Sup.Sup.Sup.name = "ProtocolError";
	eqsink___aBBXmHFBEivKqERloP6zmA((&(*e).Sup.Sup.Sup.message), msg);
	msg.len = 0; msg.p = NIM_NIL;
	blitTmp = e;
	e = 0;
	raiseExceptionEx((Exception*)blitTmp, "ProtocolError", "httpError", "httpclient.nim", 308);
	goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&msg));
		eqdestroy___8spWQEcy8cWEUfdgbLNs4A(&e);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NI, skipWhitespace__6WuCTfsk2bOGNtGSxg9cZWAparseutils)(NimStringV2 s, NI start) {
	NI result;
	result = (NI)0;
	result = ((NI) 0);
	{
		while (1) {
			NIM_BOOL T3_;
			T3_ = (NIM_BOOL)0;
			T3_ = ((NI)(start + result) < s.len);
			if (!(T3_)) goto LA4_;
			T3_ = (((NU8)(s.p->data[(NI)(start + result)])) == ((NU8)(32)) || ((NU8)(s.p->data[(NI)(start + result)])) == ((NU8)(9)) || ((NU8)(s.p->data[(NI)(start + result)])) == ((NU8)(11)) || ((NU8)(s.p->data[(NI)(start + result)])) == ((NU8)(13)) || ((NU8)(s.p->data[(NI)(start + result)])) == ((NU8)(10)) || ((NU8)(s.p->data[(NI)(start + result)])) == ((NU8)(12)));
			LA4_: ;
			if (!T3_) goto LA2;
			result += ((NI) 1);
		} LA2: ;
	}
	return result;
}
static N_INLINE(void, nimPrepareStrMutationV2)(NimStringV2* s) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*s).p == ((NimStrPayload*) NIM_NIL)));
		if (!(T3_)) goto LA4_;
		T3_ = ((NI)((*(*s).p).cap & ((NI) IL64(4611686018427387904))) == ((NI) IL64(4611686018427387904)));
		LA4_: ;
		if (!T3_) goto LA5_;
		nimPrepareStrMutationImpl__C0YoABEefTaYbWLv9aVOzZA(s);
	}
	LA5_: ;
}
static N_INLINE(NimStringV2, X5BX5D___ogYTOKbgqbjPfyC123US1gsystem)(NimStringV2 s, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA x) {
	NimStringV2 result;
	NI a;
	NI L;
	result.len = 0; result.p = NIM_NIL;
	a = x.a;
	L = (NI)((NI)((NI)(s.len - x.b) - a) + ((NI) 1));
	result = mnewString(((NI) (L)));
	{
		NI i;
		NI i_2;
		i = (NI)0;
		i_2 = ((NI) 0);
		{
			while (1) {
				if (!(i_2 < L)) goto LA3;
				i = i_2;
				nimPrepareStrMutationV2((&result));
				result.p->data[i] = s.p->data[(NI)(i + a)];
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	return result;
}
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___xNR8BVBMWzS9bXXNMikmyLgsystem)(NI a, NI b) {
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	result.a = a;
	result.b = b;
	return result;
}
static N_INLINE(NI, parseUntil__jfFErPNXs9cw9bvuw3hS0GVAparseutils)(NimStringV2 s, NimStringV2* token, NIM_CHAR until, NI start) {
	NI result;
	NI i;
	result = (NI)0;
	i = start;
	{
		while (1) {
			NIM_BOOL T3_;
			T3_ = (NIM_BOOL)0;
			T3_ = (i < s.len);
			if (!(T3_)) goto LA4_;
			T3_ = !(((NU8)(s.p->data[i]) == (NU8)(until)));
			LA4_: ;
			if (!T3_) goto LA2;
			i += ((NI) 1);
		} LA2: ;
	}
	result = (NI)(i - start);
	fastSubstr__a88zu6ztJ3SBDTHcnqFjsg(s, token, start, result);
	return result;
}
static N_INLINE(NI, len__phLlcLkG9amvbv9cul0w5ERQhttpcore)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers) {
	NI result;
	result = (NI)0;
	result = len__J4hnoSPhc6KiK07n7KgZ9cQ((*headers).table);
	return result;
}
static N_INLINE(NimStringV2, X5BX5D___FPvLvuwqfYMFkcbGfPM8QQsystem)(NimStringV2 s, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA x) {
	NimStringV2 result;
	NI a;
	NI L;
	result.len = 0; result.p = NIM_NIL;
	a = x.a;
	L = (NI)((NI)(x.b - a) + ((NI) 1));
	result = mnewString(((NI) (L)));
	{
		NI i;
		NI i_2;
		i = (NI)0;
		i_2 = ((NI) 0);
		{
			while (1) {
				if (!(i_2 < L)) goto LA3;
				i = i_2;
				nimPrepareStrMutationV2((&result));
				result.p->data[i] = s.p->data[(NI)(i + a)];
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	return result;
}
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___BokNSDrKN1xmV1nA01G9brAsystem)(NI a, NI b) {
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	result.a = a;
	result.b = b;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, code__74MIEFap0tx9bAcFdN6ES7Q)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* response) {
	NI result;
	NimStringV2 colontmpD_;
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T2_;
	NI T3_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	T2_ = dotdot___BokNSDrKN1xmV1nA01G9brAsystem(((NI) 0), ((NI) 2));
	colontmpD_ = X5BX5D___FPvLvuwqfYMFkcbGfPM8QQsystem((*response).status, T2_);
	T3_ = (NI)0;
	T3_ = nsuParseInt(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	result = ((NI) (T3_));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
	goto BeforeRet_;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NimStringV2, recv__RNH6ElAkiN5likr2EisKHQnet)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, NI size, NI timeout, tySet_tyEnum_SocketFlag__4xio0cAXR7XG4pF9bVcpxEg flags) {
	NimStringV2 result;
	NI T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	result = mnewString(((NI) (size)));
	T1_ = (NI)0;
	T1_ = recv__WAuvR33LNsmM2rTnugz1Lw(socket, (&result), size, timeout, flags);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(void)(T1_);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, reportProgress__gU9aunvzmdn878ItM4BwBjQ)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NI64 progress) {
	(*client).contentProgress += progress;
	(*client).oneSecondProgress += progress;
	{
		tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w T3_;
		tyObject_Duration__lj9ar6Co3fgk6NgGnVaNpJw T4_;
		NI64 T5_;
		T3_ = getMonoTime__QkEugs2Q2iFK9b83sl2B6wA();
		T4_ = minus___p9cBm7joedh4BwcboQ3HMVQ(T3_, (*client).lastProgressReport);
		T5_ = (NI64)0;
		T5_ = inSeconds__df0d89cDnRIju9aB6p1W1qVA_2(T4_);
		if (!(IL64(1) < T5_)) goto LA6_;
		{
			if (!!(((*client).onProgressChanged.ClP_0 == 0))) goto LA10_;
			(*client).onProgressChanged.ClE_0? (*client).onProgressChanged.ClP_0((*client).contentTotal, (*client).contentProgress, (*client).oneSecondProgress, (*client).onProgressChanged.ClE_0):((TM__9brjMmGFaIx4wBkLyxxXZxw_106)((*client).onProgressChanged.ClP_0))((*client).contentTotal, (*client).contentProgress, (*client).oneSecondProgress);
			(*client).oneSecondProgress = IL64(0);
			(*client).lastProgressReport = getMonoTime__QkEugs2Q2iFK9b83sl2B6wA();
		}
		LA10_: ;
	}
	LA6_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, recvFull__yQD3rUDgVn4FSoNLCDnXQQ)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NI size, NI timeout, NIM_BOOL keep) {
	NI result;
	NI readLen;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	readLen = ((NI) 0);
	{
		while (1) {
			NimStringV2 data;
			NI remainingSize;
			NI sizeToRecv;
			data.len = 0; data.p = NIM_NIL;
			{
				if (!(size == readLen)) goto LA6_;
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&data));
				goto LA1;
			}
			LA6_: ;
			remainingSize = (NI)(size - readLen);
			sizeToRecv = ((remainingSize <= ((NI) 4000)) ? remainingSize : ((NI) 4000));
			data = recv__RNH6ElAkiN5likr2EisKHQnet((*client).socket, sizeToRecv, timeout, 2);
			if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			{
				if (!(data.len == 0)) goto LA10_;
				close__LSkbNH0VA1HBcOjYrAgBmA(client);
				if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&data));
				goto LA1;
			}
			LA10_: ;
			readLen += data.len;
			{
				if (!keep) goto LA14_;
				write__egjcKjt8WddLFyjTFl5BAw((*client).bodyStream, data);
				if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			}
			LA14_: ;
			reportProgress__gU9aunvzmdn878ItM4BwBjQ(client, ((NI64) (data.len)));
			{
				LA3_:;
			}
			{
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&data));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
	} LA1: ;
	result = readLen;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, parseChunks__LSkbNH0VA1HBcOjYrAgBmA_2)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		while (1) {
			NimStringV2 chunkSizeStr;
			NI chunkSize;
			NI i;
			NI bytesRead;
			chunkSizeStr.len = 0; chunkSizeStr.p = NIM_NIL;
			chunkSize = ((NI) 0);
			chunkSizeStr = recvLine__xQiPYgNz7DM0cyQl7evHRQ((*client).socket, ((NI) -1), 2, ((NI) 1000000));
			if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			i = ((NI) 0);
			{
				if (!(chunkSizeStr.len == 0)) goto LA6_;
				httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_103);
				if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			}
			LA6_: ;
			{
				while (1) {
					if (!(i < chunkSizeStr.len)) goto LA9;
					switch (((NU8)(chunkSizeStr.p->data[i]))) {
					case 48 ... 57:
					{
						chunkSize = (NI)((NI)((NU64)(chunkSize) << (NU64)(((NI) 4))) | (NI)(((NU8)(chunkSizeStr.p->data[i])) - ((NI) 48)));
					}
					break;
					case 97 ... 102:
					{
						chunkSize = (NI)((NI)((NU64)(chunkSize) << (NU64)(((NI) 4))) | (NI)((NI)(((NU8)(chunkSizeStr.p->data[i])) - ((NI) 97)) + ((NI) 10)));
					}
					break;
					case 65 ... 70:
					{
						chunkSize = (NI)((NI)((NU64)(chunkSize) << (NU64)(((NI) 4))) | (NI)((NI)(((NU8)(chunkSizeStr.p->data[i])) - ((NI) 65)) + ((NI) 10)));
					}
					break;
					case 59:
					{
						goto LA8;
					}
					break;
					default:
					{
						NimStringV2 T15_;
						T15_.len = 0; T15_.p = NIM_NIL;
						T15_ = rawNewString(chunkSizeStr.len + 20);
appendString((&T15_), TM__9brjMmGFaIx4wBkLyxxXZxw_105);
appendString((&T15_), chunkSizeStr);
						httpError__QP4vBkFseuds6dKm2yqk9cw(T15_);
						if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
					}
					break;
					}
					i += ((NI) 1);
				} LA9: ;
			} LA8: ;
			{
				NI T20_;
				if (!(chunkSize <= ((NI) 0))) goto LA18_;
				T20_ = (NI)0;
				T20_ = recvFull__yQD3rUDgVn4FSoNLCDnXQQ(client, ((NI) 2), (*client).timeout, NIM_FALSE);
				if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
				(void)(T20_);
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&chunkSizeStr));
				goto LA1;
			}
			LA18_: ;
			bytesRead = recvFull__yQD3rUDgVn4FSoNLCDnXQQ(client, chunkSize, (*client).timeout, NIM_TRUE);
			if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			{
				if (!!((bytesRead == chunkSize))) goto LA23_;
				httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_107);
				if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			}
			LA23_: ;
			bytesRead = recvFull__yQD3rUDgVn4FSoNLCDnXQQ(client, ((NI) 2), (*client).timeout, NIM_FALSE);
			if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			{
				if (!!((bytesRead == ((NI) 2)))) goto LA27_;
				httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_108);
				if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
			}
			LA27_: ;
			{
				LA3_:;
			}
			{
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&chunkSizeStr));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
	} LA1: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, parseBody__nesWh4uP9aaR2HAQTFYAzUA)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, NimStringV2 httpVersion) {
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__2;
	NimStringV2 colontmpD__3;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__4;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__5;
	NimStringV2 colontmpD__6;
	tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
	colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
	colontmpD__5.len = 0; colontmpD__5.p = NIM_NIL;
	colontmpD__6.len = 0; colontmpD__6.p = NIM_NIL;
	(*client).contentTotal = IL64(0);
	(*client).contentProgress = IL64(0);
	(*client).oneSecondProgress = IL64(0);
	nimZeroMem((void*)(&T2_), sizeof(tyObject_MonoTime__FEvFMlkqJiSSGVO6HgTv8w));
	(*client).lastProgressReport = T2_;
	{
		colontmpD_.len = 1; colontmpD_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
		colontmpD_.p->data[0] = TM__9brjMmGFaIx4wBkLyxxXZxw_99;
		colontmpD__2 = getOrDefault__aSNwyYYZ2RsZRzsI4edhhA(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_98, colontmpD_);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__3 = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(colontmpD__2);
		if (!eqStrings(colontmpD__3, TM__9brjMmGFaIx4wBkLyxxXZxw_101)) goto LA5_;
		parseChunks__LSkbNH0VA1HBcOjYrAgBmA_2(client);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA3_;
	LA5_: ;
	{
		tySequence__sM4lkSb7zS6F7OVMvW9cffQ contentLengthHeader;
		tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__7;
		NimStringV2 colontmpD__8;
		contentLengthHeader.len = 0; contentLengthHeader.p = NIM_NIL;
		colontmpD__7.len = 0; colontmpD__7.p = NIM_NIL;
		colontmpD__8.len = 0; colontmpD__8.p = NIM_NIL;
		colontmpD__7.len = 1; colontmpD__7.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
		colontmpD__7.p->data[0] = TM__9brjMmGFaIx4wBkLyxxXZxw_111;
		contentLengthHeader = getOrDefault__aSNwyYYZ2RsZRzsI4edhhA(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_110, colontmpD__7);
		if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		{
			NimStringV2 colontmpD__9;
			NI length;
			colontmpD__8 = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(contentLengthHeader);
			if (!!((colontmpD__8.len == 0))) goto LA11_;
			colontmpD__9.len = 0; colontmpD__9.p = NIM_NIL;
			colontmpD__9 = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(contentLengthHeader);
			length = nsuParseInt(colontmpD__9);
			if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
			(*client).contentTotal = ((NI64) (length));
			{
				NI recvLen;
				if (!(((NI) 0) < length)) goto LA16_;
				recvLen = recvFull__yQD3rUDgVn4FSoNLCDnXQQ(client, length, (*client).timeout, NIM_TRUE);
				if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
				{
					if (!(recvLen == ((NI) 0))) goto LA20_;
					close__LSkbNH0VA1HBcOjYrAgBmA(client);
					if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
					httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_113);
					if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
				}
				LA20_: ;
				{
					NimStringV2 colontmpD__10;
					NimStringV2 colontmpD__11;
					NimStringV2 T27_;
					if (!!((recvLen == length))) goto LA24_;
					colontmpD__10.len = 0; colontmpD__10.p = NIM_NIL;
					colontmpD__11.len = 0; colontmpD__11.p = NIM_NIL;
					T27_.len = 0; T27_.p = NIM_NIL;
					colontmpD__10 = nimIntToStr(length);
					colontmpD__11 = nimIntToStr(recvLen);
					T27_ = rawNewString(colontmpD__10.len + colontmpD__11.len + 59);
appendString((&T27_), TM__9brjMmGFaIx4wBkLyxxXZxw_115);
appendString((&T27_), colontmpD__10);
appendString((&T27_), TM__9brjMmGFaIx4wBkLyxxXZxw_117);
appendString((&T27_), colontmpD__11);
					httpError__QP4vBkFseuds6dKm2yqk9cw(T27_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA26_;
					{
						LA26_:;
					}
					{
						eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__11));
						eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__10));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto LA13_;
				}
				LA24_: ;
			}
			LA16_: ;
			{
				LA13_:;
			}
			{
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__9));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		}
		goto LA9_;
		LA11_: ;
		{
			tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__12;
			tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__13;
			NimStringV2 colontmpD__14;
			tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__15;
			tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__16;
			NimStringV2 colontmpD__17;
			NIM_BOOL implicitConnectionClose;
			NIM_BOOL T34_;
			NIM_BOOL T36_;
			colontmpD__12.len = 0; colontmpD__12.p = NIM_NIL;
			colontmpD__13.len = 0; colontmpD__13.p = NIM_NIL;
			colontmpD__14.len = 0; colontmpD__14.p = NIM_NIL;
			colontmpD__15.len = 0; colontmpD__15.p = NIM_NIL;
			colontmpD__16.len = 0; colontmpD__16.p = NIM_NIL;
			colontmpD__17.len = 0; colontmpD__17.p = NIM_NIL;
			T34_ = (NIM_BOOL)0;
			T34_ = eqStrings(httpVersion, TM__9brjMmGFaIx4wBkLyxxXZxw_118);
			if (T34_) goto LA35_;
			T36_ = (NIM_BOOL)0;
			T36_ = eqStrings(httpVersion, TM__9brjMmGFaIx4wBkLyxxXZxw_119);
			if (!(T36_)) goto LA37_;
			colontmpD__12.len = 1; colontmpD__12.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
			colontmpD__12.p->data[0] = TM__9brjMmGFaIx4wBkLyxxXZxw_122;
			colontmpD__13 = getOrDefault__aSNwyYYZ2RsZRzsI4edhhA(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_121, colontmpD__12);
			if (NIM_UNLIKELY(*nimErr_)) goto LA33_;
			colontmpD__14 = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(colontmpD__13);
			T36_ = (colontmpD__14.len == 0);
			LA37_: ;
			T34_ = T36_;
			LA35_: ;
			implicitConnectionClose = T34_;
			{
				NIM_BOOL T40_;
				T40_ = (NIM_BOOL)0;
				colontmpD__15.len = 1; colontmpD__15.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
				colontmpD__15.p->data[0] = TM__9brjMmGFaIx4wBkLyxxXZxw_124;
				colontmpD__16 = getOrDefault__aSNwyYYZ2RsZRzsI4edhhA(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_123, colontmpD__15);
				if (NIM_UNLIKELY(*nimErr_)) goto LA33_;
				colontmpD__17 = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(colontmpD__16);
				T40_ = eqStrings(colontmpD__17, TM__9brjMmGFaIx4wBkLyxxXZxw_126);
				if (T40_) goto LA41_;
				T40_ = implicitConnectionClose;
				LA41_: ;
				if (!T40_) goto LA42_;
				{
					while (1) {
						NI recvLen_2;
						recvLen_2 = recvFull__yQD3rUDgVn4FSoNLCDnXQQ(client, ((NI) 4000), (*client).timeout, NIM_TRUE);
						if (NIM_UNLIKELY(*nimErr_)) goto LA33_;
						{
							if (!!((recvLen_2 == ((NI) 4000)))) goto LA48_;
							close__LSkbNH0VA1HBcOjYrAgBmA(client);
							if (NIM_UNLIKELY(*nimErr_)) goto LA33_;
							goto LA44;
						}
						LA48_: ;
					}
				} LA44: ;
			}
			LA42_: ;
			{
				LA33_:;
			}
			{
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__17));
				eqdestroy___9cEHZYAST9afMf7sM41NLYIQ((&colontmpD__16));
				eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&colontmpD__15));
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__14));
				eqdestroy___9cEHZYAST9afMf7sM41NLYIQ((&colontmpD__13));
				eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&colontmpD__12));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA8_;
		}
		LA9_: ;
		{
			LA8_:;
		}
		{
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__8));
			eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&colontmpD__7));
			eqdestroy___9cEHZYAST9afMf7sM41NLYIQ((&contentLengthHeader));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA3_: ;
	setPosition__cci01mizUCs1g9a9bQPBwweQ_3((*client).bodyStream, ((NI) 0));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		colontmpD__4.len = 1; colontmpD__4.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
		colontmpD__4.p->data[0] = TM__9brjMmGFaIx4wBkLyxxXZxw_128;
		colontmpD__5 = getOrDefault__aSNwyYYZ2RsZRzsI4edhhA(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_127, colontmpD__4);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmpD__6 = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(colontmpD__5);
		if (!eqStrings(colontmpD__6, TM__9brjMmGFaIx4wBkLyxxXZxw_129)) goto LA56_;
		close__LSkbNH0VA1HBcOjYrAgBmA(client);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA56_: ;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__6));
		eqdestroy___9cEHZYAST9afMf7sM41NLYIQ((&colontmpD__5));
		eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&colontmpD__4));
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__3));
		eqdestroy___9cEHZYAST9afMf7sM41NLYIQ((&colontmpD__2));
		eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&colontmpD_));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*, parseResponse__3AoUMM1jyrz8BUdsjBoKYQ)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NIM_BOOL getBody) {
	tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* result;
	NimStringV2 line;
	NIM_BOOL parsedStatus;
	NI linei;
	NIM_BOOL fullyRead;
	tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*)0;
	line.len = 0; line.p = NIM_NIL;
	eqdestroy___b19aGGEWVnlKBxGOhME5IOA(&result);
	result = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*) nimNewObj(sizeof(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA), NIM_ALIGNOF(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA));
	parsedStatus = NIM_FALSE;
	linei = ((NI) 0);
	fullyRead = NIM_FALSE;
	line = TM__9brjMmGFaIx4wBkLyxxXZxw_71;
	T2_ = (tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*)0;
	T2_ = newHttpHeaders__m5XuFRjmtJnvrQCk25khAA(NIM_FALSE);
	eqsink___mcVzTPma3mVmolqKCGb1Iw(&(*result).headers, T2_);
	{
		while (1) {
			NimStringV2 T5_;
			linei = ((NI) 0);
			T5_.len = 0; T5_.p = NIM_NIL;
			T5_ = recvLine__xQiPYgNz7DM0cyQl7evHRQ((*client).socket, (*client).timeout, 2, ((NI) 1000000));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			eqsink___aBBXmHFBEivKqERloP6zmA((&line), T5_);
			{
				if (!(line.len == 0)) goto LA8_;
				close__LSkbNH0VA1HBcOjYrAgBmA(client);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				goto LA3;
			}
			LA8_: ;
			{
				if (!eqStrings(line, TM__9brjMmGFaIx4wBkLyxxXZxw_72)) goto LA12_;
				fullyRead = NIM_TRUE;
				goto LA3;
			}
			LA12_: ;
			{
				NI le;
				NI T32_;
				tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T33_;
				NimStringV2 T34_;
				if (!!(parsedStatus)) goto LA16_;
				le = skipIgnoreCase__Z630VYBL4pZDWlOyn05K5w(line, TM__9brjMmGFaIx4wBkLyxxXZxw_74, linei);
				{
					NimStringV2 T22_;
					if (!(le <= ((NI) 0))) goto LA20_;
					T22_.len = 0; T22_.p = NIM_NIL;
					T22_ = rawNewString(line.len + 24);
appendString((&T22_), TM__9brjMmGFaIx4wBkLyxxXZxw_76);
appendString((&T22_), line);
appendString((&T22_), TM__9brjMmGFaIx4wBkLyxxXZxw_78);
					httpError__QP4vBkFseuds6dKm2yqk9cw(T22_);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				}
				LA20_: ;
				linei += le;
				le = skipIgnoreCase__Z630VYBL4pZDWlOyn05K5w(line, TM__9brjMmGFaIx4wBkLyxxXZxw_80, linei);
				{
					if (!(((NI) 0) < le)) goto LA25_;
					eqsink___aBBXmHFBEivKqERloP6zmA((&(*result).version), TM__9brjMmGFaIx4wBkLyxxXZxw_81);
				}
				goto LA23_;
				LA25_: ;
				{
					le = skipIgnoreCase__Z630VYBL4pZDWlOyn05K5w(line, TM__9brjMmGFaIx4wBkLyxxXZxw_83, linei);
					{
						if (!(le <= ((NI) 0))) goto LA30_;
						httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_85);
						if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					}
					LA30_: ;
					eqsink___aBBXmHFBEivKqERloP6zmA((&(*result).version), TM__9brjMmGFaIx4wBkLyxxXZxw_86);
				}
				LA23_: ;
				linei += le;
				T32_ = (NI)0;
				T32_ = skipWhitespace__6WuCTfsk2bOGNtGSxg9cZWAparseutils(line, linei);
				linei += T32_;
				T33_ = dotdot___xNR8BVBMWzS9bXXNMikmyLgsystem(linei, ((NI) 1));
				T34_.len = 0; T34_.p = NIM_NIL;
				T34_ = X5BX5D___ogYTOKbgqbjPfyC123US1gsystem(line, T33_);
				eqsink___aBBXmHFBEivKqERloP6zmA((&(*result).status), T34_);
				parsedStatus = NIM_TRUE;
			}
			goto LA14_;
			LA16_: ;
			{
				NimStringV2 name;
				NimStringV2 colontmpD_;
				NI le_2;
				tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T45_;
				NimStringV2 T46_;
				name.len = 0; name.p = NIM_NIL;
				colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
				name = TM__9brjMmGFaIx4wBkLyxxXZxw_87;
				le_2 = parseUntil__jfFErPNXs9cw9bvuw3hS0GVAparseutils(line, (&name), 58, linei);
				{
					if (!(le_2 <= ((NI) 0))) goto LA39_;
					httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_89);
					if (NIM_UNLIKELY(*nimErr_)) goto LA36_;
				}
				LA39_: ;
				linei += le_2;
				{
					if (!!(((NU8)(line.p->data[linei]) == (NU8)(58)))) goto LA43_;
					httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_90);
					if (NIM_UNLIKELY(*nimErr_)) goto LA36_;
				}
				LA43_: ;
				linei += ((NI) 1);
				T45_ = dotdot___xNR8BVBMWzS9bXXNMikmyLgsystem(linei, ((NI) 1));
				colontmpD_ = X5BX5D___ogYTOKbgqbjPfyC123US1gsystem(line, T45_);
				T46_.len = 0; T46_.p = NIM_NIL;
				T46_ = nsuStrip(colontmpD_, NIM_TRUE, NIM_TRUE, TM__9brjMmGFaIx4wBkLyxxXZxw_91);
				add__Iy0txpq5svlfrlKS9bU28Kw_2((*result).headers, name, T46_);
				if (NIM_UNLIKELY(*nimErr_)) goto LA36_;
				{
					NI T49_;
					T49_ = (NI)0;
					T49_ = len__phLlcLkG9amvbv9cul0w5ERQhttpcore((*result).headers);
					if (!(((NI) 10000) < T49_)) goto LA50_;
					httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_93);
					if (NIM_UNLIKELY(*nimErr_)) goto LA36_;
				}
				LA50_: ;
				{
					LA36_:;
				}
				{
					eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
					eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&name));
				}
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			}
			LA14_: ;
		}
	} LA3: ;
	{
		if (!!(fullyRead)) goto LA56_;
		httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_95);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA56_: ;
	{
		NIM_BOOL T60_;
		NI T62_;
		tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw* T65_;
		tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* T66_;
		T60_ = (NIM_BOOL)0;
		T60_ = getBody;
		if (!(T60_)) goto LA61_;
		T62_ = (NI)0;
		T62_ = code__74MIEFap0tx9bAcFdN6ES7Q(result);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		T60_ = !((T62_ == ((NI) 204)));
		LA61_: ;
		if (!T60_) goto LA63_;
		T65_ = (tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw*)0;
		T65_ = newStringStream__9aLRtgEYeRMrZKrObtoOslQ(TM__9brjMmGFaIx4wBkLyxxXZxw_96);
		T66_ = (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ*)0;
		T66_ = &T65_->Sup;
		eqsink___uD7PP9aMywYClkkmJVib7sg(&(*client).bodyStream, T66_);
		eqcopy___uD7PP9aMywYClkkmJVib7sg_2(&(*result).bodyStream, (*client).bodyStream);
		parseBody__nesWh4uP9aaR2HAQTFYAzUA(client, (*result).headers, (*result).version);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA63_: ;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&line));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, newConnection__OTRwNmMCrM24z6RZ2ZmLqg)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ* url) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T4_;
		NIM_BOOL T5_;
		NIM_BOOL T6_;
		tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ connectionUrl;
		NimStringV2 colontmpD_;
		NU16 colontmpD__2;
		NU16 colontmpD__3;
		tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ T13_;
		NIM_BOOL isSsl;
		NU16 port;
		tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* T44_;
		T4_ = (NIM_BOOL)0;
		T5_ = (NIM_BOOL)0;
		T6_ = (NIM_BOOL)0;
		T6_ = !(eqStrings((*client).currentURL.hostname, (*url).hostname));
		if (T6_) goto LA7_;
		T6_ = !(eqStrings((*client).currentURL.scheme, (*url).scheme));
		LA7_: ;
		T5_ = T6_;
		if (T5_) goto LA8_;
		T5_ = !(eqStrings((*client).currentURL.port, (*url).port));
		LA8_: ;
		T4_ = T5_;
		if (T4_) goto LA9_;
		T4_ = !((*client).connected);
		LA9_: ;
		if (!T4_) goto LA10_;
		nimZeroMem((void*)(&connectionUrl), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
		colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
		colontmpD__2 = (NU16)0;
		colontmpD__3 = (NU16)0;
		{
			if (!((*client).proxy == 0)) goto LA16_;
			eqcopy___OydxUV9ad0I3qVcqasXV7RQ((&connectionUrl), url);
		}
		goto LA14_;
		LA16_: ;
		{
			eqcopy___OydxUV9ad0I3qVcqasXV7RQ((&connectionUrl), (&(*(*client).proxy).url));
		}
		LA14_: ;
		colontmpD_ = nsuToLowerAsciiStr(connectionUrl.scheme);
		isSsl = eqStrings(colontmpD_, TM__9brjMmGFaIx4wBkLyxxXZxw_35);
		{
			NIM_BOOL T21_;
			tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA* T25_;
			T21_ = (NIM_BOOL)0;
			T21_ = isSsl;
			if (!(T21_)) goto LA22_;
			T21_ = NIM_FALSE;
			LA22_: ;
			if (!T21_) goto LA23_;
			T25_ = (tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA*)0;
			T25_ = (tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA*) nimNewObj(sizeof(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA), NIM_ALIGNOF(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA));
			(*T25_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__L1L9b70HFrKWeYV59a3EWeaA_);
			(*T25_).Sup.Sup.Sup.name = "HttpRequestError";
			(*T25_).Sup.Sup.Sup.message = TM__9brjMmGFaIx4wBkLyxxXZxw_37;
			(*T25_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
			raiseExceptionEx((Exception*)T25_, "HttpRequestError", "newConnection", "httpclient.nim", 862);
			goto LA12_;
		}
		LA23_: ;
		{
			if (!(*client).connected) goto LA28_;
			close__LSkbNH0VA1HBcOjYrAgBmA(client);
			if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
			(*client).connected = NIM_FALSE;
		}
		LA28_: ;
		{
			NU16 colontmpD__4;
			NU16 colontmpD__5;
			if (!(connectionUrl.port.len == 0)) goto LA32_;
			colontmpD__4 = (NU16)0;
			colontmpD__5 = (NU16)0;
			{
				if (!isSsl) goto LA36_;
				colontmpD__4 = ((NU16) 443);
				colontmpD__2 = colontmpD__4;
			}
			goto LA34_;
			LA36_: ;
			{
				colontmpD__5 = ((NU16) 80);
				colontmpD__2 = colontmpD__5;
			}
			LA34_: ;
			port = colontmpD__2;
		}
		goto LA30_;
		LA32_: ;
		{
			NI T41_;
			T41_ = (NI)0;
			T41_ = nsuParseInt(connectionUrl.port);
			if (NIM_UNLIKELY(*nimErr_)) goto LA40_;
			colontmpD__3 = ((NU16) (T41_));
			port = colontmpD__3;
			{
				LA40_:;
			}
			{
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		}
		LA30_: ;
		T44_ = (tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ*)0;
		T44_ = dial__oD5cdlP49a1aM6tVxzT4h1Q(connectionUrl.hostname, port, ((tyEnum_Protocol__dqJ1OqRGclxIMMdSLRzzXg) 6), NIM_TRUE);
		if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		eqsink___uz5bm6GTj6lhUqoWSCWdvg(&(*client).socket, T44_);
		{
			tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* colontmpD__6;
			if (!isSsl) goto LA47_;
			colontmpD__6 = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*)0;
			colontmpD__6 = 0;
			eqcopy___Maxw2KUIYGcdUEJ9aO5a9bpw_2(&colontmpD__6, (*client).sslContext);
			wrapConnectedSocket__zB421aJ04hXbpUeGq3doVQ(colontmpD__6, (*client).socket, ((tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg) 0), connectionUrl.hostname);
			if (NIM_UNLIKELY(*nimErr_)) goto LA49_;
			if (NIM_UNLIKELY(*nimErr_)) {
				LA49_:;
				{
					Exception* T53_;
					*nimErr_ = NIM_FALSE;
					close__dPXIsN1nx9bPvap47WTEMow((*client).socket, 2);
					if (NIM_UNLIKELY(*nimErr_)) goto LA51_;
					T53_ = (Exception*)0;
					T53_ = getCurrentException();
					raiseExceptionEx((Exception*)T53_, "Exception", "newConnection", "httpclient.nim", 891);
					goto LA51_;
					popCurrentException();
					LA51_:;
				}
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		}
		LA47_: ;
		{
			NIM_BOOL T56_;
			tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ connectUrl;
			NimStringV2 proxyHeaderString;
			NimStringV2 colontmpD__7;
			tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* colontmpD__8;
			tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* proxyResp;
			tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* colontmpD__9;
			NimStringV2 T61_;
			tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* T67_;
			T56_ = (NIM_BOOL)0;
			T56_ = eqStrings((*url).scheme, TM__9brjMmGFaIx4wBkLyxxXZxw_38);
			if (!(T56_)) goto LA57_;
			T56_ = !(((*client).proxy == 0));
			LA57_: ;
			if (!T56_) goto LA58_;
			nimZeroMem((void*)(&connectUrl), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
			proxyHeaderString.len = 0; proxyHeaderString.p = NIM_NIL;
			colontmpD__7.len = 0; colontmpD__7.p = NIM_NIL;
			colontmpD__8 = (tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*)0;
			proxyResp = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*)0;
			colontmpD__9 = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*)0;
			connectUrl = initUri__zcwd3ynrfDQcP9c8k9cEeg9aQ();
			eqcopy___aBBXmHFBEivKqERloP6zmA_2((&connectUrl.hostname), (*url).hostname);
			T61_.len = 0; T61_.p = NIM_NIL;
			{
				if (!!(((*url).port.len == 0))) goto LA64_;
				eqcopy___aBBXmHFBEivKqERloP6zmA_2((&connectUrl.port), (*url).port);
			}
			goto LA62_;
			LA64_: ;
			{
				eqsink___aBBXmHFBEivKqERloP6zmA((&connectUrl.port), TM__9brjMmGFaIx4wBkLyxxXZxw_40);
			}
			LA62_: ;
			colontmpD__7 = dollar___JcSadDOgpYarTBAbeNWqTw(((tyEnum_HttpMethod__wfZHspwVKQPl9aWhkIcMrAA) 7));
			colontmpD__8 = newHttpHeaders__m5XuFRjmtJnvrQCk25khAA(NIM_FALSE);
			proxyHeaderString = generateHeaders__BYtup6hw7Ii2LjHd19cuuhA((&connectUrl), colontmpD__7, colontmpD__8, (*client).proxy);
			send__sP9af4zGpnwmZkRofZDfbQQ((*client).socket, proxyHeaderString, 2);
			if (NIM_UNLIKELY(*nimErr_)) goto LA60_;
			T67_ = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*)0;
			T67_ = parseResponse__3AoUMM1jyrz8BUdsjBoKYQ(client, NIM_FALSE);
			if (NIM_UNLIKELY(*nimErr_)) goto LA60_;
			proxyResp = T67_;
			{
				NIM_BOOL T70_;
				tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA* T73_;
				T70_ = (NIM_BOOL)0;
				T70_ = nsuStartsWith((*proxyResp).status, TM__9brjMmGFaIx4wBkLyxxXZxw_131);
				if (!!(T70_)) goto LA71_;
				T73_ = (tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA*)0;
				T73_ = (tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA*) nimNewObj(sizeof(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA), NIM_ALIGNOF(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA));
				(*T73_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__L1L9b70HFrKWeYV59a3EWeaA_);
				(*T73_).Sup.Sup.Sup.name = "HttpRequestError";
				(*T73_).Sup.Sup.Sup.message = TM__9brjMmGFaIx4wBkLyxxXZxw_133;
				(*T73_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
				raiseExceptionEx((Exception*)T73_, "HttpRequestError", "newConnection", "httpclient.nim", 907);
				goto LA60_;
			}
			LA71_: ;
			colontmpD__9 = 0;
			eqcopy___Maxw2KUIYGcdUEJ9aO5a9bpw_2(&colontmpD__9, (*client).sslContext);
			wrapConnectedSocket__zB421aJ04hXbpUeGq3doVQ(colontmpD__9, (*client).socket, ((tyEnum_SslHandshakeType__9aZhh5f9bRDKgYB8GLASDSqg) 0), (*url).hostname);
			if (NIM_UNLIKELY(*nimErr_)) goto LA60_;
			{
				LA60_:;
			}
			{
				eqdestroy___b19aGGEWVnlKBxGOhME5IOA(&proxyResp);
				eqdestroy___W6vnarVEjHAKSygcoFfE4A(&colontmpD__8);
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__7));
				eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&proxyHeaderString));
				eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw((&connectUrl));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		}
		LA58_: ;
		eqsink___OydxUV9ad0I3qVcqasXV7RQ_2((&(*client).currentURL), url);
		nimZeroMem((void*)url, sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
		(*client).connected = NIM_TRUE;
		{
			LA12_:;
		}
		{
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD_));
			eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw((&connectionUrl));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA10_: ;
	{
		LA1_:;
	}
	{
		eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw(url);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*, override__FtvT5N1bkQfcJQGIp9aKlhQ)(tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* fallback, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* override) {
	tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* result;
	tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* T5_;
{	result = (tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*)0;
	{
		if (!(override == 0)) goto LA3_;
		eqcopy___mcVzTPma3mVmolqKCGb1Iw_2(&result, fallback);
		goto BeforeRet_;
	}
	LA3_: ;
	T5_ = (tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*)0;
	T5_ = newHttpHeaders__m5XuFRjmtJnvrQCk25khAA(NIM_FALSE);
	eqsink___mcVzTPma3mVmolqKCGb1Iw(&result, T5_);
	eqcopy___ic9a3GZ2Kbgw2QwLw0A1dMQ_2((&(*(*result).table)), (*(*fallback).table));
	{
		NimStringV2 k;
		tySequence__sM4lkSb7zS6F7OVMvW9cffQ vs;
		NI L;
		k.len = 0; k.p = NIM_NIL;
		vs.len = 0; vs.p = NIM_NIL;
		L = len__J4hnoSPhc6KiK07n7KgZ9cQ((*override).table);
		{
			NI h;
			NI colontmp_;
			NI T8_;
			NI res;
			h = (NI)0;
			colontmp_ = (NI)0;
			T8_ = ((*(*override).table).data.len-1);
			colontmp_ = T8_;
			res = ((NI) 0);
			{
				while (1) {
					if (!(res <= colontmp_)) goto LA10;
					h = res;
					{
						NIM_BOOL T13_;
						tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD_;
						T13_ = (NIM_BOOL)0;
						T13_ = isFilled__5Qpmu5QqwDY0esVXn6wf7wtables((*(*override).table).data.p->data[h].Field0);
						if (!T13_) goto LA14_;
						colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
						k = (*(*override).table).data.p->data[h].Field1;
						vs = (*(*override).table).data.p->data[h].Field2;
						colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
						eqcopy___r6aagoRVuov7HvfEjIi3Uw_2((&colontmpD_), vs);
						X5BX5Deq___ot6ARD7jycF5zD3Vxo4ZCw(result, k, colontmpD_);
					}
					LA14_: ;
					res += ((NI) 1);
				} LA10: ;
			}
		}
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, sendFile__Yb9cHECVaxEDx9bEF54vo7fg)(tyObject_SocketImpl__aIhANOOoETolVz9cccNO9cRQ* socket, tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw* entry) {
	tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ* file;
	NimStringV2 buffer;
	tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* T10_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	file = (tyObject_FileStreamObj__9bEVSsOIpkY9cf5lCtaS39bPQ*)0;
	buffer.len = 0; buffer.p = NIM_NIL;
	file = newFileStream__cwYJiP3D7DOTCJxCdBqBZQ((*entry).content, ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 0), ((NI) -1));
	{
		while (1) {
			tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* T4_;
			NimStringV2 T5_;
			T4_ = (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ*)0;
			T4_ = &file->Sup;
			T5_.len = 0; T5_.p = NIM_NIL;
			T5_ = readStr__Z7JDISIOZLxtyOOY7L8wDw(T4_, ((NI) 262144));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			eqsink___aBBXmHFBEivKqERloP6zmA((&buffer), T5_);
			{
				if (!(buffer.len == ((NI) 0))) goto LA8_;
				goto LA2;
			}
			LA8_: ;
			send__sP9af4zGpnwmZkRofZDfbQQ(socket, buffer, 2);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		}
	} LA2: ;
	T10_ = (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ*)0;
	T10_ = &file->Sup;
	close__y1KA3B0U09bKtU09am9a9avRYQ_3(T10_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&buffer));
		eqdestroy___1C4ixR1siTbJKB2Qcw7ZWw(&file);
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NimStringV2*, X5BX5D___qAX9aHx35KUFY79aX8PJ3xRgsystem)(NimStringV2* s, NI sLen_0, NI i) {
	NimStringV2* result;
	result = (NimStringV2*)0;
	result = (&s[(NI)(sLen_0 - i)]);
	return result;
}
static N_INLINE(NI, find__CWgb1wQSxTCKtdHVU5pCYQsystem)(NimStringV2* a, NI aLen_0, NimStringV2 item) {
	NI result;
{	result = (NI)0;
	result = ((NI) 0);
	{
		NimStringV2* i;
		NI i_2;
		i = (NimStringV2*)0;
		i_2 = ((NI) 0);
		{
			while (1) {
				if (!(i_2 < aLen_0)) goto LA3;
				i = (&a[i_2]);
				{
					if (!eqStrings((*i), item)) goto LA6_;
					goto BeforeRet_;
				}
				LA6_: ;
				result += ((NI) 1);
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	result = ((NI) -1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL, contains__MghwuKjQqmVLYE8A59cNGHgsystem)(NimStringV2* a, NI aLen_0, NimStringV2 item) {
	NIM_BOOL result;
	NI T1_;
{	result = (NIM_BOOL)0;
	T1_ = (NI)0;
	T1_ = find__CWgb1wQSxTCKtdHVU5pCYQsystem(a, aLen_0, item);
	result = (((NI) 0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*, requestAux__nrxBG9atKB7KhRUylZop7gA_2)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NimStringV2 url, NimStringV2 httpMethod, NimStringV2 body, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart) {
	tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* result;
	tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ requestUrl;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ data;
	tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ colontmpD_;
	tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* newHeaders;
	NimStringV2 headerString;
	NimStringV2 colontmpD__2;
	NIM_BOOL getBody;
	NIM_BOOL T54_;
	NIM_BOOL T55_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*)0;
	nimZeroMem((void*)(&requestUrl), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
	data.len = 0; data.p = NIM_NIL;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
	newHeaders = (tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA*)0;
	headerString.len = 0; headerString.p = NIM_NIL;
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	requestUrl = parseUri__rbZTAh57otUDsvMlWgTQog(url);
	{
		tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw* T6_;
		if (!(requestUrl.scheme.len == 0)) goto LA4_;
		T6_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*)0;
		T6_ = (tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw*) nimNewObj(sizeof(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw), NIM_ALIGNOF(tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw));
		(*T6_).Sup.Sup.Sup.m_type = (&NTIv2__yoNlBGx0D2tRizIdhQuENw_);
		(*T6_).Sup.Sup.name = "ValueError";
		(*T6_).Sup.Sup.message = TM__9brjMmGFaIx4wBkLyxxXZxw_6;
		(*T6_).Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T6_, "ValueError", "requestAux", "httpclient.nim", 978);
		goto LA1_;
	}
	LA4_: ;
	{
		NIM_BOOL T9_;
		NI T11_;
		T9_ = (NIM_BOOL)0;
		T9_ = !((multipart == ((tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g*) NIM_NIL)));
		if (!(T9_)) goto LA10_;
		T11_ = (*multipart).content.len;
		T9_ = (((NI) 0) < T11_);
		LA10_: ;
		if (!T9_) goto LA12_;
		data = format__N4eE9a9au9cfobiXawLjYLIIw(client, multipart);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA7_;
	LA12_: ;
	{
		NimStringV2 T15_;
		T15_.len = 0; T15_.p = NIM_NIL;
		T15_ = nimIntToStr(body.len);
		X5BX5Deq___Iy0txpq5svlfrlKS9bU28Kw((*client).headers, TM__9brjMmGFaIx4wBkLyxxXZxw_33, T15_);
	}
	LA7_: ;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
	eqcopy___OydxUV9ad0I3qVcqasXV7RQ((&colontmpD_), (&requestUrl));
	newConnection__OTRwNmMCrM24z6RZ2ZmLqg(client, (&colontmpD_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	newHeaders = override__FtvT5N1bkQfcJQGIp9aKlhQ((*client).headers, headers);
	{
		NIM_BOOL T18_;
		NIM_BOOL T19_;
		NimStringV2 colontmpD__3;
		T18_ = (NIM_BOOL)0;
		T19_ = (NIM_BOOL)0;
		T19_ = hasKey__jz0AniI5No9bnkMo9aqdkc2A(newHeaders, TM__9brjMmGFaIx4wBkLyxxXZxw_135);
		T18_ = !(T19_);
		if (!(T18_)) goto LA20_;
		T18_ = (((NI) 0) < (*client).userAgent.len);
		LA20_: ;
		if (!T18_) goto LA21_;
		colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
		colontmpD__3.len = 0; colontmpD__3.p = NIM_NIL;
		eqcopy___aBBXmHFBEivKqERloP6zmA_2((&colontmpD__3), (*client).userAgent);
		X5BX5Deq___Iy0txpq5svlfrlKS9bU28Kw(newHeaders, TM__9brjMmGFaIx4wBkLyxxXZxw_137, colontmpD__3);
	}
	LA21_: ;
	headerString = generateHeaders__BYtup6hw7Ii2LjHd19cuuhA((&requestUrl), httpMethod, newHeaders, (*client).proxy);
	send__sP9af4zGpnwmZkRofZDfbQQ((*client).socket, headerString, 2);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		NI T25_;
		NimStringV2 buffer;
		NimStringV2 colontmpD__4;
		NimStringV2 T47_;
		NimStringV2* T48_;
		T25_ = data.len;
		if (!(((NI) 0) < T25_)) goto LA26_;
		buffer.len = 0; buffer.p = NIM_NIL;
		colontmpD__4.len = 0; colontmpD__4.p = NIM_NIL;
		{
			NI i;
			tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw entry;
			NI i_2;
			NI L;
			NI T30_;
			i = (NI)0;
			nimZeroMem((void*)(&entry), sizeof(tyObject_MultipartEntry__35QV9aWmZhP0gkh6RoJTWcw));
			i_2 = ((NI) 0);
			T30_ = (*multipart).content.len;
			L = T30_;
			{
				while (1) {
					if (!(i_2 < L)) goto LA32;
					i = i_2;
					entry = (*multipart).content.p->data[i_2];
					{
						prepareAdd((&buffer), data.p->data[i].len + 0);
appendString((&buffer), data.p->data[i]);
						{
							if (!!(entry.isFile)) goto LA36_;
							goto LA33;
						}
						LA36_: ;
						{
							if (!(((NI) 0) < buffer.len)) goto LA40_;
							send__sP9af4zGpnwmZkRofZDfbQQ((*client).socket, buffer, 2);
							if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
							setLengthStrV2((&buffer), ((NI) 0));
						}
						LA40_: ;
						{
							if (!entry._isFile_1.isStream) goto LA44_;
							sendFile__Yb9cHECVaxEDx9bEF54vo7fg((*client).socket, (&entry));
							if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
						}
						goto LA42_;
						LA44_: ;
						{
							send__sP9af4zGpnwmZkRofZDfbQQ((*client).socket, entry.content, 2);
							if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
						}
						LA42_: ;
						prepareAdd((&buffer), 2);
appendString((&buffer), TM__9brjMmGFaIx4wBkLyxxXZxw_138);
					} LA33: ;
					i_2 += ((NI) 1);
				} LA32: ;
			}
		}
		T47_.len = 0; T47_.p = NIM_NIL;
		T48_ = (NimStringV2*)0;
		T48_ = X5BX5D___qAX9aHx35KUFY79aX8PJ3xRgsystem(data.p->data, data.len, ((NI) 1));
		T47_ = rawNewString(buffer.len + (*T48_).len + 0);
appendString((&T47_), buffer);
appendString((&T47_), (*T48_));
		colontmpD__4 = T47_;
		send__sP9af4zGpnwmZkRofZDfbQQ((*client).socket, colontmpD__4, 2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA28_;
		{
			LA28_:;
		}
		{
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__4));
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&buffer));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA23_;
	LA26_: ;
	{
		if (!(((NI) 0) < body.len)) goto LA52_;
		send__sP9af4zGpnwmZkRofZDfbQQ((*client).socket, body, 2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA23_;
	LA52_: ;
	LA23_: ;
	T54_ = (NIM_BOOL)0;
	colontmpD__2 = nsuToLowerAsciiStr(httpMethod);
	T55_ = (NIM_BOOL)0;
	T55_ = contains__MghwuKjQqmVLYE8A59cNGHgsystem(TM__9brjMmGFaIx4wBkLyxxXZxw_139, 2, colontmpD__2);
	T54_ = !(T55_);
	if (!(T54_)) goto LA56_;
	T54_ = (*client).getBody;
	LA56_: ;
	getBody = T54_;
	result = parseResponse__3AoUMM1jyrz8BUdsjBoKYQ(client, getBody);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		LA1_:;
	}
	{
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&colontmpD__2));
		eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&headerString));
		eqdestroy___W6vnarVEjHAKSygcoFfE4A(&newHeaders);
		eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&data));
		eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw((&requestUrl));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, redirection__7c9c0MkLRudbFZ1hPGI7gVw)(NimStringV2 status) {
	NIM_BOOL result;
{	result = (NIM_BOOL)0;
	{
		NimStringV2 i;
		NI i_2;
		i.len = 0; i.p = NIM_NIL;
		i_2 = ((NI) 0);
		{
			if (!(((NI) (i_2)) <= ((NI) 4))) goto LA4_;
			{
				while (1) {
					i = redirectionNRs__RlB9c6otkMoOuxfTj3Z1QfA[(i_2)- 0];
					{
						NIM_BOOL T10_;
						T10_ = (NIM_BOOL)0;
						T10_ = nsuStartsWith(status, i);
						if (!T10_) goto LA11_;
						result = NIM_TRUE;
						goto BeforeRet_;
					}
					LA11_: ;
					{
						if (!(((NI) 4) <= ((NI) (i_2)))) goto LA15_;
						goto LA6;
					}
					LA15_: ;
					i_2 += ((NI) 1);
				}
			} LA6: ;
		}
		LA4_: ;
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getNewLocation__zVcgYlyVeZFDopwaR9ao7Jg)(NimStringV2 lastURL, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers) {
	NimStringV2 result;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD_;
	tySequence__sM4lkSb7zS6F7OVMvW9cffQ colontmpD__2;
	tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ r;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	nimZeroMem((void*)(&r), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
	colontmpD_.len = 1; colontmpD_.p = (tySequence__sM4lkSb7zS6F7OVMvW9cffQ_Content*) newSeqPayload(1, sizeof(NimStringV2), NIM_ALIGNOF(NimStringV2));
	colontmpD_.p->data[0] = TM__9brjMmGFaIx4wBkLyxxXZxw_149;
	colontmpD__2 = getOrDefault__aSNwyYYZ2RsZRzsI4edhhA(headers, TM__9brjMmGFaIx4wBkLyxxXZxw_148, colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	result = toString__vY9b9br9btFmrOxuFGpY9cNqbQ(colontmpD__2);
	{
		if (!(result.len == 0)) goto LA4_;
		httpError__QP4vBkFseuds6dKm2yqk9cw(TM__9brjMmGFaIx4wBkLyxxXZxw_151);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA4_: ;
	r = parseUri__rbZTAh57otUDsvMlWgTQog(result);
	{
		NIM_BOOL T8_;
		tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ parsed;
		NimStringV2 T12_;
		T8_ = (NIM_BOOL)0;
		T8_ = (r.hostname.len == 0);
		if (!(T8_)) goto LA9_;
		T8_ = !((r.path.len == 0));
		LA9_: ;
		if (!T8_) goto LA10_;
		nimZeroMem((void*)(&parsed), sizeof(tyObject_Uri__j49bukNPrq747O1GRd4Ng9bQ));
		parsed = parseUri__rbZTAh57otUDsvMlWgTQog(lastURL);
		eqsink___aBBXmHFBEivKqERloP6zmA((&parsed.path), r.path);
		r.path.len = 0; r.path.p = NIM_NIL;
		eqsink___aBBXmHFBEivKqERloP6zmA((&parsed.query), r.query);
		r.query.len = 0; r.query.p = NIM_NIL;
		eqsink___aBBXmHFBEivKqERloP6zmA((&parsed.anchor), r.anchor);
		r.anchor.len = 0; r.anchor.p = NIM_NIL;
		T12_.len = 0; T12_.p = NIM_NIL;
		T12_ = dollar___9aI7qw5xvHD3Zb9b9cJik76iw((&parsed));
		eqsink___aBBXmHFBEivKqERloP6zmA((&result), T12_);
		eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw((&parsed));
	}
	LA10_: ;
	{
		LA1_:;
	}
	{
		eqdestroy___9cxLel6KY8YRc2RBVO9bQhjw((&r));
		eqdestroy___9cEHZYAST9afMf7sM41NLYIQ((&colontmpD__2));
		eqdestroy___0RiuPw9cXhtLB9a2rQ2jA69cg((&colontmpD_));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___8PoGYtGK2aJ4uGgFszak3w)(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA** dest, tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* src) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___A1YDm2u0M1bbDfuy6EU5UA((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
	(*dest) = src;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*, request__nrxBG9atKB7KhRUylZop7gA)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* client, NimStringV2 url, NimStringV2 httpMethod, NimStringV2 body, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers, tyObject_MultipartDatacolonObjectType___pa59bn7R9cBmjUm9clF5koL7g* multipart) {
	tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* result;
	NimStringV2 lastURL;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*)0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = contains__wAzSnEu9cCHHjvPQlWBZUeQ(url, TM__9brjMmGFaIx4wBkLyxxXZxw_2);
		if (!!(!(T3_))) goto LA4_;
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(TM__9brjMmGFaIx4wBkLyxxXZxw_4);
	}
	LA4_: ;
	result = requestAux__nrxBG9atKB7KhRUylZop7gA_2(client, url, httpMethod, body, headers, multipart);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	lastURL = url;
	{
		NI i;
		NI colontmp_;
		NI res;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = ((NI) ((*client).maxRedirects));
		res = ((NI) 1);
		{
			while (1) {
				if (!(res <= colontmp_)) goto LA8;
				i = res;
				{
					NIM_BOOL T11_;
					NimStringV2 redirectTo;
					NimStringV2 colontmpD_;
					NimStringV2 colontmpD__2;
					NimStringV2 meth;
					tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA* T20_;
					T11_ = (NIM_BOOL)0;
					T11_ = redirection__7c9c0MkLRudbFZ1hPGI7gVw((*result).status);
					if (!T11_) goto LA12_;
					redirectTo.len = 0; redirectTo.p = NIM_NIL;
					colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
					colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
					redirectTo = getNewLocation__zVcgYlyVeZFDopwaR9ao7Jg(lastURL, (*result).headers);
					if (NIM_UNLIKELY(*nimErr_)) goto LA14_;
					{
						if (!eqStrings((*result).status, TM__9brjMmGFaIx4wBkLyxxXZxw_152)) goto LA17_;
						eqcopy___aBBXmHFBEivKqERloP6zmA_2((&colontmpD_), httpMethod);
						meth = colontmpD_;
					}
					goto LA15_;
					LA17_: ;
					{
						colontmpD__2 = TM__9brjMmGFaIx4wBkLyxxXZxw_154;
						meth = colontmpD__2;
					}
					LA15_: ;
					T20_ = (tyObject_ResponsecolonObjectType___83PZH4UFHIivphKu7iROCA*)0;
					T20_ = requestAux__nrxBG9atKB7KhRUylZop7gA_2(client, redirectTo, meth, body, headers, multipart);
					if (NIM_UNLIKELY(*nimErr_)) goto LA14_;
					eqsink___8PoGYtGK2aJ4uGgFszak3w(&result, T20_);
					lastURL = redirectTo;
					{
						LA14_:;
					}
					{
						eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&redirectTo));
					}
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA12_: ;
				res += ((NI) 1);
			} LA8: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___NRThnU6XgZ4MqObKZkAZBw)(tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* dest) {
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.scheme));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.username));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.password));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.hostname));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.port));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.path));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.query));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).url.anchor));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).auth));
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___0AogzSEAggCYyLR2kz88Dg)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).socket);
		if (!T3_) goto LA4_;
		eqdestroy___1TCKL9aWTg3J2fdjyrLXdQw((*dest).socket);
		nimRawDispose((*dest).socket, ((NI) 8));
	}
	LA4_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.scheme));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.username));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.password));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.hostname));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.port));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.path));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.query));
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).currentURL.anchor));
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).headers);
		if (!T8_) goto LA9_;
		eqdestroy___gczQO0vzLYPQ2o5V9bLxOCQ((*dest).headers);
		nimRawDispose((*dest).headers, ((NI) 8));
	}
	LA9_: ;
	eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&(*dest).userAgent));
	{
		NIM_BOOL T13_;
		T13_ = (NIM_BOOL)0;
		T13_ = nimDecRefIsLast((*dest).proxy);
		if (!T13_) goto LA14_;
		eqdestroy___NRThnU6XgZ4MqObKZkAZBw((*dest).proxy);
		nimRawDispose((*dest).proxy, ((NI) 8));
	}
	LA14_: ;
	{
		NIM_BOOL T18_;
		T18_ = (NIM_BOOL)0;
		T18_ = nimDecRefIsLast((*dest).onProgressChanged.ClE_0);
		if (!T18_) goto LA19_;
		nimDestroyAndDispose((*dest).onProgressChanged.ClE_0);
	}
	LA19_: ;
	{
		NIM_BOOL T23_;
		T23_ = (NIM_BOOL)0;
		T23_ = nimDecRefIsLast((*dest).sslContext);
		if (!T23_) goto LA24_;
		eqdestroy___ZuTHUhKQj9ccvMg2Qe8JVcg((*dest).sslContext);
		nimRawDispose((*dest).sslContext, ((NI) 8));
	}
	LA24_: ;
	{
		NIM_BOOL T28_;
		T28_ = (NIM_BOOL)0;
		T28_ = nimDecRefIsLast((*dest).bodyStream);
		if (!T28_) goto LA29_;
		nimDestroyAndDispose((*dest).bodyStream);
	}
	LA29_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___1XZft5a5dikeHY9a7ro8T7Q)(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA** dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___0AogzSEAggCYyLR2kz88Dg((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___i709c9bs9aE2bIcudNSMg20UQ)(tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ** dest, tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* src) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___NRThnU6XgZ4MqObKZkAZBw((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
	(*dest) = src;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___sQXQN9ay09bfcfti3uWgci4A)(tyProc__TSOsjF4c9aXotPerq9cEE56A* dest, tyProc__TSOsjF4c9aXotPerq9cEE56A src) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).ClE_0);
		if (!T3_) goto LA4_;
		nimDestroyAndDispose((*dest).ClE_0);
	}
	LA4_: ;
	(*dest).ClE_0 = src.ClE_0;
	(*dest).ClP_0 = src.ClP_0;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA*, newHttpClient__D2qYCUvLqg9cELckn2o8LHw)(NimStringV2 userAgent, NI maxRedirects, tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* sslContext, tyObject_ProxycolonObjectType___CigKkL8U2DnJdbYRi9aI9aoQ* proxy, NI timeout, tyObject_HttpHeaderscolonObjectType___GM611pWlOrQ7hvMPcuAACA* headers) {
	tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA* result;
	tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw* T1_;
	tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ* T2_;
	result = (tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA*)0;
	eqdestroy___1XZft5a5dikeHY9a7ro8T7Q(&result);
	result = (tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA*) nimNewObj(sizeof(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA), NIM_ALIGNOF(tyObject_HttpClientBasecolonObjectType___UPZdfed89aNSioeMjzFgefA));
	eqsink___mcVzTPma3mVmolqKCGb1Iw(&(*result).headers, headers);
	eqsink___aBBXmHFBEivKqERloP6zmA((&(*result).userAgent), userAgent);
	(*result).maxRedirects = ((NI) (maxRedirects));
	eqsink___i709c9bs9aE2bIcudNSMg20UQ(&(*result).proxy, proxy);
	(*result).timeout = timeout;
	eqsink___sQXQN9ay09bfcfti3uWgci4A((&(*result).onProgressChanged), TM__9brjMmGFaIx4wBkLyxxXZxw_155);
	T1_ = (tyObject_StringStreamObj__Olau5FPRehZBBEB77FHnfw*)0;
	T1_ = newStringStream__9aLRtgEYeRMrZKrObtoOslQ(TM__9brjMmGFaIx4wBkLyxxXZxw_156);
	T2_ = (tyObject_StreamObj__THYguAi9bSgidczZ3ywEIMQ*)0;
	T2_ = &T1_->Sup;
	eqsink___uD7PP9aMywYClkkmJVib7sg(&(*result).bodyStream, T2_);
	(*result).getBody = NIM_TRUE;
	eqsink___Maxw2KUIYGcdUEJ9aO5a9bpw(&(*result).sslContext, sslContext);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*, getDefaultSSL__gZuBS086zrhExFFDxdhPzA)(void) {
	tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*)0;
	eqcopy___Maxw2KUIYGcdUEJ9aO5a9bpw_2(&result, defaultSslContext__3GZQajZtKdLpqTTN2RjTzw);
	{
		tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* T5_;
		if (!(result == ((tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*) NIM_NIL))) goto LA3_;
		T5_ = (tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*)0;
		T5_ = newContext__p45vOS9b3iK2JJ1Y7aIJ9bUA(((tyEnum_SslProtVersion__zq9bkhgPAE6ngdz7HLdOTDw) 3), ((tyEnum_SslCVerifyMode__t9a9cuHiKUd7w4o8XPQAbfJg) 0), TM__9brjMmGFaIx4wBkLyxxXZxw_157, TM__9brjMmGFaIx4wBkLyxxXZxw_158, TM__9brjMmGFaIx4wBkLyxxXZxw_160, TM__9brjMmGFaIx4wBkLyxxXZxw_161, TM__9brjMmGFaIx4wBkLyxxXZxw_162);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqsink___Maxw2KUIYGcdUEJ9aO5a9bpw(&defaultSslContext__3GZQajZtKdLpqTTN2RjTzw, T5_);
		eqcopy___Maxw2KUIYGcdUEJ9aO5a9bpw_2(&result, defaultSslContext__3GZQajZtKdLpqTTN2RjTzw);
		{
			if (!!(!((result == ((tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w*) NIM_NIL))))) goto LA8_;
			failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(TM__9brjMmGFaIx4wBkLyxxXZxw_164);
		}
		LA8_: ;
	}
	LA3_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, stdlib_httpclientDatInit000)(void) {

/* section: NIM_merge_TYPE_INIT3 */
NTIv2__L1L9b70HFrKWeYV59a3EWeaA_.destructor = (void*)eqdestroy___U8uLAIXBq8V9bZzYUjcBzkA; NTIv2__L1L9b70HFrKWeYV59a3EWeaA_.size = sizeof(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA); NTIv2__L1L9b70HFrKWeYV59a3EWeaA_.align = NIM_ALIGNOF(tyObject_HttpRequestError__L1L9b70HFrKWeYV59a3EWeaA); NTIv2__L1L9b70HFrKWeYV59a3EWeaA_.name = "|stdlib.httpclient.HttpRequestError|IOError|CatchableError|Exce"
"ption|RootObj|";
; NTIv2__L1L9b70HFrKWeYV59a3EWeaA_.traceImpl = (void*)NIM_NIL; NTIv2__L1L9b70HFrKWeYV59a3EWeaA_.disposeImpl = (void*)NIM_NIL;NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_.destructor = (void*)eqdestroy___F39brdC9bGKsCBoX3fDMHByw; NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_.size = sizeof(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ); NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_.align = NIM_ALIGNOF(tyObject_ProtocolError__G5GO9cu1ofZT8sZOJbdrvJQ); NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_.name = "|stdlib.httpclient.ProtocolError|IOError|CatchableError|Excepti"
"on|RootObj|";
; NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_.traceImpl = (void*)NIM_NIL; NTIv2__G5GO9cu1ofZT8sZOJbdrvJQ_.disposeImpl = (void*)NIM_NIL;}

