(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{457:function(t,a,e){"use strict";e.r(a);var s=e(21),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"nonebot-adapters-模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-adapters-模块"}},[t._v("#")]),t._v(" NoneBot.adapters 模块")]),t._v(" "),e("h2",{attrs:{id:"协议适配基类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#协议适配基类"}},[t._v("#")]),t._v(" 协议适配基类")]),t._v(" "),e("p",[t._v("各协议请继承以下基类，并使用 "),e("code",[t._v("driver.register_adapter")]),t._v(" 注册适配器")]),t._v(" "),e("h2",{attrs:{id:"class-basebot"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-basebot"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("BaseBot")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("abc.ABC")])]),t._v(" "),e("p",[t._v("Bot 基类。用于处理上报消息，并提供 API 调用接口。")]),t._v(" "),e("h3",{attrs:{id:"abstract-init-driver-connection-type-config-self-id-websocket-none"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-init-driver-connection-type-config-self-id-websocket-none"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract")]),t._v(" "),e("code",[t._v("__init__(driver, connection_type, config, self_id, *, websocket=None)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("driver: Driver")]),t._v(": Driver 对象")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("connection_type: str")]),t._v(": http 或者 websocket")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("config: Config")]),t._v(": Config 对象")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("self_id: str")]),t._v(": 机器人 ID")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("websocket: Optional[WebSocket]")]),t._v(": Websocket 连接对象")])])])])]),t._v(" "),e("h3",{attrs:{id:"driver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#driver"}},[t._v("#")]),t._v(" "),e("code",[t._v("driver")])]),t._v(" "),e("p",[t._v("Driver 对象")]),t._v(" "),e("h3",{attrs:{id:"connection-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connection-type"}},[t._v("#")]),t._v(" "),e("code",[t._v("connection_type")])]),t._v(" "),e("p",[t._v("连接类型")]),t._v(" "),e("h3",{attrs:{id:"config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" "),e("code",[t._v("config")])]),t._v(" "),e("p",[t._v("Config 配置对象")]),t._v(" "),e("h3",{attrs:{id:"self-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#self-id"}},[t._v("#")]),t._v(" "),e("code",[t._v("self_id")])]),t._v(" "),e("p",[t._v("机器人 ID")]),t._v(" "),e("h3",{attrs:{id:"websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#websocket"}},[t._v("#")]),t._v(" "),e("code",[t._v("websocket")])]),t._v(" "),e("p",[t._v("Websocket 连接对象")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-type"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("type")])]),t._v(" "),e("p",[t._v("Adapter 类型")]),t._v(" "),e("h3",{attrs:{id:"abstract-async-classmethod-check-permission-driver-connection-type-headers-body"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-classmethod-check-permission-driver-connection-type-headers-body"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async classmethod")]),t._v(" "),e("code",[t._v("check_permission(driver, connection_type, headers, body)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("检查连接请求是否合法的函数，如果合法则返回当前连接 "),e("code",[t._v("唯一标识符")]),t._v("，通常为机器人 ID；如果不合法则抛出 "),e("code",[t._v("RequestDenied")]),t._v(" 异常。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("driver: Driver")]),t._v(": Driver 对象")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("connection_type: str")]),t._v(": 连接类型")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("headers: dict")]),t._v(": 请求头")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("body: Optional[dict]")]),t._v(": 请求数据，WebSocket 连接该部分为空")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("返回")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("str")]),t._v(": 连接唯一标识符")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("异常")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("RequestDenied")]),t._v(": 请求非法")])])])]),t._v(" "),e("h3",{attrs:{id:"abstract-async-handle-message-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-message-message"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("handle_message(message)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("处理上报消息的函数，转换为 "),e("code",[t._v("Event")]),t._v(" 事件后调用 "),e("code",[t._v("nonebot.message.handle_event")]),t._v(" 进一步处理事件。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("message: dict")]),t._v(": 收到的上报消息")])])])]),t._v(" "),e("h3",{attrs:{id:"abstract-async-call-api-api-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-call-api-api-data"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("call_api(api, **data)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("调用机器人 API 接口，可以通过该函数或直接通过 bot 属性进行调用")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("api: str")]),t._v(": API 名称")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("**data")]),t._v(": API 数据")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("示例")])])])]),t._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("call_api"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"send_msg"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("h3",{attrs:{id:"abstract-async-send-event-message-kwargs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-send-event-message-kwargs"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract async")]),t._v(" "),e("code",[t._v("send(event, message, **kwargs)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("调用机器人基础发送消息接口")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("event: Event")]),t._v(": 上报事件")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("message: Union[str, Message, MessageSegment]")]),t._v(": 要发送的消息")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("**kwargs")])])])])])]),t._v(" "),e("h2",{attrs:{id:"class-baseevent"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-baseevent"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("BaseEvent")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("abc.ABC")])]),t._v(" "),e("p",[t._v("Event 基类。提供上报信息的关键信息，其余信息可从原始上报消息获取。")]),t._v(" "),e("h3",{attrs:{id:"init-raw-event"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#init-raw-event"}},[t._v("#")]),t._v(" "),e("code",[t._v("__init__(raw_event)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("raw_event: dict")]),t._v(": 原始上报消息")])])])]),t._v(" "),e("h3",{attrs:{id:"property-raw-event"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-raw-event"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("raw_event")])]),t._v(" "),e("p",[t._v("原始上报消息")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-id"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("id")])]),t._v(" "),e("p",[t._v("事件 ID")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-name"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("name")])]),t._v(" "),e("p",[t._v("事件名称")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-self-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-self-id"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("self_id")])]),t._v(" "),e("p",[t._v("机器人 ID")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-time"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-time"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("time")])]),t._v(" "),e("p",[t._v("事件发生时间")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-type-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-type-2"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("type")])]),t._v(" "),e("p",[t._v("事件主类型")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-detail-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-detail-type"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("detail_type")])]),t._v(" "),e("p",[t._v("事件详细类型")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-sub-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-sub-type"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("sub_type")])]),t._v(" "),e("p",[t._v("事件子类型")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-user-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-user-id"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("user_id")])]),t._v(" "),e("p",[t._v("触发事件的主体 ID")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-group-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-group-id"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("group_id")])]),t._v(" "),e("p",[t._v("触发事件的主体群 ID")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-to-me"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-to-me"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("to_me")])]),t._v(" "),e("p",[t._v("事件是否为发送给机器人的消息")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-message"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("message")])]),t._v(" "),e("p",[t._v("消息内容")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-reply"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-reply"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("reply")])]),t._v(" "),e("p",[t._v("回复的消息")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-raw-message"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-raw-message"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("raw_message")])]),t._v(" "),e("p",[t._v("原始消息")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-plain-text"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-plain-text"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("plain_text")])]),t._v(" "),e("p",[t._v("纯文本消息")]),t._v(" "),e("h3",{attrs:{id:"abstract-property-sender"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-sender"}},[t._v("#")]),t._v(" "),e("em",[t._v("abstract property")]),t._v(" "),e("code",[t._v("sender")])]),t._v(" "),e("p",[t._v("消息发送者信息")]),t._v(" "),e("h2",{attrs:{id:"class-basemessagesegment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-basemessagesegment"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("BaseMessageSegment")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("abc.ABC")])]),t._v(" "),e("p",[t._v("消息段基类")]),t._v(" "),e("h3",{attrs:{id:"type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" "),e("code",[t._v("type")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("类型: "),e("code",[t._v("str")])])]),t._v(" "),e("li",[e("p",[t._v("说明: 消息段类型")])])]),t._v(" "),e("h3",{attrs:{id:"data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[t._v("#")]),t._v(" "),e("code",[t._v("data")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("类型: "),e("code",[t._v("Dict[str, Union[str, list]]")])])]),t._v(" "),e("li",[e("p",[t._v("说明: 消息段数据")])])]),t._v(" "),e("h2",{attrs:{id:"class-basemessage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-basemessage"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("BaseMessage")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("list")]),t._v(", "),e("code",[t._v("abc.ABC")])]),t._v(" "),e("p",[t._v("消息数组")]),t._v(" "),e("h3",{attrs:{id:"init-message-none-args-kwargs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#init-message-none-args-kwargs"}},[t._v("#")]),t._v(" "),e("code",[t._v("__init__(message=None, *args, **kwargs)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("message: Union[str, dict, list, MessageSegment, Message]")]),t._v(": 消息内容")])])])]),t._v(" "),e("h3",{attrs:{id:"append-obj"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#append-obj"}},[t._v("#")]),t._v(" "),e("code",[t._v("append(obj)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("添加一个消息段到消息数组末尾")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("obj: Union[str, MessageSegment]")]),t._v(": 要添加的消息段")])])])]),t._v(" "),e("h3",{attrs:{id:"extend-obj"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extend-obj"}},[t._v("#")]),t._v(" "),e("code",[t._v("extend(obj)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("拼接一个消息数组或多个消息段到消息数组末尾")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("obj: Union[Message, Iterable[MessageSegment]]")]),t._v(": 要添加的消息数组")])])])]),t._v(" "),e("h3",{attrs:{id:"reduce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reduce"}},[t._v("#")]),t._v(" "),e("code",[t._v("reduce()")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("缩减消息数组，即拼接相邻纯文本消息段")])])]),t._v(" "),e("h3",{attrs:{id:"extract-plain-text"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extract-plain-text"}},[t._v("#")]),t._v(" "),e("code",[t._v("extract_plain_text()")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("提取消息内纯文本消息")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);