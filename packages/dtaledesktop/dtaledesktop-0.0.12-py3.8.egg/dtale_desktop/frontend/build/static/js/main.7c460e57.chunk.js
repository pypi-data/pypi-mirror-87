(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{151:function(e,t,n){e.exports=n(240)},156:function(e,t,n){},158:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),c=n.n(o),l=(n(156),n(48)),i=n(241),s=n(243),u=n(60),d=n(118),m=(n(157),n(158),n(18)),f=function(e){return{type:"ADD_SOURCES",sources:e}},h=function(e){return{type:"SET_SELECTED_SOURCE",source:e}},b=function(e){return{type:"UPDATE_SOURCE",source:e}},p=function(e){return{type:"UPDATE_NODE",node:e}},E=n(98),v=n.n(E),O=n(117),j=function(){var e=Object(O.a)(v.a.mark((function e(t){var n,a,r,o,c,l,i,s,u,d,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,a=t.url,r=t.body,o=t.params,c=t.resolve,l=t.reject,i=t.onStart,s=t.onFinish,i&&i(),o&&(a="".concat(a,"?").concat(new URLSearchParams(o).toString())),e.prev=3,e.next=6,fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 6:if((u=e.sent).ok){e.next=12;break}return e.next=10,u.json();case 10:throw d=e.sent,new Error("".concat(u.statusText,": ").concat(d.detail));case 12:return e.next=14,u.json();case 14:m=e.sent,c(m),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),l(e.t0.message);case 21:s&&s();case 22:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),g=n(248),y=n(148),S=n(247),w=n(244),C=n(249),k=n(242),D=n(253),T=n(250),P=n(251),x=n(252),U=function(e){var t=e.dispatch,n=e.node,o=e.page,c=void 0===o?"table":o,i=Object(a.useState)(!1),s=Object(l.a)(i,2),d=s[0],f=s[1];return r.a.createElement(u.a,{onClick:function(){j({method:"POST",url:"/node/view/",body:n,resolve:function(e){!function(e){try{window.open(e)}catch(t){}}("charts"===c?e.dtaleChartsUrl:e.dtaleUrl),t(p(e))},reject:function(e){return t(p(Object(m.a)(Object(m.a)({},n),{},{error:e})))},onStart:function(){return f(!0)},onFinish:function(){return f(!1)}})},loading:d,icon:"charts"===c?r.a.createElement(T.a,null):r.a.createElement(P.a,null)},"".concat("charts"===c?"Charts":"Table"))},L=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(U,{dispatch:t,node:n,page:"table"})},_=function(e){var t=e.dispatch,n=e.node;return r.a.createElement(U,{dispatch:t,node:n,page:"charts"})},I=function(e){var t=e.dispatch,n=e.node,o=Object(a.useState)(!1),c=Object(l.a)(o,2),i=c[0],s=c[1];return r.a.createElement(u.a,{title:"shut down",onClick:function(){s(!0),j({method:"POST",url:"node/kill/",body:n,resolve:function(e){t(p(e)),s(!1)},reject:function(e){var a=Object(m.a)(Object(m.a)({},n),{},{error:e});t(p(a)),s(!1)}})},disabled:!n.dtaleUrl,loading:i,icon:r.a.createElement(x.a,null)})},N=function(e){var t=e.source;return r.a.createElement(g.a,null,t.loading?r.a.createElement(d.a,{size:"small"}):"".concat(Object.keys(t.nodes||{}).length," results"))},R=function(e){var t=e.source,n=Object.values(t.nodes||{}).filter((function(e){return e.dtaleUrl})).length;return 0===n?null:r.a.createElement(g.a,{color:"green"},"".concat(n," active"))},A=function(e){var t=e.source;return t.error?r.a.createElement(g.a,{color:"error"},r.a.createElement(y.a,{content:t.error},"Error")):null},F=function(e){var t=e.source,n=e.loadMore;return t.nodesFullyLoaded||t.loading||t.error?null:r.a.createElement(u.a,{size:"small",onClick:function(e){e.stopPropagation(),n(t)}},"Load more")},z=function(e){var t=e.node,n=e.dispatch;return t.error?r.a.createElement(S.a,{type:"error",message:t.error,closable:!0,onClose:function(){return n(p(Object(m.a)(Object(m.a)({},t),{},{error:void 0})))}}):t.dtaleUrl?r.a.createElement("a",{href:t.dtaleUrl,target:"_blank",rel:"noopener noreferrer"},t.dtaleUrl):null},M=function(e){var t=e.sources,n=e.dispatch,o=function(e){n(b(Object(m.a)(Object(m.a)({},e),{},{loading:!0}))),j({method:"POST",url:"/source/nodes/list/",body:e,resolve:function(e){return n(b(Object(m.a)(Object(m.a)({},e),{},{loading:!1})))},reject:function(t){return n(b(Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:t})))}})};return Object(a.useEffect)((function(){t.forEach((function(e){e.loading||e.nodesFullyLoaded||e.error||0!==Object.keys(e.nodes||{}).length||o(e)}))})),r.a.createElement(w.a,{defaultActiveKey:[]},t.map((function(e){return r.a.createElement(w.a.Panel,{key:e.id,disabled:e.loading,header:r.a.createElement(C.b,null,r.a.createElement("span",null,e.name),r.a.createElement(N,{source:e}),r.a.createElement(R,{source:e}),r.a.createElement(A,{source:e}),r.a.createElement(F,{source:e,loadMore:o})),extra:r.a.createElement(u.a,{icon:r.a.createElement(D.a,null),onClick:function(t){t.stopPropagation(),n(h(e))}},"Settings")},r.a.createElement(k.b,{size:"small",bordered:!0,dataSource:Object.values(e.nodes||{}),renderItem:function(e){return r.a.createElement(k.b.Item,{actions:[r.a.createElement(L,{dispatch:n,node:e}),r.a.createElement(_,{dispatch:n,node:e}),r.a.createElement(I,{dispatch:n,node:e})]},r.a.createElement(k.b.Item.Meta,{title:e.path,description:r.a.createElement(z,{node:e,dispatch:n})}))}}))})))},B=n(81),J=n(246),G=n(245),W=n(134),$=n.n(W),q=(n(226),n(227),function(e){var t=e.name,n=e.value,a=e.onChange,o=e.width,c=e.theme,l=void 0===c?"monokai":c,i=e.maxLines,s=void 0===i?20:i,u=e.minLines,d=void 0===u?4:u,m=e.editorProps,f=void 0===m?{$blockScrolling:!0}:m,h=e.wrapEnabled,b=void 0===h||h,p=Object(B.a)(e,["name","value","onChange","width","theme","maxLines","minLines","editorProps","wrapEnabled"]);return r.a.createElement($.a,Object.assign({mode:"python",name:t,value:n,onChange:a,width:o,theme:l,maxLines:s,minLines:d,editorProps:f,wrapEnabled:b},p))}),K=function(e){var t=e.text;return r.a.createElement("div",{style:{marginTop:5,marginBottom:5}},t)},V=function(e){var t=e.source,n=e.dispatch,o=Object(a.useState)(null),c=Object(l.a)(o,2),i=c[0],s=c[1],d=""!==t.name?"edit":"new",p=Object(m.a)({},t),E=function(){var e=["name","listPaths","getData"],n=e.filter((function(e){return!p[e]}));return n.length>0?(s("Fill out the required fields: ".concat(n.join(", "))),!1):"edit"!==d||!e.every((function(e){return p[e]===t[e]}))||(s("No changes were made"),!1)};return r.a.createElement(J.a,{title:"new"===d?"Add Data Source":"Edit Data Source",width:720,onClose:function(){return n(h(null))},visible:!0},i?r.a.createElement(S.a,{type:"error",message:i,closable:!0,onClose:function(){return s(null)}}):null,r.a.createElement(K,{text:"Name"}),r.a.createElement(G.a,{disabled:!t.editable,defaultValue:p.name,onChange:function(e){p.name=e.target.value},size:"small"}),r.a.createElement(K,{text:"list_paths.py"}),r.a.createElement(q,{readOnly:!t.editable,name:"list_paths_code",value:p.listPaths,onChange:function(e){p.listPaths=e},width:"600",maxLines:16,minLines:16}),r.a.createElement(K,{text:"get_data.py"}),r.a.createElement(q,{readOnly:!t.editable,name:"get_data_code",value:p.getData,onChange:function(e){p.getData=e},width:"600",maxLines:16,minLines:16}),t.editable?r.a.createElement(u.a,{type:"primary",block:!0,style:{marginTop:10},onClick:function(){"new"===d?function(){if(E()){p.nodes;var e=Object(B.a)(p,["nodes"]);j({method:"POST",url:"/source/create/",body:e,resolve:function(e){n(f([e])),n(h(null))},reject:function(e){return s(e)}})}}():function(){if(E()){p.nodes;var e=Object(B.a)(p,["nodes"]);j({method:"POST",url:"/source/update/",body:e,resolve:function(e){n(b(e)),n(h(null))},reject:function(e){return s(e)}})}}()}},"Submit"):null)},H=n(102);function Q(e,t){switch(t.type){case"ADD_SOURCES":return Object(m.a)(Object(m.a)({},e),{},{sources:[].concat(Object(H.a)(t.sources),Object(H.a)(e.sources||[]))});case"SET_SELECTED_SOURCE":return Object(m.a)(Object(m.a)({},e),{},{selectedSource:t.source});case"UPDATE_SOURCE":return Object(m.a)(Object(m.a)({},e),{},{sources:e.sources.map((function(e){return e.id===t.source.id?t.source:e}))});case"UPDATE_NODE":return Object(m.a)(Object(m.a)({},e),{},{sources:e.sources.map((function(e){return e.id===t.node.sourceId?(n=e,a=t.node,Object(m.a)(Object(m.a)({},n),{},{nodes:Object.fromEntries(Object.entries(n.nodes||{}).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return r.dataId===a.dataId?[n,a]:[n,r]})))})):e;var n,a}))});default:return Object(m.a)(Object(m.a)({},e),{},{sources:e.sources||[]})}}var X={sources:void 0,selectedSource:null},Y=i.a.Content,Z=function(){var e=Object(a.useReducer)(Q,X),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){j({method:"GET",url:"/source/list/",resolve:function(e){return o(f(e))},reject:function(e){return null}})}),[]),r.a.createElement(i.a,{className:"layout"},r.a.createElement(Y,{style:{width:"100vw"}},r.a.createElement(s.a,{title:"D-Tale Desktop",className:"site-page-header",subTitle:"",extra:[r.a.createElement(u.a,{key:"newDataSource",type:"primary",onClick:function(){o(h({id:"",name:"",packageName:"",nodes:void 0,nodesFullyLoaded:!1,error:null,visible:!0,editable:!0,listPaths:'from typing import Iterable\n\n\ndef main() -> Iterable[str]:\n    """\n    Return an iterable of paths identifying where data is located, such as file paths or URLs.\n    These paths will be passed to your function in get_data.py.\n    """\n    raise NotImplementedError()\n',getData:'import pandas as pd\n\n\ndef main(path: str) -> pd.DataFrame:\n    """\n    Given a path, retrieve that data and return it as a pandas dataframe\n    """\n    raise NotImplementedError()\n',saveData:""}))}},"Add Data Source")]}),r.a.createElement("div",{style:{width:"100%"}},void 0===n.sources?r.a.createElement(d.a,null):r.a.createElement(M,{sources:n.sources,dispatch:o})),n.selectedSource?r.a.createElement(V,{source:n.selectedSource,dispatch:o}):null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[151,1,2]]]);
//# sourceMappingURL=main.7c460e57.chunk.js.map