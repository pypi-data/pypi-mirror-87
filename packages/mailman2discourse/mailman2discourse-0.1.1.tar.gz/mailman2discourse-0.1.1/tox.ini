[tox]
envlist = flake8,py3

[testenv]
setenv =
       VIRTUAL_ENV={envdir}
passenv =
       PYTEST_ADDOPTS
usedevelop = True
deps =
     -r{toxinidir}/requirements.txt
     -r{toxinidir}/requirements-dev.txt
commands = coverage run --source=mailman2discourse {envbindir}/py.test --log-cli-level=INFO -vvv --durations 10 {posargs:tests --discourse=v2.6.0,v2.5.5}
           coverage report --omit=*test*,*tox* --show-missing

[testenv:flake8]
commands = flake8 {posargs}

[flake8]
exclude = venv,.tox,dist,doc,*.egg
show-source = true
max_line_length = 100
