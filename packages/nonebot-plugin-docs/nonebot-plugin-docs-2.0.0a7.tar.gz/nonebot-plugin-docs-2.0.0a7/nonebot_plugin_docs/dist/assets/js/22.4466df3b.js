(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{464:function(e,t,s){"use strict";s.r(t);var _=s(21),v=Object(_.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"nonebot-matcher-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-matcher-模块"}},[e._v("#")]),e._v(" NoneBot.matcher 模块")]),e._v(" "),s("h2",{attrs:{id:"事件响应器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件响应器"}},[e._v("#")]),e._v(" 事件响应器")]),e._v(" "),s("p",[e._v("该模块实现事件响应器的创建与运行，并提供一些快捷方法来帮助用户更好的与机器人进行 对话 。")]),e._v(" "),s("h2",{attrs:{id:"matchers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#matchers"}},[e._v("#")]),e._v(" "),s("code",[e._v("matchers")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("Dict[int, List[Type[Matcher]]]")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("用于存储当前所有的事件响应器")])])]),e._v(" "),s("h2",{attrs:{id:"class-matcher"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-matcher"}},[e._v("#")]),e._v(" "),s("em",[e._v("class")]),e._v(" "),s("code",[e._v("Matcher")])]),e._v(" "),s("p",[e._v("基类："),s("code",[e._v("object")])]),e._v(" "),s("p",[e._v("事件响应器类")]),e._v(" "),s("h3",{attrs:{id:"module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[e._v("#")]),e._v(" "),s("code",[e._v("module")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("Optional[str]")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器所在模块名称")])])]),e._v(" "),s("h3",{attrs:{id:"type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[e._v("#")]),e._v(" "),s("code",[e._v("type")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("str")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器类型")])])]),e._v(" "),s("h3",{attrs:{id:"rule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rule"}},[e._v("#")]),e._v(" "),s("code",[e._v("rule")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("Rule")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器匹配规则")])])]),e._v(" "),s("h3",{attrs:{id:"permission"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#permission"}},[e._v("#")]),e._v(" "),s("code",[e._v("permission")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("Permission")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器触发权限")])])]),e._v(" "),s("h3",{attrs:{id:"priority"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#priority"}},[e._v("#")]),e._v(" "),s("code",[e._v("priority")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("int")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器优先级")])])]),e._v(" "),s("h3",{attrs:{id:"block"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#block"}},[e._v("#")]),e._v(" "),s("code",[e._v("block")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("bool")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器是否阻止事件传播")])])]),e._v(" "),s("h3",{attrs:{id:"temp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#temp"}},[e._v("#")]),e._v(" "),s("code",[e._v("temp")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("bool")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器是否为临时")])])]),e._v(" "),s("h3",{attrs:{id:"expire-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expire-time"}},[e._v("#")]),e._v(" "),s("code",[e._v("expire_time")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("Optional[datetime]")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器过期时间点")])])]),e._v(" "),s("h3",{attrs:{id:"default-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-state"}},[e._v("#")]),e._v(" "),s("code",[e._v("_default_state")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("dict")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器默认状态")])])]),e._v(" "),s("h3",{attrs:{id:"default-parser"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-parser"}},[e._v("#")]),e._v(" "),s("code",[e._v("_default_parser")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("Optional[ArgsParser]")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器默认参数解析函数")])])]),e._v(" "),s("h3",{attrs:{id:"init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init"}},[e._v("#")]),e._v(" "),s("code",[e._v("__init__()")])]),e._v(" "),s("p",[e._v("实例化 Matcher 以便运行")]),e._v(" "),s("h3",{attrs:{id:"handlers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handlers"}},[e._v("#")]),e._v(" "),s("code",[e._v("handlers")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("List[Handler]")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("事件响应器拥有的事件处理函数列表")])])]),e._v(" "),s("h3",{attrs:{id:"classmethod-new-type-rule-none-permission-none-handlers-none-temp-false-priority-1-block-false-module-none-default-state-none-expire-time-none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-new-type-rule-none-permission-none-handlers-none-temp-false-priority-1-block-false-module-none-default-state-none-expire-time-none"}},[e._v("#")]),e._v(" "),s("em",[e._v("classmethod")]),e._v(" "),s("code",[e._v("new(type_='', rule=None, permission=None, handlers=None, temp=False, priority=1, block=False, *, module=None, default_state=None, expire_time=None)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("创建一个新的事件响应器，并存储至 "),s("a",{attrs:{href:"#matchers"}},[e._v("matchers")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("type_: str")]),e._v(": 事件响应器类型，与 "),s("code",[e._v("event.type")]),e._v(" 一致时触发，空字符串表示任意")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("rule: Optional[Rule]")]),e._v(": 匹配规则")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("permission: Optional[Permission]")]),e._v(": 权限")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("handlers: Optional[List[Handler]]")]),e._v(": 事件处理函数列表")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("temp: bool")]),e._v(": 是否为临时事件响应器，即触发一次后删除")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("priority: int")]),e._v(": 响应优先级")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("block: bool")]),e._v(": 是否阻止事件向更低优先级的响应器传播")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("module: Optional[str]")]),e._v(": 事件响应器所在模块名称")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("default_state: Optional[dict]")]),e._v(": 默认状态 "),s("code",[e._v("state")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("expire_time: Optional[datetime]")]),e._v(": 事件响应器最终有效时间点，过时即被删除")])])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("返回")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("Type[Matcher]")]),e._v(": 新的事件响应器类")])])])]),e._v(" "),s("h3",{attrs:{id:"async-classmethod-check-perm-bot-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-check-perm-bot-event"}},[e._v("#")]),e._v(" "),s("em",[e._v("async classmethod")]),e._v(" "),s("code",[e._v("check_perm(bot, event)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("检查是否满足触发权限")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("bot: Bot")]),e._v(": Bot 对象")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("event: Event")]),e._v(": 上报事件")])])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("返回")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("bool")]),e._v(": 是否满足权限")])])])]),e._v(" "),s("h3",{attrs:{id:"async-classmethod-check-rule-bot-event-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-check-rule-bot-event-state"}},[e._v("#")]),e._v(" "),s("em",[e._v("async classmethod")]),e._v(" "),s("code",[e._v("check_rule(bot, event, state)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("检查是否满足匹配规则")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("bot: Bot")]),e._v(": Bot 对象")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("event: Event")]),e._v(": 上报事件")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("state: dict")]),e._v(": 当前状态")])])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("返回")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("bool")]),e._v(": 是否满足匹配规则")])])])]),e._v(" "),s("h3",{attrs:{id:"classmethod-args-parser-func"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-args-parser-func"}},[e._v("#")]),e._v(" "),s("em",[e._v("classmethod")]),e._v(" "),s("code",[e._v("args_parser(func)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("装饰一个函数来更改当前事件响应器的默认参数解析函数")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("func: ArgsParser")]),e._v(": 参数解析函数")])])])]),e._v(" "),s("h3",{attrs:{id:"classmethod-handle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-handle"}},[e._v("#")]),e._v(" "),s("em",[e._v("classmethod")]),e._v(" "),s("code",[e._v("handle()")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("装饰一个函数来向事件响应器直接添加一个处理函数")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[e._v("无")])])])]),e._v(" "),s("h3",{attrs:{id:"classmethod-receive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-receive"}},[e._v("#")]),e._v(" "),s("em",[e._v("classmethod")]),e._v(" "),s("code",[e._v("receive()")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("装饰一个函数来指示 NoneBot 在接收用户新的一条消息后继续运行该函数")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[e._v("无")])])])]),e._v(" "),s("h3",{attrs:{id:"classmethod-got-key-prompt-none-args-parser-none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-got-key-prompt-none-args-parser-none"}},[e._v("#")]),e._v(" "),s("em",[e._v("classmethod")]),e._v(" "),s("code",[e._v("got(key, prompt=None, args_parser=None)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("装饰一个函数来指示 NoneBot 当要获取的 "),s("code",[e._v("key")]),e._v(" 不存在时接收用户新的一条消息并经过 "),s("code",[e._v("ArgsParser")]),e._v(" 处理后再运行该函数，如果 "),s("code",[e._v("key")]),e._v(" 已存在则直接继续运行")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("key: str")]),e._v(": 参数名")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("prompt: Optional[Union[str, Message, MessageSegment]]")]),e._v(": 在参数不存在时向用户发送的消息")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("args_parser: Optional[ArgsParser]")]),e._v(": 可选参数解析函数，空则使用默认解析函数")])])])])]),e._v(" "),s("h3",{attrs:{id:"async-classmethod-send-message-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-send-message-kwargs"}},[e._v("#")]),e._v(" "),s("em",[e._v("async classmethod")]),e._v(" "),s("code",[e._v("send(message, **kwargs)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("发送一条消息给当前交互用户")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("message: Union[str, Message, MessageSegment]")]),e._v(": 消息内容")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("**kwargs")]),e._v(": 其他传递给 "),s("code",[e._v("bot.send")]),e._v(" 的参数，请参考对应 adapter 的 bot 对象 api")])])])])]),e._v(" "),s("h3",{attrs:{id:"async-classmethod-finish-message-none-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-finish-message-none-kwargs"}},[e._v("#")]),e._v(" "),s("em",[e._v("async classmethod")]),e._v(" "),s("code",[e._v("finish(message=None, **kwargs)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("发送一条消息给当前交互用户并结束当前事件响应器")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("message: Union[str, Message, MessageSegment]")]),e._v(": 消息内容")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("**kwargs")]),e._v(": 其他传递给 "),s("code",[e._v("bot.send")]),e._v(" 的参数，请参考对应 adapter 的 bot 对象 api")])])])])]),e._v(" "),s("h3",{attrs:{id:"async-classmethod-pause-prompt-none-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-pause-prompt-none-kwargs"}},[e._v("#")]),e._v(" "),s("em",[e._v("async classmethod")]),e._v(" "),s("code",[e._v("pause(prompt=None, **kwargs)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("发送一条消息给当前交互用户并暂停事件响应器，在接收用户新的一条消息后继续下一个处理函数")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("prompt: Union[str, Message, MessageSegment]")]),e._v(": 消息内容")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("**kwargs")]),e._v(": 其他传递给 "),s("code",[e._v("bot.send")]),e._v(" 的参数，请参考对应 adapter 的 bot 对象 api")])])])])]),e._v(" "),s("h3",{attrs:{id:"async-classmethod-reject-prompt-none-kwargs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-classmethod-reject-prompt-none-kwargs"}},[e._v("#")]),e._v(" "),s("em",[e._v("async classmethod")]),e._v(" "),s("code",[e._v("reject(prompt=None, **kwargs)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("发送一条消息给当前交互用户并暂停事件响应器，在接收用户新的一条消息后重新运行当前处理函数")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("参数")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("prompt: Union[str, Message, MessageSegment]")]),e._v(": 消息内容")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("**kwargs")]),e._v(": 其他传递给 "),s("code",[e._v("bot.send")]),e._v(" 的参数，请参考对应 adapter 的 bot 对象 api")])])])])]),e._v(" "),s("h2",{attrs:{id:"class-matchergroup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-matchergroup"}},[e._v("#")]),e._v(" "),s("em",[e._v("class")]),e._v(" "),s("code",[e._v("MatcherGroup")])]),e._v(" "),s("p",[e._v("基类："),s("code",[e._v("object")])]),e._v(" "),s("p",[e._v("事件响应器组合，统一管理。用法同 "),s("code",[e._v("Matcher")])]),e._v(" "),s("h3",{attrs:{id:"init-type-rule-none-permission-none-handlers-none-temp-false-priority-1-block-false-module-none-default-state-none-expire-time-none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init-type-rule-none-permission-none-handlers-none-temp-false-priority-1-block-false-module-none-default-state-none-expire-time-none"}},[e._v("#")]),e._v(" "),s("code",[e._v("__init__(type_='', rule=None, permission=None, handlers=None, temp=False, priority=1, block=False, *, module=None, default_state=None, expire_time=None)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("创建一个事件响应器组合，参数为默认值，与 "),s("code",[e._v("Matcher.new")]),e._v(" 一致")])])]),e._v(" "),s("h3",{attrs:{id:"matchers-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#matchers-2"}},[e._v("#")]),e._v(" "),s("code",[e._v("matchers")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("类型")])]),e._v(" "),s("p",[s("code",[e._v("List[Type[Matcher]]")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("组内事件响应器列表")])])]),e._v(" "),s("h3",{attrs:{id:"new-type-rule-none-permission-none-handlers-none-temp-false-priority-1-block-false-module-none-default-state-none-expire-time-none"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-type-rule-none-permission-none-handlers-none-temp-false-priority-1-block-false-module-none-default-state-none-expire-time-none"}},[e._v("#")]),e._v(" "),s("code",[e._v("new(type_='', rule=None, permission=None, handlers=None, temp=False, priority=1, block=False, *, module=None, default_state=None, expire_time=None)")])]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("说明")])]),e._v(" "),s("p",[e._v("在组中创建一个新的事件响应器，参数留空则使用组合默认值")])])]),e._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[e._v("警告")]),e._v(" "),s("p",[e._v("如果使用 handlers 参数覆盖组合默认值则该事件响应器不会随组合一起添加新的事件处理函数")])])])}),[],!1,null,null,null);t.default=v.exports}}]);