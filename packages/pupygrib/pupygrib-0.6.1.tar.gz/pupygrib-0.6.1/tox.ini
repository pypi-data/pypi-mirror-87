# Tox (http://tox.testrun.org/) is a tool for running tests
# in multiple virtualenvs. This configuration file will run the
# test suite on all supported python versions. To use it, "pip install tox"
# and then run "tox" from this directory.

[tox]
envlist =
    py36-numpy{112,113,114,115,116,117,118,119}
    py37-numpy{114,115,116,117,118,119}
    py38-numpy{117,118,119}
    black
    check-manifest
    coverage
    flake8

[testenv]
commands = pytest
deps =
    -rrequirements/test.txt
    numpy112: numpy~=1.12.1
    numpy113: numpy~=1.13.3
    numpy114: numpy~=1.14.6
    numpy115: numpy~=1.15.4
    numpy116: numpy~=1.16.6
    numpy117: numpy~=1.17.5
    numpy118: numpy~=1.18.5
    numpy119: numpy~=1.19.4

[testenv:black]
commands = black --check .
deps = black ~= 19.3b0
skip_install = true

[testenv:check-manifest]
commands = check-manifest
deps = check-manifest ~= 0.39.0
skip_install = true

[testenv:coverage]
commands = pytest --cov {envsitepackagesdir}/pupygrib

[testenv:flake8]
commands = flake8
deps = flake8 ~= 3.7.7
skip_install = true
