{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "http://example.com/example.json",
    "type": "object",
    "title": "DBT Log Parser Report Schema",
    "description": "Schema of the report generated by the dbt_log_parser",
    "default": {},
    "examples": [
        {
            "models_found": 469,
            "tests_found": 1658,
            "snapshots_found": 0,
            "analyses_found": 0,
            "macros_found": 300,
            "operations_found": 0,
            "seeds_found": 0,
            "sources_found": 204,
            "tests_run": 1100,
            "tests_runtime_seconds": 97.47,
            "tests": [
                {
                    "number": 1,
                    "name": "accepted_values_dim_order_state_open",
                    "status": "PASS",
                    "total_time": 2.11
                },
                {
                    "status": "WARN",
                    "number": 2,
                    "name": "relationships_fact_contribution_goal_updates_contribution_page_id__contribution_page_id__ref_dim_contribution_page_",
                    "total_time": 1.73,
                    "query_results": {
                        "found": 5,
                        "expected": 0
                    },
                    "query": {
                        "filepath": "target/compiled/core/schema_test/relationships_fact_contribution_goal_updates_34dae512835158ed459182c173a8c127.sql",
                        "sql": null,
                        "file_err": true
                    }
                },
                {
                    "status": "FAIL",
                    "number": 548326,
                    "name": "unique_int_home_page_display_resources_you_may_like_event_user_id",
                    "total_time": 1.16,
                    "query_results": {
                        "found": 548326,
                        "expected": 0
                    },
                    "query": {
                        "filepath": "target/compiled/core/schema_test/unique_int_home_page_display_resources_you_may_like_event_user_id.sql",
                        "sql": null,
                        "file_err": true
                    }
                }
            ]
        }
    ],
    "required": [
        "models_found",
        "tests_found",
        "snapshots_found",
        "analyses_found",
        "macros_found",
        "operations_found",
        "seeds_found",
        "sources_found",
        "tests_run",
        "tests_runtime_seconds",
        "tests"
    ],
    "properties": {
        "models_found": {
            "$id": "#/properties/models_found",
            "type": "integer",
            "title": "The models_found schema",
            "description": "How many models were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                469
            ]
        },
        "tests_found": {
            "$id": "#/properties/tests_found",
            "type": "integer",
            "title": "The tests_found schema",
            "description": "How many tests were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                1658
            ]
        },
        "snapshots_found": {
            "$id": "#/properties/snapshots_found",
            "type": "integer",
            "title": "The snapshots_found schema",
            "description": "How many snapshots were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                0
            ]
        },
        "analyses_found": {
            "$id": "#/properties/analyses_found",
            "type": "integer",
            "title": "The analyses_found schema",
            "description": "How many analyses were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                0
            ]
        },
        "macros_found": {
            "$id": "#/properties/macros_found",
            "type": "integer",
            "title": "The macros_found schema",
            "description": "How many macros were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                300
            ]
        },
        "operations_found": {
            "$id": "#/properties/operations_found",
            "type": "integer",
            "title": "The operations_found schema",
            "description": "How many operations were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                0
            ]
        },
        "seeds_found": {
            "$id": "#/properties/seeds_found",
            "type": "integer",
            "title": "The seeds_found schema",
            "description": "How many seeds were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                0
            ]
        },
        "sources_found": {
            "$id": "#/properties/sources_found",
            "type": "integer",
            "title": "The sources_found schema",
            "description": "How many sources were parsed by dbt in the project before running",
            "default": 0,
            "examples": [
                204
            ]
        },
        "tests_run": {
            "$id": "#/properties/tests_run",
            "type": "integer",
            "title": "The tests_run schema",
            "description": "An explanation about the purpose of this instance.",
            "description": "How many tests were actually run by dbt according to the log",
            "default": 0,
            "examples": [
                1100
            ]
        },
        "tests_runtime_seconds": {
            "$id": "#/properties/tests_runtime_seconds",
            "type": "number",
            "title": "The tests_runtime_seconds schema",
            "description": "How long it took to run all tests according to the log",
            "default": 0.0,
            "examples": [
                97.47
            ]
        },
        "tests": {
            "$id": "#/properties/tests",
            "type": "array",
            "title": "The tests schema",
            "description": "Details on each test run by dbt",
            "default": [],
            "examples": [
                [
                    {
                        "number": 1,
                        "name": "accepted_values_dim_cur_bronto_contact_bronto_status__active__onboarding__transactional__bounce__unconfirmed__unsub",
                        "status": "PASS",
                        "total_time": 2.11
                    },
                    {
                        "number": 6,
                        "name": "dbt_utils_not_constant_dim_cur_gift_card_is_donors_choose_gift_card",
                        "status": "PASS",
                        "total_time": 2.27
                    }
                ]
            ],
            "additionalItems": true,
            "items": {
                "$id": "#/properties/tests/items",
                "anyOf": [
                    {
                        "$id": "#/properties/tests/items/anyOf/0",
                        "type": "object",
                        "title": "The first anyOf schema",
                        "description": "Details about the outcome of a specific test run by dbt",
                        "default": {},
                        "examples": [
                            {
                                "number": 1,
                                "name": "accepted_values_dim_cur_bronto_contact_bronto_status__active__onboarding__transactional__bounce__unconfirmed__unsub",
                                "status": "PASS",
                                "total_time": 2.11
                            }
                        ],
                        "required": [
                            "number",
                            "name",
                            "status",
                            "total_time"
                        ],
                        "properties": {
                            "number": {
                                "$id": "#/properties/tests/items/anyOf/0/properties/number",
                                "type": "integer",
                                "title": "The number schema",
                                "description": "Unique test number",
                                "default": 0,
                                "examples": [
                                    1
                                ]
                            },
                            "name": {
                                "$id": "#/properties/tests/items/anyOf/0/properties/name",
                                "type": "string",
                                "title": "The name schema",
                                "description": "Test name",
                                "default": "",
                                "examples": [
                                    "accepted_values_dim_cur_bronto_contact_bronto_status__active__onboarding__transactional__bounce__unconfirmed__unsub"
                                ]
                            },
                            "status": {
                                "$id": "#/properties/tests/items/anyOf/0/properties/status",
                                "type": "string",
                                "enum": ["PASS", "WARN", "FAIL"],
                                "title": "The status schema",
                                "description": "Test outcome",
                                "default": ""
                            },
                            "total_time": {
                                "$id": "#/properties/tests/items/anyOf/0/properties/total_time",
                                "type": "number",
                                "title": "The total_time schema",
                                "description": "Total time in seconds it took to run this test",
                                "default": 0.0,
                                "examples": [
                                    2.11
                                ]
                            },
                            "query_results": {
                                "$id": "#/properties/tests/items/anyOf/1/properties/query_results",
                                "type": "object",
                                "title": "The query_results schema",
                                "description": "An explanation about the purpose of this instance.",
                                "default": {},
                                "examples": [
                                    {
                                        "found": 5,
                                        "expected": 0
                                    }
                                ],
                                "required": [
                                    "found",
                                    "expected"
                                ],
                                "properties": {
                                    "found": {
                                        "$id": "#/properties/tests/items/anyOf/1/properties/query_results/properties/found",
                                        "type": "integer",
                                        "title": "The found schema",
                                        "description": "Test returned this many records",
                                        "default": 0,
                                        "examples": [
                                            5
                                        ]
                                    },
                                    "expected": {
                                        "$id": "#/properties/tests/items/anyOf/1/properties/query_results/properties/expected",
                                        "type": "integer",
                                        "title": "The expected schema",
                                        "description": "Test expected this many records to be returned.",
                                        "default": 0,
                                        "examples": [
                                            0
                                        ]
                                    }
                                },
                                "additionalProperties": true
                            },
                            "query": {
                                "$id": "#/properties/tests/items/anyOf/1/properties/query",
                                "type": "object",
                                "title": "The query schema",
                                "description": "An explanation about the purpose of this instance.",
                                "default": {},
                                "examples": [
                                    {
                                        "filepath": "target/compiled/core/schema_test/is_gte_zero_dim_school_access_subscriptions_subscription_term_length.sql",
                                        "sql": null,
                                        "file_err": true
                                    }
                                ],
                                "required": [
                                    "filepath",
                                    "sql",
                                    "file_err"
                                ],
                                "properties": {
                                    "filepath": {
                                        "$id": "#/properties/tests/items/anyOf/1/properties/query/properties/filepath",
                                        "type": "string",
                                        "title": "The filepath schema",
                                        "description": "Path to file containing compiled SQL for test",
                                        "default": "",
                                        "examples": [
                                            "target/compiled/core/schema_test/is_gte_zero_dim_school_access_subscriptions_subscription_term_length.sql"
                                        ]
                                    },
                                    "sql": {
                                        "$id": "#/properties/tests/items/anyOf/1/properties/query/properties/sql",
                                        "type": "null",
                                        "title": "The sql schema",
                                        "description": "Compiled SQL for dbt test",
                                        "default": null,
                                        "examples": [
                                            null
                                        ]
                                    },
                                    "file_err": {
                                        "$id": "#/properties/tests/items/anyOf/1/properties/query/properties/file_err",
                                        "type": "boolean",
                                        "title": "The file_err schema",
                                        "description": "True if parser unable to open compiled SQL path relative to execution directory",
                                        "default": false,
                                        "examples": [
                                            true
                                        ]
                                    }
                                },
                                "additionalProperties": true
                            }
                        },
                        "additionalProperties": true
                    }
                ]
            }
        }
    },
    "additionalProperties": true
}
